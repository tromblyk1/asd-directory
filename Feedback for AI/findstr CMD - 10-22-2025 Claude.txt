C:\Projects\ASD-Directory>findstr /s /i "contact" *.jsx *.tsx *.js
src\frontend\dist\assets\index-521__UTy.js: */const j=(t,s)=>{const a=e.forwardRef(({color:a="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:n="",children:o,...d},c)=>{return e.createElement("svg",{ref:c,...v,width:r,height:r,stroke:a,strokeWidth:l?24*Number(i)/Number(r):i,className:["lucide",`lucide-${h=t,h.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()}`,n].join(" "),...d},[...s.map(([t,s])=>e.createElement(t,s)),...Array.isArray(o)?o:[o]]);var h});return a.displayName=`${t}`,a},k=j("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),N=j("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),w=j("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),A=j("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]),S=j("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]),C=j("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),E=j("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),_=j("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),R=j("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),T=j("Church",[["path",{d:"m18 7 4 2v11a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9l4-2",key:"gy5gyo"}],["path",{d:"M14 22v-4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v4",key:"cpkuc4"}],["path",{d:"M18 22V5l-6-3-6 3v17",key:"1hsnhq"}],["path",{d:"M12 7v5",key:"ma6bk"}],["path",{d:"M10 9h4",key:"u4k05v"}]]),I=j("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),L=j("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),O=j("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),M=j("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),F=j("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),P=j("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),B=j("HeartPulse",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]]),D=j("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),H=j("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),W=j("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),U=j("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),z=j("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Y=j("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),q=j("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),G=j("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),V=j("PawPrint",[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]]),$=j("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),K=j("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Z=j("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),J=j("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Q=j("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),X=j("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),ee=j("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),te=j("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),se=j("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),ae=j("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),re=j("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),ie=j("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),le={10:"https://donate.stripe.com/aFa9AMbSBbOF12o6UC3VC07",25:"https://donate.stripe.com/3cI9AMcWF9Gx9yUgvc3VC0a",50:"https://donate.stripe.com/00w00c09T1a15iE6UC3VC09",100:"https://donate.stripe.com/aFaeV62i1cSJ7qMgvc3VC08",250:"https://donate.stripe.com/cNi6oAbSB4md26s0we3VC06",custom:"https://donate.stripe.com/aFaeV68Gp2e5fXidj03VC05"},ne={10:"https://donate.stripe.com/00w9AM9Kt2e5fXibaS3VC01",25:"https://donate.stripe.com/6oU00c9Kt05X5iE92K3VC04",50:"https://donate.stripe.com/3cIfZa6yh1a18uQ0we3VC03",100:"https://donate.stripe.com/14A00c1dX7yp9yUgvc3VC02"},oe=({isOpen:t,onClose:s})=>{const a=e.useRef(null);if(e.useEffect(()=>{if(!t)return;const e=e=>{"Escape"===e.key&&s()},r=document.body.style.overflow;return document.body.style.overflow="hidden",document.addEventListener("keydown",e),requestAnimationFrame(()=>{var e;null==(e=a.current)||e.focus()}),()=>{document.body.style.overflow=r,document.removeEventListener("keydown",e)}},[t,s]),!t)return null;const r="donate-modal-title";return p.jsx("div",{className:"fixed inset-0 z-50 flex min-h-screen items-center justify-center bg-black/50 p-4",onClick:s,role:"presentation",children:p.jsxs("div",{ref:a,className:"max-h-[90vh] w-full max-w-lg overflow-hidden rounded-2xl bg-white shadow-2xl focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-500 dark:bg-slate-800",role:"dialog","aria-modal":"true","aria-labelledby":r,tabIndex:-1,onClick:e=>e.stopPropagation(),children:[p.jsxs("div",{className:"sticky top-0 flex items-center justify-between gap-3 border-b border-amber-100 bg-gradient-to-r from-amber-50 to-teal-50 px-6 py-5 dark:border-slate-700 dark:from-slate-800 dark:to-slate-800",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"rounded-full bg-amber-100 p-2 dark:bg-amber-900/30",children:p.jsx(D,{className:"h-6 w-6 text-amber-600 dark:text-amber-400"})}),p.jsx("h2",{id:r,className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:"Support Our Mission"})]}),p.jsx("button",{type:"button",onClick:s,className:"rounded-lg p-2 transition-colors hover:bg-white/60 dark:hover:bg-slate-700","aria-label":"Close support modal",children:p.jsx(ie,{className:"h-6 w-6 text-slate-600 dark:text-slate-400"})})]}),p.jsxs("div",{className:"max-h-[80vh] overflow-y-auto px-6 py-6 space-y-6",children:[p.jsx("div",{className:"rounded-xl border border-amber-200 bg-amber-50 p-4 dark:border-amber-800 dark:bg-amber-900/20",children:p.jsxs("p",{className:"leading-relaxed text-slate-700 dark:text-slate-300",children:[p.jsx("strong",{className:"text-slate-900 dark:text-slate-100",children:"Florida Autism Services is a free community resource."})," Your donations help us verify providers, maintain the site, expand our directory, and keep this resource accessible to all families navigating autism services in Florida."]})}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-slate-800 dark:text-slate-100",children:[p.jsx(L,{className:"h-5 w-5 text-teal-600 dark:text-teal-400"}),p.jsx("span",{children:"Your Support Helps Us:"})]}),p.jsx("ul",{className:"space-y-3",children:["Verify and vet service providers for quality and legitimacy","Maintain and improve the website infrastructure","Expand the directory to reach more families","Keep the site ad-free and accessible to everyone","Develop new resources and educational content","Provide timely updates on autism services and programs"].map((e,t)=>p.jsxs("li",{className:"flex items-start gap-3",children:[p.jsx("div",{className:"mt-1 rounded bg-teal-100 p-1 dark:bg-teal-900/30",children:p.jsx(D,{className:"h-3 w-3 text-teal-600 dark:text-teal-400"})}),p.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:e})]},t))})]}),p.jsxs("div",{className:"space-y-4 rounded-xl bg-slate-50 p-6 dark:bg-slate-900/50",children:[p.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-100",children:"One-Time Donation"}),p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsx("a",{href:le[10],target:"_blank",rel:"noopener noreferrer",className:"block rounded-lg border-2 border-teal-500 bg-white px-4 py-3 text-center font-semibold text-teal-700 transition-all hover:bg-teal-50 hover:shadow-md dark:bg-slate-800 dark:text-teal-300 dark:hover:bg-teal-900/30",children:"$10"}),p.jsx("a",{href:le[25],target:"_blank",rel:"noopener noreferrer",className:"block rounded-lg border-2 border-teal-500 bg-white px-4 py-3 text-center font-semibold text-teal-700 transition-all hover:bg-teal-50 hover:shadow-md dark:bg-slate-800 dark:text-teal-300 dark:hover:bg-teal-900/30",children:"$25"}),p.jsx("a",{href:le[50],target:"_blank",rel:"noopener noreferrer",className:"block rounded-lg border-2 border-teal-500 bg-white px-4 py-3 text-center font-semibold text-teal-700 transition-all hover:bg-teal-50 hover:shadow-md dark:bg-slate-800 dark:text-teal-300 dark:hover:bg-teal-900/30",children:"$50"}),p.jsx("a",{href:le[100],target:"_blank",rel:"noopener noreferrer",className:"block rounded-lg border-2 border-teal-500 bg-white px-4 py-3 text-center font-semibold text-teal-700 transition-all hover:bg-teal-50 hover:shadow-md dark:bg-slate-800 dark:text-teal-300 dark:hover:bg-teal-900/30",children:"$100"}),p.jsx("a",{href:le[250],target:"_blank",rel:"noopener noreferrer",className:"block rounded-lg border-2 border-teal-500 bg-white px-4 py-3 text-center font-semibold text-teal-700 transition-all hover:bg-teal-50 hover:shadow-md dark:bg-slate-800 dark:text-teal-300 dark:hover:bg-teal-900/30",children:"$250"})]}),p.jsxs("a",{href:le.custom,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full rounded-lg border-2 border-dashed border-teal-400 bg-white px-4 py-3 text-center font-semibold text-teal-700 transition-all hover:bg-teal-50 hover:border-solid hover:shadow-md dark:bg-slate-800 dark:text-teal-300 dark:hover:bg-teal-900/30",children:[p.jsx($,{className:"h-4 w-4"}),p.jsx("span",{children:"Custom Amount"})]})]}),p.jsxs("div",{className:"space-y-4 rounded-xl bg-gradient-to-br from-amber-50 to-orange-50 p-6 dark:from-slate-900/50 dark:to-slate-900/50",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(D,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"}),p.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-100",children:"Become a Monthly Supporter"})]}),p.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Recurring donations help us plan ahead and provide consistent support to families"}),p.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[p.jsxs("a",{href:ne[10],target:"_blank",rel:"noopener noreferrer",className:"block rounded-lg border-2 border-amber-500 bg-white px-3 py-3 text-center font-semibold text-amber-700 transition-all hover:bg-amber-50 hover:shadow-md dark:bg-slate-800 dark:text-amber-300 dark:hover:bg-amber-900/30",children:[p.jsx("div",{className:"text-lg",children:"$10"}),p.jsx("div",{className:"text-xs font-normal",children:"per month"})]}),p.jsxs("a",{href:ne[25],target:"_blank",rel:"noopener noreferrer",className:"block rounded-lg border-2 border-amber-500 bg-white px-3 py-3 text-center font-semibold text-amber-700 transition-all hover:bg-amber-50 hover:shadow-md dark:bg-slate-800 dark:text-amber-300 dark:hover:bg-amber-900/30",children:[p.jsx("div",{className:"text-lg",children:"$25"}),p.jsx("div",{className:"text-xs font-normal",children:"per month"})]}),p.jsxs("a",{href:ne[50],target:"_blank",rel:"noopener noreferrer",className:"block rounded-lg border-2 border-amber-500 bg-white px-3 py-3 text-center font-semibold text-amber-700 transition-all hover:bg-amber-50 hover:shadow-md dark:bg-slate-800 dark:text-amber-300 dark:hover:bg-amber-900/30",children:[p.jsx("div",{className:"text-lg",children:"$50"}),p.jsx("div",{className:"text-xs font-normal",children:"per month"})]}),p.jsxs("a",{href:ne[100],target:"_blank",rel:"noopener noreferrer",className:"block rounded-lg border-2 border-amber-500 bg-white px-3 py-3 text-center font-semibold text-amber-700 transition-all hover:bg-amber-50 hover:shadow-md dark:bg-slate-800 dark:text-amber-300 dark:hover:bg-amber-900/30",children:[p.jsx("div",{className:"text-lg",children:"$100"}),p.jsx("div",{className:"text-xs font-normal",children:"per month"})]})]})]}),p.jsx("p",{className:"text-center text-xs text-slate-500 dark:text-slate-500",children:"≡ƒöÆ Secure payment processing powered by Stripe ΓÇó All donations support Florida families"}),p.jsx("div",{className:"pt-4 text-center",children:p.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-500",children:["Questions about donations? ",p.jsx("button",{type:"button",onClick:s,className:"font-medium text-teal-600 underline-offset-2 transition hover:underline dark:text-teal-400",children:"Contact us"})]})})]})]})})},de="/assets/logo-rainbow-small-CRCWq9cN.png",ce=({currentPage:t,onNavigate:s})=>{const[a,r]=e.useState(!1),[i,l]=e.useState(!1),{darkMode:n,lowSensoryMode:o,toggleDarkMode:d,toggleLowSensoryMode:c}=y(),h=[{id:"home",label:"Home"},{id:"providers",label:"Find Providers"},{id:"churches",label:"Faith-Based Support"},{id:"resources",label:"Resources"},{id:"about",label:"About"},{id:"contact",label:"Contact"}];return p.jsxs("header",{className:"sticky top-0 z-40 bg-white/98 dark:bg-slate-900/95 backdrop-blur-sm border-b border-blue-100/50 dark:border-slate-800 shadow-sm",children:[p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"flex items-center justify-between h-16",children:[p.jsxs("button",{onClick:()=>s("home"),className:"flex items-center space-x-2 group transition-colors","aria-label":"Go to homepage",children:[p.jsx("img",{src:de,alt:"Florida Autism Services - connecting families to autism services",className:"h-[50px] max-h-[50px] w-auto object-contain transition-transform duration-200 group-hover:scale-105"}),p.jsxs("div",{className:"hidden sm:flex flex-col items-start",children:[p.jsx("span",{className:"text-lg font-semibold leading-tight text-slate-800 dark:text-slate-100",children:"Florida Autism Services"}),p.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400 leading-tight",children:"Connecting families to support"})]})]}),p.jsx("nav",{className:"hidden md:flex items-center space-x-1",children:h.map(e=>p.jsx("button",{onClick:()=>s(e.id),className:"px-3 py-2 rounded-md text-sm font-medium transition-colors "+(t===e.id?"bg-teal-100/60 dark:bg-teal-900/30 text-teal-700 dark:text-teal-300":"text-slate-600 dark:text-slate-300 hover:bg-blue-50/50 dark:hover:bg-slate-800"),children:e.label},e.id))}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsxs("button",{onClick:()=>l(!0),className:"hidden md:flex items-center space-x-1.5 px-4 py-2 bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-white text-sm font-semibold rounded-lg transition-all duration-200 shadow-sm hover:shadow-md","aria-label":"Support our mission",children:[p.jsx(D,{className:"w-4 h-4"}),p.jsx("span",{children:"Support"})]}),p.jsx("button",{onClick:d,className:"p-2 rounded-lg hover:bg-blue-50/50 dark:hover:bg-slate-800 transition-colors","aria-label":n?"Switch to light mode":"Switch to dark mode",children:n?p.jsx(X,{className:"w-5 h-5"}):p.jsx(G,{className:"w-5 h-5"})}),p.jsx("button",{onClick:c,className:"p-2 rounded-lg hover:bg-blue-50/50 dark:hover:bg-slate-800 transition-colors","aria-label":o?"Disable low sensory mode":"Enable low sensory mode",children:o?p.jsx(ae,{className:"w-5 h-5"}):p.jsx(re,{className:"w-5 h-5"})}),p.jsx("button",{onClick:()=>r(!a),className:"md:hidden p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors","aria-label":"Toggle menu",children:a?p.jsx(ie,{className:"w-6 h-6"}):p.jsx(Y,{className:"w-6 h-6"})})]})]})}),a&&p.jsx("div",{className:"md:hidden border-t border-blue-100/50 dark:border-slate-800 bg-white dark:bg-slate-900",children:p.jsxs("nav",{className:"px-4 py-3 space-y-1",children:[h.map(e=>p.jsx("button",{onClick:()=>{s(e.id),r(!1)},className:"block w-full text-left px-3 py-2 rounded-md text-base font-medium transition-colors "+(t===e.id?"bg-teal-100/60 dark:bg-teal-900/30 text-teal-700 dark:text-teal-300":"text-slate-600 dark:text-slate-300 hover:bg-blue-50/50 dark:hover:bg-slate-800"),children:e.label},e.id)),p.jsxs("button",{onClick:()=>{l(!0),r(!1)},className:"flex items-center justify-center space-x-2 w-full px-4 py-3 mt-2 bg-gradient-to-r from-amber-500 to-amber-600 text-white font-semibold rounded-lg",children:[p.jsx(D,{className:"w-4 h-4"}),p.jsx("span",{children:"Support Our Mission"})]})]})}),p.jsx(oe,{isOpen:i,onClose:()=>l(!1)})]})},he=({onNavigate:t})=>{const s=(new Date).getFullYear(),[a,r]=e.useState(!1);return p.jsxs("footer",{className:"bg-gradient-to-br from-blue-50/20 to-teal-50/20 dark:bg-slate-900 border-t border-blue-100/50 dark:border-slate-800 mt-16",children:[p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx("img",{src:de,alt:"Florida Autism Services - connecting families to autism services",className:"h-[45px] max-h-[45px] w-auto object-contain"}),p.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-100",children:"Florida Autism Services"})]}),p.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Connecting families to autism services and support across Florida."})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-100 mb-3",children:"Quick Links"}),p.jsxs("ul",{className:"space-y-2 text-sm",children:[p.jsx("li",{children:p.jsx("button",{onClick:()=>t("home"),className:"text-slate-600 dark:text-slate-400 hover:text-teal-600 dark:hover:text-teal-400 transition-colors",children:"Home"})}),p.jsx("li",{children:p.jsx("button",{onClick:()=>t("providers"),className:"text-slate-600 dark:text-slate-400 hover:text-teal-600 dark:hover:text-teal-400 transition-colors",children:"Find Providers"})}),p.jsx("li",{children:p.jsx("button",{onClick:()=>t("churches"),className:"text-slate-600 dark:text-slate-400 hover:text-teal-600 dark:hover:text-teal-400 transition-colors",children:"Faith-Based Support"})}),p.jsx("li",{children:p.jsx("button",{onClick:()=>t("resources"),className:"text-slate-600 dark:text-slate-400 hover:text-teal-600 dark:hover:text-teal-400 transition-colors",children:"Resources"})})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-100 mb-3",children:"Get Involved"}),p.jsxs("ul",{className:"space-y-2 text-sm",children:[p.jsx("li",{children:p.jsx("button",{onClick:()=>t("submit"),className:"text-slate-600 dark:text-slate-400 hover:text-teal-600 dark:hover:text-teal-400 transition-colors",children:"Submit a Provider"})}),p.jsx("li",{children:p.jsx("button",{onClick:()=>t("contact"),className:"text-slate-600 dark:text-slate-400 hover:text-teal-600 dark:hover:text-teal-400 transition-colors",children:"Contact Us"})}),p.jsx("li",{children:p.jsxs("button",{onClick:()=>r(!0),className:"text-amber-600 dark:text-amber-400 hover:text-amber-700 dark:hover:text-amber-300 font-medium transition-colors flex items-center space-x-1",children:[p.jsx(D,{className:"w-4 h-4"}),p.jsx("span",{children:"Support Us"})]})}),p.jsx("li",{children:p.jsx("button",{onClick:()=>t("about"),className:"text-slate-600 dark:text-slate-400 hover:text-teal-600 dark:hover:text-teal-400 transition-colors",children:"About Us"})})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-100 mb-3",children:"Contact"}),p.jsxs("ul",{className:"space-y-2 text-sm text-slate-600 dark:text-slate-400",children:[p.jsxs("li",{className:"flex items-center space-x-2",children:[p.jsx(U,{className:"w-4 h-4"}),p.jsx("span",{children:"floridaautismservices@gmail.com"})]}),p.jsxs("li",{className:"flex items-center space-x-2",children:[p.jsx(K,{className:"w-4 h-4"}),p.jsx("span",{children:"(321) 300-3447"})]}),p.jsxs("li",{className:"flex items-center space-x-2",children:[p.jsx(z,{className:"w-4 h-4"}),p.jsx("span",{children:"Serving all of Florida"})]})]})]})]}),p.jsxs("div",{className:"mt-8 pt-8 border-t border-blue-100/50 dark:border-slate-800",children:[p.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center text-sm text-slate-600 dark:text-slate-400 space-y-2 md:space-y-0",children:[p.jsxs("p",{children:["┬⌐ ",s," Florida Autism Services. All rights reserved."]}),p.jsxs("div",{className:"flex space-x-4",children:[p.jsx("button",{className:"hover:text-teal-600 dark:hover:text-teal-400 transition-colors",children:"Privacy Policy"}),p.jsx("button",{className:"hover:text-teal-600 dark:hover:text-teal-400 transition-colors",children:"Terms of Service"}),p.jsx("button",{className:"hover:text-teal-600 dark:hover:text-teal-400 transition-colors",children:"Accessibility"})]})]}),p.jsx("p",{className:"mt-4 text-xs text-slate-500 dark:text-slate-500 text-center",children:"Disclaimer: This directory is provided for informational purposes. All listings are reviewed but not endorsed. Please verify credentials and services independently."})]})]}),p.jsx(oe,{isOpen:a,onClose:()=>r(!1)})]})},ue=({content:t,children:s,position:a="top"})=>{const[r,i]=e.useState(!1),{lowSensoryMode:l}=y();return p.jsxs("div",{className:"relative inline-flex items-center",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),onFocus:()=>i(!0),onBlur:()=>i(!1),tabIndex:0,role:"tooltip","aria-label":t,children:[s||p.jsx(W,{className:"w-4 h-4 text-teal-600 dark:text-teal-400 cursor-help"}),r&&p.jsx("div",{className:`absolute z-50 ${{top:"bottom-full left-1/2 -translate-x-1/2 mb-2",bottom:"top-full left-1/2 -translate-x-1/2 mt-2",left:"right-full top-1/2 -translate-y-1/2 mr-2",right:"left-full top-1/2 -translate-y-1/2 ml-2"}[a]} pointer-events-none ${l?"":"animate-fadeIn"}`,children:p.jsxs("div",{className:"bg-slate-800 dark:bg-slate-700 text-white text-sm rounded-lg px-3 py-2 shadow-lg max-w-xs whitespace-normal",children:[t,p.jsx("div",{className:`absolute w-0 h-0 border-4 border-slate-800 dark:border-slate-700 ${{top:"top-full left-1/2 -translate-x-1/2 border-l-transparent border-r-transparent border-b-transparent",bottom:"bottom-full left-1/2 -translate-x-1/2 border-l-transparent border-r-transparent border-t-transparent",left:"left-full top-1/2 -translate-y-1/2 border-t-transparent border-b-transparent border-r-transparent",right:"right-full top-1/2 -translate-y-1/2 border-t-transparent border-b-transparent border-l-transparent"}[a]}`})]})})]})},me=({onNavigate:t})=>{const[s,a]=e.useState(""),{lowSensoryMode:r}=y(),i=[{icon:S,title:"ABA Therapy",description:"Applied Behavior Analysis providers and services",color:"bg-teal-100/70 dark:bg-teal-900/20 text-teal-700 dark:text-teal-400",hoverInfo:"Find licensed ABA therapists and behavioral intervention specialists",searchQuery:"service=aba",page:"providers"},{icon:q,title:"Speech Therapy",description:"Speech-language pathologists and communication support",color:"bg-green-100/70 dark:bg-green-900/20 text-green-700 dark:text-green-400",hoverInfo:"Speech and language therapy specialists for autism",searchQuery:"service=speech",page:"providers"},{icon:k,title:"Occupational Therapy",description:"OT services for sensory and motor skill development",color:"bg-rose-100/60 dark:bg-rose-900/20 text-rose-700 dark:text-rose-400",hoverInfo:"Occupational therapists specializing in autism support",searchQuery:"service=ot",page:"providers"},{icon:B,title:"Physical Therapy",description:"PT services for mobility, balance, and strength",color:"bg-blue-100/70 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400",hoverInfo:"Physical therapists experienced with sensory and motor needs",searchQuery:"service=pt",page:"providers"},{icon:T,title:"Faith-Based Support",description:"Autism-friendly churches and religious organizations",color:"bg-sky-100/70 dark:bg-blue-900/20 text-sky-700 dark:text-blue-400",hoverInfo:"Find welcoming faith communities with sensory-friendly services",searchQuery:"",page:"churches"},{icon:D,title:"Respite Care",description:"Temporary relief care for families and caregivers",color:"bg-amber-100/70 dark:bg-amber-900/20 text-amber-700 dark:text-amber-400",hoverInfo:"Respite care services to support families",searchQuery:"service=respite",page:"providers"},{icon:H,title:"Residential Supports",description:"Group homes, supported living, and housing resources",color:"bg-orange-100/70 dark:bg-orange-900/20 text-orange-700 dark:text-orange-400",hoverInfo:"Residential programs tailored for autistic children and adults",searchQuery:"service=residential",page:"providers"},{icon:se,title:"Life Skills",description:"Daily living and social skills development programs",color:"bg-violet-100/60 dark:bg-violet-900/20 text-violet-700 dark:text-violet-400",hoverInfo:"Programs to build independence and social confidence",searchQuery:"service=life_skills",page:"providers"},{icon:V,title:"Pet Therapy",description:"Animal-assisted therapy and emotional support programs",color:"bg-lime-100/70 dark:bg-lime-900/20 text-lime-700 dark:text-lime-400",hoverInfo:"Therapeutic programs featuring service animals and equine therapy",searchQuery:"service=pet_therapy",page:"providers"}];return p.jsxs("div",{className:"space-y-16",children:[p.jsxs("section",{className:"relative w-full overflow-hidden rounded-3xl shadow-sm",style:{backgroundImage:"url(/assets/rainbow-ribbon-hero-CJS5RKZR.jpg)",backgroundSize:"100% auto",backgroundPosition:"center center",backgroundRepeat:"no-repeat",minHeight:"400px"},children:[p.jsx("div",{className:"absolute inset-0 bg-slate-900/35","aria-hidden":"true"}),p.jsx("div",{className:"relative z-10 p-8 md:p-16",children:p.jsxs("div",{className:"max-w-3xl mx-auto text-center space-y-6",children:[p.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white",children:"Connecting Families to Autism Services Across Florida"}),p.jsx("p",{className:"text-lg text-white/90",children:"A trusted directory of verified providers, resources, and support for individuals with autism and their families."}),p.jsx("form",{onSubmit:e=>{e.preventDefault(),t("providers",s)},className:"mt-8",children:p.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 max-w-2xl mx-auto",children:[p.jsxs("div",{className:"flex-1 relative",children:[p.jsx(Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),p.jsx("input",{type:"text",value:s,onChange:e=>a(e.target.value),placeholder:"Search by city, ZIP code, or service type...",className:"w-full pl-12 pr-4 py-4 rounded-xl border-2 border-blue-200/60 bg-white text-slate-800 placeholder-slate-500 focus:border-teal-500 focus:outline-none focus:ring-2 focus:ring-teal-500/20","aria-label":"Search for providers"})]}),p.jsx("button",{type:"submit",className:"px-8 py-4 bg-teal-500 hover:bg-teal-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all",children:"Find Providers"})]})})]})})]}),p.jsxs("section",{children:[p.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 text-center mb-12",children:"Browse by Category"}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(e=>p.jsxs("button",{onClick:()=>t(e.page,e.searchQuery),className:"group relative text-left p-6 rounded-2xl border border-blue-100 dark:border-slate-700 bg-white/80 dark:bg-slate-800 hover:border-teal-300 dark:hover:border-teal-600 hover:bg-white "+(r?"":"transition-all duration-200 hover:shadow-lg hover:-translate-y-1"),children:[p.jsxs("div",{className:"flex items-start justify-between mb-4",children:[p.jsx("div",{className:`p-3 rounded-xl ${e.color}`,children:p.jsx(e.icon,{className:"w-6 h-6"})}),p.jsx(ue,{content:e.hoverInfo,position:"left"})]}),p.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100 mb-2",children:e.title}),p.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:e.description})]},e.title))})]}),p.jsxs("section",{className:"bg-gradient-to-br from-blue-50/30 to-teal-50/30 dark:bg-slate-800/50 rounded-3xl p-8 md:p-12",children:[p.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 text-center mb-4",children:"Why Florida Autism Services?"}),p.jsx("p",{className:"text-center text-slate-600 dark:text-slate-400 mb-12 max-w-2xl mx-auto",children:"We carefully vet and verify each provider to ensure families can trust the information they find."}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[p.jsxs("div",{className:"text-center space-y-3",children:[p.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-teal-200/60 dark:bg-teal-900/30 rounded-2xl",children:p.jsx(E,{className:"w-8 h-8 text-teal-600 dark:text-teal-400"})}),p.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100",children:"Verified Listings"}),p.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Every provider is reviewed and verified before being listed in our directory."})]}),p.jsxs("div",{className:"text-center space-y-3",children:[p.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-200/60 dark:bg-green-900/30 rounded-2xl",children:p.jsx(se,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),p.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100",children:"Family Reviews"}),p.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Read authentic reviews from families who have used these services."})]}),p.jsxs("div",{className:"text-center space-y-3",children:[p.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-sky-200/60 dark:bg-blue-900/30 rounded-2xl",children:p.jsx(Q,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),p.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100",children:"Always Free"}),p.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Our directory is completely free for families to use. No hidden fees or subscriptions."})]})]})]}),p.jsxs("section",{className:"text-center space-y-6",children:[p.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100",children:"Ready to Get Started?"}),p.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400 max-w-2xl mx-auto",children:"Join thousands of families across Florida who have found the support they need through our directory."}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[p.jsx("button",{onClick:()=>t("providers"),className:"px-8 py-4 bg-teal-600 hover:bg-teal-700 dark:bg-teal-500 dark:hover:bg-teal-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all",children:"Browse Providers"}),p.jsx("button",{onClick:()=>t("resources"),className:"px-8 py-4 bg-white hover:bg-blue-50/50 dark:bg-slate-800 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-100 font-semibold rounded-xl border border-blue-200 dark:border-slate-700 transition-all",children:"View Resources"})]})]})]})},xe=r("https://twcofgyxiitfvoedftik.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR3Y29mZ3l4aWl0ZnZvZWRmdGlrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAxNzAyNzUsImV4cCI6MjA3NTc0NjI3NX0.pkxp6DBSgQykenv2UZIILZhUY9P6xp-lBNs6Z8NNmdI"),pe=r("https://twcofgyxiitfvoedftik.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR3Y29mZ3l4aWl0ZnZvZWRmdGlrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAxNzAyNzUsImV4cCI6MjA3NTc0NjI3NX0.pkxp6DBSgQykenv2UZIILZhUY9P6xp-lBNs6Z8NNmdI");var ge={exports:{}};
src\frontend\dist\assets\index-521__UTy.js:*/const be=a(ge.exports=function e(){var t,s="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==s?s:{},a=!s.document&&!!s.postMessage,r=s.IS_PAPA_WORKER||!1,i={},l=0,n={};function o(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=y(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new m(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,t){var a=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<a){let t=this._config.newline;t||(i=this._config.quoteChar||'"',t=this._handle.guessLineEndings(e,i)),e=[...e.split(t).slice(a)].join(t)}this.isFirstChunk&&j(this._config.beforeFirstChunk)&&void 0!==(i=this._config.beforeFirstChunk(e))&&(e=i),this.isFirstChunk=!1,this._halted=!1,a=this._partialLine+e;var i=(this._partialLine="",this._handle.parse(a,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(e=i.meta.cursor,this._finished||(this._partialLine=a.substring(e-this._baseIndex),this._baseIndex=e),i&&i.data&&(this._rowCount+=i.data.length),a=this._finished||this._config.preview&&this._rowCount>=this._config.preview,r)s.postMessage({results:i,workerId:n.WORKER_ID,finished:a});else if(j(this._config.chunk)&&!t){if(this._config.chunk(i,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=i=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(i.data),this._completeResults.errors=this._completeResults.errors.concat(i.errors),this._completeResults.meta=i.meta),this._completed||!a||!j(this._config.complete)||i&&i.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),a||i&&i.meta.paused||this._nextChunk(),i}this._halted=!0},this._sendError=function(e){j(this._config.error)?this._config.error(e):r&&this._config.error&&s.postMessage({workerId:n.WORKER_ID,error:e,finished:!1})}}function d(e){var t;(e=e||{}).chunkSize||(e.chunkSize=n.RemoteChunkSize),o.call(this,e),this._nextChunk=a?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),a||(t.onload=v(this._chunkLoaded,this),t.onerror=v(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!a),this._config.downloadRequestHeaders){var e,s=this._config.downloadRequestHeaders;for(e in s)t.setRequestHeader(e,s[e])}var r;this._config.chunkSize&&(r=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+r));try{t.send(this._config.downloadRequestBody)}catch(i){this._chunkError(i.message)}a&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){var e;4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(null!==(e=(e=t).getResponseHeader("Content-Range"))?parseInt(e.substring(e.lastIndexOf("/")+1)):-1),this.parseChunk(t.responseText)))},this._chunkError=function(e){e=t.statusText||e,this._sendError(new Error(e))}}function c(e){(e=e||{}).chunkSize||(e.chunkSize=n.LocalChunkSize),o.call(this,e);var t,s,a="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,s=e.slice||e.webkitSlice||e.mozSlice,a?((t=new FileReader).onload=v(this._chunkLoaded,this),t.onerror=v(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input,r=(this._config.chunkSize&&(r=Math.min(this._start+this._config.chunkSize,this._input.size),e=s.call(e,this._start,r)),t.readAsText(e,this._config.encoding));a||this._chunkLoaded({target:{result:r}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function h(e){var t;o.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){var e,s;if(!this._finished)return e=this._config.chunkSize,t=e?(s=t.substring(0,e),t.substring(e)):(s=t,""),this._finished=!t,this.parseChunk(s)}}function u(e){o.call(this,e=e||{});var t=[],s=!0,a=!1;this.pause=function(){o.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){o.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){a&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):s=!0},this._streamData=v(function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),s&&(s=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(a){this._streamError(a)}},this),this._streamError=v(function(e){this._streamCleanUp(),this._sendError(e)},this),this._streamEnd=v(function(){this._streamCleanUp(),a=!0,this._streamData("")},this),this._streamCleanUp=v(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function m(e){var t,s,a,r,i=Math.pow(2,53),l=-i,o=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,d=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,c=this,h=0,u=0,m=!1,g=!1,b=[],f={data:[],errors:[],meta:{}};function v(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function k(){if(f&&a&&(w("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+n.DefaultDelimiter+"'"),a=!1),e.skipEmptyLines&&(f.data=f.data.filter(function(e){return!v(e)})),N()){let s=function(t,s){j(e.transformHeader)&&(t=e.transformHeader(t,s)),b.push(t)};if(f)if(Array.isArray(f.data[0])){for(var t=0;N()&&t<f.data.length;t++)f.data[t].forEach(s);f.data.splice(0,1)}else f.data.forEach(s)}function s(t,s){for(var a=e.header?{}:[],r=0;r<t.length;r++){var n=r,c=t[r];c=((t,s)=>{return a=t,e.dynamicTypingFunction&&void 0===e.dynamicTyping[a]&&(e.dynamicTyping[a]=e.dynamicTypingFunction(a)),!0===(e.dynamicTyping[a]||e.dynamicTyping)?"true"===s||"TRUE"===s||"false"!==s&&"FALSE"!==s&&((e=>{if(o.test(e)&&(e=parseFloat(e),l<e&&e<i))return 1})(s)?parseFloat(s):d.test(s)?new Date(s):""===s?null:s):s;var a})(n=e.header?r>=b.length?"__parsed_extra":b[r]:n,c=e.transform?e.transform(c,n):c),"__parsed_extra"===n?(a[n]=a[n]||[],a[n].push(c)):a[n]=c}return e.header&&(r>b.length?w("FieldMismatch","TooManyFields","Too many fields: expected "+b.length+" fields but parsed "+r,u+s):r<b.length&&w("FieldMismatch","TooFewFields","Too few fields: expected "+b.length+" fields but parsed "+r,u+s)),a}var r;f&&(e.header||e.dynamicTyping||e.transform)&&(r=1,!f.data.length||Array.isArray(f.data[0])?(f.data=f.data.map(s),r=f.data.length):f.data=s(f.data,0),e.header&&f.meta&&(f.meta.fields=b),u+=r)}function N(){return e.header&&0===b.length}function w(e,t,s,a){e={type:e,code:t,message:s},void 0!==a&&(e.row=a),f.errors.push(e)}j(e.step)&&(r=e.step,e.step=function(t){f=t,N()?k():(k(),0!==f.data.length&&(h+=t.data.length,e.preview&&h>e.preview?s.abort():(f.data=f.data[0],r(f,c))))}),this.parse=function(r,i,l){var o=e.quoteChar||'"';return e.newline||(e.newline=this.guessLineEndings(r,o)),a=!1,e.delimiter?j(e.delimiter)&&(e.delimiter=e.delimiter(r),f.meta.delimiter=e.delimiter):((o=((t,s,a,r,i)=>{var l,o,d,c;i=i||[",","\t","|",";",n.RECORD_SEP,n.UNIT_SEP];for(var h=0;h<i.length;h++){for(var u,m=i[h],x=0,g=0,b=0,f=(d=void 0,new p({comments:r,delimiter:m,newline:s,preview:10}).parse(t)),y=0;y<f.data.length;y++)a&&v(f.data[y])?b++:(g+=u=f.data[y].length,void 0===d?d=u:0<u&&(x+=Math.abs(u-d),d=u));0<f.data.length&&(g/=f.data.length-b),(void 0===o||x<=o)&&(void 0===c||c<g)&&1.99<g&&(o=x,l=m,c=g)}return{successful:!!(e.delimiter=l),bestDelimiter:l}})(r,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=o.bestDelimiter:(a=!0,e.delimiter=n.DefaultDelimiter),f.meta.delimiter=e.delimiter),o=y(e),e.preview&&e.header&&o.preview++,t=r,s=new p(o),f=s.parse(t,i,l),k(),m?{meta:{paused:!0}}:f||{meta:{paused:!1}}},this.paused=function(){return m},this.pause=function(){m=!0,s.abort(),t=j(e.chunk)?"":t.substring(s.getCharIndex())},this.resume=function(){c.streamer._halted?(m=!1,c.streamer.parseChunk(t,!0)):setTimeout(c.resume,3)},this.aborted=function(){return g},this.abort=function(){g=!0,s.abort(),f.meta.aborted=!0,j(e.complete)&&e.complete(f),t=""},this.guessLineEndings=function(e,t){e=e.substring(0,1048576),t=new RegExp(x(t)+"([^]*?)"+x(t),"gm");var s=(e=e.replace(t,"")).split("\r");if(e=1<(t=e.split("\n")).length&&t[0].length<s[0].length,1===s.length||e)return"\n";for(var a=0,r=0;r<s.length;r++)"\n"===s[r][0]&&a++;return a>=s.length/2?"\r\n":"\r"}}function x(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function p(e){var t=(e=e||{}).delimiter,s=e.newline,a=e.comments,r=e.step,i=e.preview,l=e.fastMode,o=null,d=!1,c=null==e.quoteChar?'"':e.quoteChar,h=c;if(void 0!==e.escapeChar&&(h=e.escapeChar),("string"!=typeof t||-1<n.BAD_DELIMITERS.indexOf(t))&&(t=","),a===t)throw new Error("Comment character same as delimiter");!0===a?a="#":("string"!=typeof a||-1<n.BAD_DELIMITERS.indexOf(a))&&(a=!1),"\n"!==s&&"\r"!==s&&"\r\n"!==s&&(s="\n");var u=0,m=!1;this.parse=function(n,p,g){if("string"!=typeof n)throw new Error("Input must be a string");var b=n.length,f=t.length,y=s.length,v=a.length,k=j(r),N=[],w=[],A=[],S=u=0;if(!n)return B();if(l||!1!==l&&-1===n.indexOf(c)){for(var C=n.split(s),E=0;E<C.length;E++){if(A=C[E],u+=A.length,E!==C.length-1)u+=s.length;else if(g)return B();if(!a||A.substring(0,v)!==a){if(k){if(N=[],O(A.split(t)),D(),m)return B()}else O(A.split(t));if(i&&i<=E)return N=N.slice(0,i),B(!0)}}return B()}for(var _=n.indexOf(t,u),R=n.indexOf(s,u),T=new RegExp(x(h)+x(c),"g"),I=n.indexOf(c,u);;)if(n[u]===c)for(I=u,u++;;){if(-1===(I=n.indexOf(c,I+1)))return g||w.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:N.length,index:u}),F();if(I===b-1)return F(n.substring(u,I).replace(T,c));if(c===h&&n[I+1]===h)I++;else if(c===h||0===I||n[I-1]!==h){-1!==_&&_<I+1&&(_=n.indexOf(t,I+1));var L=M(-1===(R=-1!==R&&R<I+1?n.indexOf(s,I+1):R)?_:Math.min(_,R));if(n.substr(I+1+L,f)===t){A.push(n.substring(u,I).replace(T,c)),n[u=I+1+L+f]!==c&&(I=n.indexOf(c,u)),_=n.indexOf(t,u),R=n.indexOf(s,u);break}if(L=M(R),n.substring(I+1+L,I+1+L+y)===s){if(A.push(n.substring(u,I).replace(T,c)),P(I+1+L+y),_=n.indexOf(t,u),I=n.indexOf(c,u),k&&(D(),m))return B();if(i&&N.length>=i)return B(!0);break}w.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:N.length,index:u}),I++}}else if(a&&0===A.length&&n.substring(u,u+v)===a){if(-1===R)return B();u=R+y,R=n.indexOf(s,u),_=n.indexOf(t,u)}else if(-1!==_&&(_<R||-1===R))A.push(n.substring(u,_)),u=_+f,_=n.indexOf(t,u);else{if(-1===R)break;if(A.push(n.substring(u,R)),P(R+y),k&&(D(),m))return B();if(i&&N.length>=i)return B(!0)}return F();function O(e){N.push(e),S=u}function M(e){var t=0;return-1!==e&&(e=n.substring(I+1,e))&&""===e.trim()?e.length:t}function F(e){return g||(void 0===e&&(e=n.substring(u)),A.push(e),u=b,O(A),k&&D()),B()}function P(e){u=e,O(A),A=[],R=n.indexOf(s,u)}function B(a){if(e.header&&!p&&N.length&&!d){var r=N[0],i=Object.create(null),l=new Set(r);let t=!1;for(let s=0;s<r.length;s++){let a=r[s];if(i[a=j(e.transformHeader)?e.transformHeader(a,s):a]){let e,n=i[a];for(;e=a+"_"+n,n++,l.has(e););l.add(e),r[s]=e,i[a]++,t=!0,(o=null===o?{}:o)[e]=a}else i[a]=1,r[s]=a;l.add(a)}t&&console.warn("Duplicate headers found and renamed."),d=!0}return{data:N,errors:w,meta:{delimiter:t,linebreak:s,aborted:m,truncated:!!a,cursor:S+(p||0),renamedHeaders:o}}}function D(){r(B()),N=[],w=[]}},this.abort=function(){m=!0},this.getCharIndex=function(){return u}}function g(e){var t=e.data,s=i[t.workerId],a=!1;if(t.error)s.userError(t.error,t.file);else if(t.results&&t.results.data){var r={abort:function(){a=!0,b(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:f,resume:f};if(j(s.userStep)){for(var l=0;l<t.results.data.length&&(s.userStep({data:t.results.data[l],errors:t.results.errors,meta:t.results.meta},r),!a);l++);delete t.results}else j(s.userChunk)&&(s.userChunk(t.results,r,t.file),delete t.results)}t.finished&&!a&&b(t.workerId,t.results)}function b(e,t){var s=i[e];j(s.userComplete)&&s.userComplete(t),s.terminate(),delete i[e]}function f(){throw new Error("Not implemented.")}function y(e){if("object"!=typeof e||null===e)return e;var t,s=Array.isArray(e)?[]:{};for(t in e)s[t]=y(e[t]);return s}function v(e,t){return function(){e.apply(t,arguments)}}function j(e){return"function"==typeof e}return n.parse=function(t,a){var r,o=(a=a||{}).dynamicTyping||!1;if(j(o)&&(a.dynamicTypingFunction=o,o={}),a.dynamicTyping=o,a.transform=!!j(a.transform)&&a.transform,!a.worker||!n.WORKERS_SUPPORTED)return o=null,n.NODE_STREAM_INPUT,"string"==typeof t?(t=65279!==(r=t).charCodeAt(0)?r:r.slice(1),o=new(a.download?d:h)(a)):!0===t.readable&&j(t.read)&&j(t.on)?o=new u(a):(s.File&&t instanceof File||t instanceof Object)&&(o=new c(a)),o.stream(t);(o=(()=>{var t,a,r;return!!n.WORKERS_SUPPORTED&&(a=s.URL||s.webkitURL||null,r=e.toString(),t=n.BLOB_URL||(n.BLOB_URL=a.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",r,")();"],{type:"text/javascript"}))),(t=new s.Worker(t)).onmessage=g,t.id=l++,i[t.id]=t)})()).userStep=a.step,o.userChunk=a.chunk,o.userComplete=a.complete,o.userError=a.error,a.step=j(a.step),a.chunk=j(a.chunk),a.complete=j(a.complete),a.error=j(a.error),delete a.worker,o.postMessage({input:t,config:a,workerId:o.id})},n.unparse=function(e,t){var s=!1,a=!0,r=",",i="\r\n",l='"',o=l+l,d=!1,c=null,h=!1,u=((()=>{if("object"==typeof t){if("string"!=typeof t.delimiter||n.BAD_DELIMITERS.filter(function(e){return-1!==t.delimiter.indexOf(e)}).length||(r=t.delimiter),"boolean"!=typeof t.quotes&&"function"!=typeof t.quotes&&!Array.isArray(t.quotes)||(s=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(d=t.skipEmptyLines),"string"==typeof t.newline&&(i=t.newline),"string"==typeof t.quoteChar&&(l=t.quoteChar),"boolean"==typeof t.header&&(a=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");c=t.columns}void 0!==t.escapeChar&&(o=t.escapeChar+l),t.escapeFormulae instanceof RegExp?h=t.escapeFormulae:"boolean"==typeof t.escapeFormulae&&t.escapeFormulae&&(h=/^[=+\-@\t\r].*$/)}})(),new RegExp(x(l),"g"));if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return m(null,e,d);if("object"==typeof e[0])return m(c||Object.keys(e[0]),e,d)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||c),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),m(e.fields||[],e.data||[],d);throw new Error("Unable to serialize unrecognized input");function m(e,t,s){var l="",n=("string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t)),Array.isArray(e)&&0<e.length),o=!Array.isArray(t[0]);if(n&&a){for(var d=0;d<e.length;d++)0<d&&(l+=r),l+=p(e[d],d);0<t.length&&(l+=i)}for(var c=0;c<t.length;c++){var h=(n?e:t[c]).length,u=!1,m=n?0===Object.keys(t[c]).length:0===t[c].length;if(s&&!n&&(u="greedy"===s?""===t[c].join("").trim():1===t[c].length&&0===t[c][0].length),"greedy"===s&&n){for(var x=[],g=0;g<h;g++){var b=o?e[g]:g;x.push(t[c][b])}u=""===x.join("").trim()}if(!u){for(var f=0;f<h;f++){0<f&&!m&&(l+=r);var y=n&&o?e[f]:f;l+=p(t[c][y],f)}c<t.length-1&&(!s||0<h&&!m)&&(l+=i)}}return l}function p(e,t){var a,i;return null==e?"":e.constructor===Date?JSON.stringify(e).slice(1,25):(i=!1,h&&"string"==typeof e&&h.test(e)&&(e="'"+e,i=!0),a=e.toString().replace(u,o),(i=i||!0===s||"function"==typeof s&&s(e,t)||Array.isArray(s)&&s[t]||((e,t)=>{for(var s=0;s<t.length;s++)if(-1<e.indexOf(t[s]))return!0;return!1})(a,n.BAD_DELIMITERS)||-1<a.indexOf(r)||" "===a.charAt(0)||" "===a.charAt(a.length-1))?l+a+l:a)}},n.RECORD_SEP=String.fromCharCode(30),n.UNIT_SEP=String.fromCharCode(31),n.BYTE_ORDER_MARK="\ufeff",n.BAD_DELIMITERS=["\r","\n",'"',n.BYTE_ORDER_MARK],n.WORKERS_SUPPORTED=!a&&!!s.Worker,n.NODE_STREAM_INPUT=1,n.LocalChunkSize=10485760,n.RemoteChunkSize=5242880,n.DefaultDelimiter=",",n.Parser=p,n.ParserHandle=m,n.NetworkStreamer=d,n.FileStreamer=c,n.StringStreamer=h,n.ReadableStreamStreamer=u,s.jQuery&&((t=s.jQuery).fn.parse=function(e){var a=e.config||{},r=[];return this.each(function(e){if("INPUT"!==t(this).prop("tagName").toUpperCase()||"file"!==t(this).attr("type").toLowerCase()||!s.FileReader||!this.files||0===this.files.length)return!0;for(var i=0;i<this.files.length;i++)r.push({file:this.files[i],inputElem:this,instanceConfig:t.extend({},a)})}),i(),this;function i(){if(0===r.length)j(e.complete)&&e.complete();else{var s,a,i,o,d=r[0];if(j(e.before)){var c=e.before(d.file,d.inputElem);if("object"==typeof c){if("abort"===c.action)return s="AbortError",a=d.file,i=d.inputElem,o=c.reason,void(j(e.error)&&e.error({name:s},a,i,o));if("skip"===c.action)return void l();"object"==typeof c.config&&(d.instanceConfig=t.extend(d.instanceConfig,c.config))}else if("skip"===c)return void l()}var h=d.instanceConfig.complete;d.instanceConfig.complete=function(e){j(h)&&h(e,d.file,d.inputElem),l()},n.parse(d.file,d.instanceConfig)}}function l(){r.splice(0,1),i()}}),r&&(s.onmessage=function(e){e=e.data,void 0===n.WORKER_ID&&e&&(n.WORKER_ID=e.workerId),"string"==typeof e.input?s.postMessage({workerId:n.WORKER_ID,results:n.parse(e.input,e.config),finished:!0}):(s.File&&e.input instanceof File||e.input instanceof Object)&&(e=n.parse(e.input,e.config))&&s.postMessage({workerId:n.WORKER_ID,results:e,finished:!0})}),(d.prototype=Object.create(o.prototype)).constructor=d,(c.prototype=Object.create(o.prototype)).constructor=c,(h.prototype=Object.create(h.prototype)).constructor=h,(u.prototype=Object.create(o.prototype)).constructor=u,n}());let fe=null,ye=null;function ve(t){const[s,a]=e.useState(fe??{}),[r,i]=e.useState(null);e.useEffect(()=>{if(fe)return;let e=!1;return async function(){return fe||(ye||(ye=fetch("/data/website_photo_map.csv").then(e=>{if(!e.ok)throw new Error(`Failed to load provider photos (${e.status})`);return e.text()}).then(e=>{const t={};return be.parse(e,{header:!0,skipEmptyLines:!0,complete:e=>{(Array.isArray(e.data)?e.data:[]).forEach(e=>{var s,a,r;const i=e,l=null==(s=i.provider_id)?void 0:s.toString().trim(),n=null==(a=i.image_url)?void 0:a.toString().trim(),o=null==(r=i.website)?void 0:r.toString().trim(),d=i.width?Number(i.width):void 0,c=i.height?Number(i.height):void 0;if(!l||!n)return;t[l]||(t[l]=[]);const h=t[l];!h.some(e=>e.imageUrl===n)&&h.length<2&&h.push({imageUrl:n,sourceUrl:o,width:Number.isFinite(d)?d:void 0,height:Number.isFinite(c)?c:void 0})})}}),fe=t,t}).finally(()=>{ye=null})),ye)}().then(t=>{e||a(t)}).catch(t=>{e||(console.error("Failed to load provider photos",t),i(t instanceof Error?t.message:"Failed to load provider photos"))}),()=>{e=!0}},[]);const l=e.useMemo(()=>Array.from(new Set(t.filter(e=>null!=e).map(e=>e.toString()))),[t]);return{photos:e.useMemo(()=>{const e={};return l.forEach(t=>{e[t]=s[t]??[]}),e},[l,s]),error:r}}const je=({rating:e,reviewCount:t,showCount:s=!0,size:a="md",className:r})=>{const i={sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"},l=t>=5?"5+":t.toLocaleString();return p.jsxs("div",{className:`flex items-center gap-2 ${r??""}`,children:[p.jsx("div",{className:"flex items-center gap-0.5",children:(()=>{const t=[],s=Math.floor(e),r=e%1>=.5,l=5-s-(r?1:0);for(let e=0;e<s;e++)t.push(p.jsx("svg",{className:`${i[a]} fill-yellow-400 text-yellow-400`,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},`full-${e}`));r&&t.push(p.jsxs("svg",{className:`${i[a]} text-yellow-400`,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("defs",{children:p.jsxs("linearGradient",{id:"half-fill",children:[p.jsx("stop",{offset:"50%",stopColor:"currentColor"}),p.jsx("stop",{offset:"50%",stopColor:"transparent"})]})}),p.jsx("path",{fill:"url(#half-fill)",d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"}),p.jsx("path",{fill:"none",stroke:"currentColor",strokeWidth:"1",d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})]},"half"));for(let e=0;e<l;e++)t.push(p.jsx("svg",{className:`${i[a]} fill-gray-300 text-gray-300`,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},`empty-${e}`));return t})()}),s&&p.jsxs("span",{className:`${{sm:"text-xs",md:"text-sm",lg:"text-base"}[a]} text-gray-600 font-medium`,children:[e.toFixed(1)," (",l,")"]})]})},ke={"FT MYERS":{latitude:26.6693,longitude:-81.7605},"FORT MYERS":{latitude:26.571817361904763,longitude:-81.86466098095242},NAPLES:{latitude:26.16926666666667,longitude:-81.71965},"CAPE CORAL":{latitude:26.618650242718427,longitude:-81.97155445631074},CLEARWATER:{latitude:27.969600605769223,longitude:-82.7474119134615},LARGO:{latitude:27.896039487179486,longitude:-82.77313174358977},MIAMI:{latitude:25.76700883070866,longitude:-80.27801982283478},"Daytona Beach Shores":{latitude:29.157488,longitude:-80.974874},Maitland:{latitude:28.62590178571428,longitude:-81.36633228571428},"KEY WEST":{latitude:24.5552,longitude:-81.7816},"MIAMI GARDENS":{latitude:25.942529678571436,longitude:-80.23184367857142},"MIAMI LAKES":{latitude:25.903670585365855,longitude:-80.31062892682932},"FORT LAUDERDALE":{latitude:26.120706882352966,longitude:-80.15368349411771},HIALEAH:{latitude:25.890799018867916,longitude:-80.32387301886791},MEDLEY:{latitude:25.8141,longitude:-80.3549},"CUTLER BAY":{latitude:25.58406666666667,longitude:-80.33913333333334},"North Miami":{latitude:25.89391,longitude:-80.16062000000001},"NORTH FORT MYERS":{latitude:26.710301400000002,longitude:-81.88042026666666},APOPKA:{latitude:28.673699999999997,longitude:-81.5012},ROCKLEDGE:{latitude:28.3134,longitude:-80.7319},MELBOURNE:{latitude:28.11073140350878,longitude:-80.64689875438592},DUNEDIN:{latitude:28.02599009090909,longitude:-82.78013281818181},"SPRING HILL":{latitude:28.4691234189189,longitude:-82.5501272567568},ALACHUA:{latitude:29.813499999999994,longitude:-82.472},"MOUNT DORA":{latitude:28.774,longitude:-81.6439},OCALA:{latitude:29.155590909090908,longitude:-82.18725454545455},JACKSONVILLE:{latitude:30.283664334532418,longitude:-81.62245479136685},Tallahassee:{latitude:30.46875706532664,longitude:-84.25020276884409},Lakeland:{latitude:28.020197847133772,longitude:-81.95321406369435},"WINTER HAVEN":{latitude:28.00534,longitude:-81.73472000000001},DORAL:{latitude:25.784480000000002,longitude:-80.33550000000002},RIVERVIEW:{latitude:27.84143529411764,longitude:-82.31699411764706},PENSACOLA:{latitude:30.446144444444446,longitude:-87.2264111111111},HOMELAND:{latitude:27.8178,longitude:-81.8245},LAUDERHILL:{latitude:26.172317260869562,longitude:-80.2318506956522},"NORTH MIAMI BEACH":{latitude:25.938269176470577,longitude:-80.17657476470586},LEESBURG:{latitude:28.828174999999998,longitude:-81.86002500000001},"LAKE WORTH":{latitude:26.60811600000001,longitude:-80.12999200000003},"WEST PALM BEACH":{latitude:26.715734137931044,longitude:-80.09282525862065},"CRYSTAL RIVER":{latitude:28.8547,longitude:-82.6669},"PORT SAINT LUCIE":{latitude:27.3009105263158,longitude:-80.33668421052623},"Pembroke Pines":{latitude:26.008317106382982,longitude:-80.33105770212764},JUPITER:{latitude:26.929476470588234,longitude:-80.13721764705883},WELLINGTON:{latitude:26.653310000000005,longitude:-80.23875},LOXAHATCHEE:{latitude:26.7383,longitude:-80.27599999999998},EUSTIS:{latitude:28.855,longitude:-81.6789},"SAINT PETERSBURG":{latitude:27.803185000000006,longitude:-82.66280250000003},"ST PETERSBURG":{latitude:27.782570833333335,longitude:-82.67059583333334},SEMINOLE:{latitude:27.857470000000006,longitude:-82.79999000000001},TAMPA:{latitude:27.99749763018869,longitude:-82.48303969811329},"WESLEY CHAPEL":{latitude:28.25095,longitude:-82.3138},"TARPON SPRINGS":{latitude:28.1385,longitude:-82.743},"APOLLO BEACH":{latitude:27.771600000000003,longitude:-82.41020000000002},"PALM HARBOR":{latitude:28.081358333333323,longitude:-82.73016666666668},"PINELLAS PARK":{latitude:27.85830000000001,longitude:-82.71076666666666},LITHIA:{latitude:27.829299999999996,longitude:-82.1357},"TREASURE ISLAND":{latitude:27.7456,longitude:-82.7516},"HOBE SOUND":{latitude:27.0813,longitude:-80.1509},"Winter Park":{latitude:28.59837959375,longitude:-81.33095996875001},"FORT PIERCE":{latitude:27.4356,longitude:-80.35315500000003},TAMARAC:{latitude:26.208702562499997,longitude:-80.25731887500001},MIRAMAR:{latitude:25.98996947619049,longitude:-80.26410907142856},HOMESTEAD:{latitude:25.495166666666666,longitude:-80.49176666666666},Orlando:{latitude:28.530197238578694,longitude:-81.368421106599},PLANTATION:{latitude:26.136008749999995,longitude:-80.2602666},"OPA LOCKA":{latitude:25.9097,longitude:-80.247},"Port St. Lucie":{latitude:27.284544324675338,longitude:-80.36577267532466},"CORAL SPRINGS":{latitude:26.274593779661025,longitude:-80.2546517118644},"MIRAMAR, FLORIDA":{latitude:25.9894,longitude:-80.2153},"DAYTONA BEACH":{latitude:29.205550057142855,longitude:-81.0390886},"PLANT CITY":{latitude:28.021055555555556,longitude:-82.13596666666668},"LAND O LAKES":{latitude:28.241200000000003,longitude:-82.48375000000001},RUSKIN:{latitude:27.70315,longitude:-82.42528750000001},BRANDON:{latitude:27.916850000000007,longitude:-82.29003181818179},WIMAUMA:{latitude:27.7015,longitude:-82.3151},"Palm Beach Gardens":{latitude:26.820703772727267,longitude:-80.1321813181818},SEFFNER:{latitude:27.9922,longitude:-82.2863},"NEW PORT RICHEY":{latitude:28.26016842105263,longitude:-82.68297894736841},"TEMPLE TERRACE":{latitude:28.037633333333332,longitude:-82.39006666666667},Weston:{latitude:26.07317254166667,longitude:-80.3764025},LUTZ:{latitude:28.142530000000004,longitude:-82.48033000000001},GIBSONTON:{latitude:27.8411,longitude:-82.3698},"DADE CITY":{latitude:28.3318,longitude:-82.2446},"KENNETH CITY":{latitude:27.8201,longitude:-82.7308},OKEECHOBEE:{latitude:27.4203,longitude:-80.9454},ZEPHYRHILLS:{latitude:28.227420000000002,longitude:-82.178},VALRICO:{latitude:27.920099999999994,longitude:-82.24242857142858},SARASOTA:{latitude:27.378116666666667,longitude:-82.52033333333334},"PORT RICHEY":{latitude:28.3011,longitude:-82.6927},Davie:{latitude:26.065421059999995,longitude:-80.25845830000003},Hollywood:{latitude:26.02328756603772,longitude:-80.22143201886786},"PORT ST JOE":{latitude:29.811899999999998,longitude:-85.303},"LYNN HAVEN":{latitude:30.2362,longitude:-85.6467},MILTON:{latitude:30.607333333333333,longitude:-87.104},QUINCY:{latitude:30.599600000000002,longitude:-84.60484},"FORT WALTON BEACH":{latitude:30.4487,longitude:-86.6255},"Palm Bay":{latitude:28.017422206896576,longitude:-80.62711517241375},MARIANNA:{latitude:30.737250000000003,longitude:-85.22075},"PANAMA CITY":{latitude:30.186325,longitude:-85.666875},BONIFAY:{latitude:30.8464,longitude:-85.69},CHIPLEY:{latitude:30.7107,longitude:-85.5486},Gainesville:{latitude:29.66930186567162,longitude:-82.3719070970149},"Lake Park":{latitude:26.798150500000002,longitude:-80.06014725},"FT WALTON BEACH":{latitude:30.4487,longitude:-86.6255},MADISON:{latitude:30.4802,longitude:-83.4067},STUART:{latitude:27.180700138888906,longitude:-80.23927261111108},SEBRING:{latitude:27.4924,longitude:-81.4357},"LAKE WALES":{latitude:27.8774,longitude:-81.6221},"AVON PARK":{latitude:27.6001,longitude:-81.5015},ARCADIA:{latitude:27.1861,longitude:-81.8667},AUBURNDALE:{latitude:28.0724,longitude:-81.8122},"Holly Hill":{latitude:29.236575636363646,longitude:-81.06455836363638},"HAINES CITY":{latitude:28.114500000000003,longitude:-81.6201},YULEE:{latitude:30.622199999999996,longitude:-81.5906},MACCLENNY:{latitude:30.2737,longitude:-82.1325},"GREEN COVE SPRINGS":{latitude:29.9983,longitude:-81.7647},"SAINT AUGUSTINE":{latitude:29.8285,longitude:-81.3237},"ORANGE PARK":{latitude:30.159063636363626,longitude:-81.7373},"ST AUGUSTINE":{latitude:29.877944444444438,longitude:-81.34764444444446},"KEYSTONE HEIGHTS":{latitude:29.7976,longitude:-81.9899},"ST. AUGUSTINE":{latitude:29.97925,longitude:-81.4686},STARKE:{latitude:29.9583,longitude:-82.1185},OCOEE:{latitude:28.5837,longitude:-81.5326},BRADENTON:{latitude:27.4638375,longitude:-82.5403},NOKOMIS:{latitude:27.1384,longitude:-82.4518},"PORT CHARLOTTE":{latitude:26.974766666666667,longitude:-82.11783333333334},PALMETTO:{latitude:27.5429,longitude:-82.563},"NORTH PORT":{latitude:27.066466666666667,longitude:-82.16},VENICE:{latitude:27.0911,longitude:-82.39659999999999},"PUNTA GORDA":{latitude:26.9157,longitude:-81.9855},"SOUTHWEST RANCHES":{latitude:26.064960000000003,longitude:-80.35004},"DELRAY BEACH":{latitude:26.45384444444444,longitude:-80.13236666666666},"FT LAUDERDALE":{latitude:26.140357894736844,longitude:-80.17411315789471},SUNRISE:{latitude:26.172107000000004,longitude:-80.28171164705881},"Opa-locka":{latitude:25.924765,longitude:-80.240709},"COOPER CITY":{latitude:26.06196,longitude:-80.32718374999999},"POMPANO BEACH":{latitude:26.23547857142857,longitude:-80.1189142857143},"LAKE ALFRED":{latitude:28.0895,longitude:-81.7271},"DANIA BEACH":{latitude:26.05156583333333,longitude:-80.1461685},"BOCA RATON":{latitude:26.36597403333334,longitude:-80.15512719999998},"BOYNTON BEACH":{latitude:26.528035714285718,longitude:-80.12035714285716},"FT. LAUDERDALE":{latitude:26.1817,longitude:-80.1746},Greenacres:{latitude:26.636327999999995,longitude:-80.15029324999999},"Oakland Park":{latitude:26.18270364285715,longitude:-80.13742364285714},Parkland:{latitude:26.31950985714286,longitude:-80.250045},"Ormond Beach":{latitude:29.28402006250002,longitude:-81.08248278124998},"Coconut Creek":{latitude:26.288790304347824,longitude:-80.18510017391306},"Port Orange":{latitude:29.135734034482745,longitude:-81.00101796551725},"Hallandale Beach":{latitude:25.98646783333334,longitude:-80.14056138888888},ESTERO:{latitude:26.4351,longitude:-81.8102},Brooksville:{latitude:28.538093679999996,longitude:-82.45255956000003},"Lake Worth Beach":{latitude:26.627475,longitude:-80.0727127142857},"Coral Gables":{latitude:25.750219076923088,longitude:-80.26378696153847},"RIVIERA BEACH":{latitude:26.783728333333332,longitude:-80.05451333333333},Aventura:{latitude:25.95401642857143,longitude:-80.13953628571427},DELAND:{latitude:29.03085454545454,longitude:-81.32164545454548},"South Daytona":{latitude:29.162878833333334,longitude:-81.0223265},"Jensen Beach":{latitude:27.238272125,longitude:-80.2339735},"Key Biscayne":{latitude:25.69829,longitude:-80.163783},"PALM SPRINGS":{latitude:26.633550499999988,longitude:-80.08697874999997},"Miami Beach":{latitude:25.801681375,longitude:-80.14497575},"South Miami":{latitude:25.703022083333334,longitude:-80.29321475000002},HUDSON:{latitude:28.365945599999996,longitude:-82.6542452},"Miami Shores":{latitude:25.8658325,longitude:-80.1932775},"Miami Springs":{latitude:25.816825499999997,longitude:-80.28095383333333},"Pembroke Park":{latitude:25.986741000000002,longitude:-80.201207},"FT. MYERS":{latitude:26.6204,longitude:-81.8725},OLDSMAR:{latitude:28.046,longitude:-82.6848},CLERMONT:{latitude:28.5525,longitude:-81.7574},INDIALANTIC:{latitude:28.1091,longitude:-80.5787},"JACKSONVILLE BEACH":{latitude:30.2801,longitude:-81.41650000000001},MIDDLEBURG:{latitude:30.084,longitude:-81.8645},"DEERFIELD BEACH":{latitude:26.3124,longitude:-80.14120000000001},"BELLE GLADE":{latitude:26.6843,longitude:-80.6724},"Belle Isle":{latitude:28.504425,longitude:-81.330277},"FRUIT COVE":{latitude:30.0815,longitude:-81.5477},"Lauderdale Lakes":{latitude:26.184677999999998,longitude:-80.2216865},"ALTAMONTE SPRINGS":{latitude:28.6640375,longitude:-81.3941875},"Hialeah Gardens":{latitude:25.869559999999996,longitude:-80.32991399999999},Margate:{latitude:26.266481499999998,longitude:-80.19739533333333},"Wilton Manors":{latitude:26.158057,longitude:-80.132563},"North Lauderdale":{latitude:26.214904,longitude:-80.223061},"Palm City":{latitude:27.166855312499997,longitude:-80.2906568125},"West Melbourne":{latitude:28.066577714285707,longitude:-80.67627878571427},Malabar:{latitude:27.983009,longitude:-80.58231649999999},"Coconut Grove":{latitude:25.72923,longitude:-80.239604},SANFORD:{latitude:28.78285,longitude:-81.2835},"ROYAL PALM BEACH":{latitude:26.66396153846154,longitude:-80.17927692307691},"LEHIGH ACRES":{latitude:26.6268625,longitude:-81.6609375},"LIVE OAK":{latitude:30.2956,longitude:-82.9844},BOKEELIA:{latitude:26.6627,longitude:-82.1401},"BONITA SPRINGS":{latitude:26.3771,longitude:-81.7334},"SR 31":{latitude:26.9668,longitude:-81.9545},GULFPORT:{latitude:27.754899999999996,longitude:-82.7208},"BAY HARBOR ISLANDS":{latitude:25.7907,longitude:-80.13},WINDERMERE:{latitude:28.5006,longitude:-81.5354},"CAPE CANAVERAL":{latitude:28.3903,longitude:-80.6043},"INDIAN HARBOUR BEACH":{latitude:28.178,longitude:-80.602},"LAKE MARY":{latitude:28.7577,longitude:-81.3508},"MELBOURNE BEACH":{latitude:28.0219,longitude:-80.5389},COCOA:{latitude:28.426800000000004,longitude:-80.7807},TITUSVILLE:{latitude:28.598399999999998,longitude:-80.831},"SATELLITE BEACH":{latitude:28.178,longitude:-80.602},"ST CLOUD":{latitude:28.273,longitude:-81.2003},OVIEDO:{latitude:28.651299999999996,longitude:-81.2066},KISSIMMEE:{latitude:28.306837500000004,longitude:-81.4121625},"GRANT-VALKARIA":{latitude:27.9289,longitude:-80.5264},"ORANGE CITY":{latitude:28.9453,longitude:-81.29949999999998},NEWBERRY:{latitude:29.6609,longitude:-82.5852},"BEVERLY HILLS":{latitude:28.9295,longitude:-82.4892},"FRUITLAND PARK":{latitude:28.8639,longitude:-81.8998},TIOGA:{latitude:29.6609,longitude:-82.5852},JONESVILLE:{latitude:29.6609,longitude:-82.5852},MINNEOLA:{latitude:28.6259,longitude:-81.7306},HOMOSASSA:{latitude:28.7508,longitude:-82.5139},ARCHER:{latitude:29.5597,longitude:-82.5108},MICANOPY:{latitude:29.5122,longitude:-82.3053},"WINTER GARDEN":{latitude:28.542300000000008,longitude:-81.5911},BRONSON:{latitude:29.461,longitude:-82.6356},CHIEFLAND:{latitude:29.4832,longitude:-82.8809},TAVARES:{latitude:28.801,longitude:-81.734},"PALMETTO BAY":{latitude:25.6062,longitude:-80.3426},GROVELAND:{latitude:28.5644,longitude:-81.8745},"WINTER SPRINGS":{latitude:28.6831,longitude:-81.2814},CITRA:{latitude:29.3918,longitude:-82.1062},BUSHNELL:{latitude:28.6611,longitude:-82.1553},INVERNESS:{latitude:28.8723,longitude:-82.3454},HERNANDO:{latitude:28.9223,longitude:-82.39},LECANTO:{latitude:28.8516,longitude:-82.4876},DELTONA:{latitude:28.90063333333333,longitude:-81.23811666666667},PALATKA:{latitude:29.657699999999995,longitude:-81.6595},"NEW SMYRNA BEACH":{latitude:29.0247,longitude:-80.9584},"PALM COAST":{latitude:29.5213,longitude:-81.21175},"FLAGLER BEACH":{latitude:29.475,longitude:-81.1303},"LAKE HELEN":{latitude:28.9806,longitude:-81.2334},"LAKE CITY":{latitude:30.21515,longitude:-82.6325},LONGWOOD:{latitude:28.71287272727272,longitude:-81.36563636363634},APOKA:{latitude:28.712,longitude:-81.5136},"SAINT CLOUD":{latitude:28.248,longitude:-81.2876},B2:{latitude:28.014,longitude:-81.9523},GOTHA:{latitude:28.5384,longitude:-81.5208},DAVENPORT:{latitude:28.1963,longitude:-81.6079},SEBASTIAN:{latitude:27.790100000000002,longitude:-80.4784},CASSELBERRY:{latitude:28.6724,longitude:-81.2968},"FL 32816":{latitude:28.5663,longitude:-81.2608},CHAMPIONSGATE:{latitude:28.2531,longitude:-81.6509},"NORTH PALM BEACH":{latitude:26.8289,longitude:-80.0603},LANTANA:{latitude:26.5747,longitude:-80.0794},"PALM BEACH":{latitude:26.7206,longitude:-80.0388},"LEGACY PL":{latitude:26.8234,longitude:-80.1387},ODESSA:{latitude:28.1421,longitude:-82.5905},ELLENTON:{latitude:27.5382,longitude:-82.5006},TRINITY:{latitude:28.2129,longitude:-82.6807},"SAFETY HARBOR":{latitude:28.0096,longitude:-82.6967},"OPERATION: SNIP WELLNESS CLINIC":{latitude:27.8839,longitude:-82.8265},MASARYKTOWN:{latitude:28.4409,longitude:-82.4612},HOLIDAY:{latitude:28.1913,longitude:-82.7279},"VERO BEACH":{latitude:27.633,longitude:-80.4031},PINECREST:{latitude:25.6682,longitude:-80.2973},"NORTH BAY VILLAGE":{latitude:25.8486,longitude:-80.1446},UMATILLA:{latitude:28.9254,longitude:-81.6801},"SUN CITY CENTER":{latitude:27.7147,longitude:-82.3538},INDIANTOWN:{latitude:27.0615,longitude:-80.4803},"SANTA ROSA BEACH":{latitude:30.3659,longitude:-86.2458},"MIRAMAR BEACH":{latitude:30.385,longitude:-86.3473},CRAWFORDVILLE:{latitude:30.2108,longitude:-84.3205},HAVANA:{latitude:30.6092,longitude:-84.4143},"PSYCHOLOGY DEPT BLDG":{latitude:30.4478,longitude:-84.3211},PACE:{latitude:30.6698,longitude:-87.1794},"GULF BREEZE":{latitude:30.3571,longitude:-87.1639},MICCOSUKEE:{latitude:30.5422,longitude:-84.1413},BARTOW:{latitude:27.8957,longitude:-81.8127},LABELLE:{latitude:26.7321,longitude:-81.434},"POLK CITY":{latitude:28.1987,longitude:-81.8083},"ATLANTIC BEACH":{latitude:30.3483,longitude:-81.4159},"Ponte Vedra":{latitude:30.1204,longitude:-81.4128},"SECOND FLOOR":{latitude:30.1459,longitude:-81.5739},"PONTE VEDRA BEACH":{latitude:30.121033333333333,longitude:-81.3961},"FLEMING ISLAND":{latitude:30.0933,longitude:-81.719},CALLAHAN:{latitude:30.552000000000003,longitude:-81.8145},"SW RANCHES":{latitude:26.0663,longitude:-80.3339},"ROOM 204":{latitude:25.9974,longitude:-80.3248},STE102:{latitude:26.0968,longitude:-80.181},"BLDG. A":{latitude:30.5422,longitude:-84.1413},"FORT MYERS BEACH":{latitude:26.4527,longitude:-81.9501},SANIBEL:{latitude:26.4514,longitude:-82.0868}},Ne={medicaid:"accepts_medicaid",medicare:"accepts_medicare",florida_blue:"accepts_florida_blue",unitedhealthcare:"accepts_unitedhealthcare",aetna:"accepts_aetna",cigna:"accepts_cigna",tricare:"accepts_tricare",humana:"accepts_humana"},we={aba:"ABA",speech:"Speech",ot:"Occupational",pt:"Physical",respite:"Respite",life_skills:"Life Skills",residential:"Residential",pet_therapy:"Pet Therapy"},Ae={aba:["aba"],speech:["speech"],ot:["ot"],pt:["pt"],respite:["respite_care"],life_skills:["life_skills","life_skills_development"],residential:["residential"],pet_therapy:["pet_therapy"]},Se={aba:"aba",abatherapy:"aba",appliedbehavioranalysis:"aba",speech:"speech",speechtherapy:"speech",speechlanguage:"speech",st:"speech",slp:"speech",ot:"ot",occupationaltherapy:"ot",occupational:"ot",pt:"pt",physicaltherapy:"pt",physical:"pt",respite:"respite",respitecare:"respite",lifeskills:"life_skills",life:"life_skills",socialskills:"life_skills",lifeskillsdevelopment:"life_skills",residential:"residential",residentialsupports:"residential",pets:"pet_therapy",pettherapy:"pet_therapy"},Ce=Object.fromEntries(Object.entries(ke).map(([e,t])=>[e.trim().toLowerCase(),t])),Ee=e=>{if(!e)return null;const t=e.trim().toLowerCase();return Ce[t]??null},_e=e=>e*Math.PI/180,Re=(e,t)=>{const s=_e(e.latitude),a=_e(t.latitude),r=a-s,i=_e(t.longitude-e.longitude),l=Math.sin(r/2)*Math.sin(r/2)+Math.cos(s)*Math.cos(a)*Math.sin(i/2)*Math.sin(i/2);return 3958.8*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))},Te=e=>{if("number"==typeof e)return Number.isFinite(e)?e:null;if("string"==typeof e&&e.trim().length>0){const t=Number(e);return Number.isFinite(t)?t:null}return null},Ie=e=>{const t=Te(e.latitude),s=Te(e.longitude);return null!=t&&null!=s?{latitude:t,longitude:s}:Ee(e.city)},Le=(e,t)=>{const s=Ke(e);if(!s)return null;let a=0,r=0,i=0;return t.forEach(e=>{if(Ke(e.city)===s){const t=Ie(e);t&&(a+=t.latitude,r+=t.longitude,i+=1)}}),i>0?{latitude:a/i,longitude:r/i}:Ee(e)},Oe=({className:e})=>p.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:e,children:[p.jsx("path",{fill:"#4285F4",d:"M23.49 12.27c0-.78-.07-1.53-.2-2.27H12v4.29h6.53a5.6 5.6 0 01-2.38 3.66v3h3.85c2.25-2.07 3.49-5.12 3.49-8.68z"}),p.jsx("path",{fill:"#34A853",d:"M12 24c3.24 0 5.96-1.07 7.95-2.9l-3.85-3a7.17 7.17 0 01-10.79-3.77H1.29v3.11A12 12 0 0012 24z"}),p.jsx("path",{fill:"#FBBC05",d:"M5.31 14.33a7.2 7.2 0 01-.38-2.33c0-.81.14-1.6.38-2.33V6.56H1.29a12 12 0 000 10.89l4.02-3.12z"}),p.jsx("path",{fill:"#EA4335",d:"M12 4.73c1.76 0 3.34.61 4.58 1.81l3.42-3.42C17.97 1.24 15.24 0 12 0A12 12 0 001.29 6.56l4.02 3.11A7.17 7.17 0 0112 4.73z"})]}),Me=[{key:"medicaid",label:"Medicaid"},{key:"medicare",label:"Medicare"},{key:"florida_blue",label:"Florida Blue"},{key:"unitedhealthcare",label:"UnitedHealthcare"},{key:"aetna",label:"Aetna"},{key:"cigna",label:"Cigna"},{key:"tricare",label:"Tricare"},{key:"humana",label:"Humana"}],Fe=[{key:"aba",label:"ABA Therapy"},{key:"speech",label:"Speech Therapy"},{key:"ot",label:"Occupational Therapy"},{key:"pt",label:"Physical Therapy"},{key:"respite",label:"Respite Care"},{key:"life_skills",label:"Life Skills Programs"},{key:"residential",label:"Residential Supports"},{key:"pet_therapy",label:"Pet Therapy"}],Pe=Fe.map(({key:e})=>e),Be={medicaid:"bg-green-100 text-green-800",medicare:"bg-blue-100 text-blue-800",florida_blue:"bg-indigo-100 text-indigo-800",unitedhealthcare:"bg-purple-100 text-purple-800",aetna:"bg-pink-100 text-pink-800",cigna:"bg-teal-100 text-teal-800",tricare:"bg-orange-100 text-orange-800",humana:"bg-lime-100 text-lime-800"},De=[{field:"accepts_florida_healthcare_plans",label:"Florida Healthcare Plans",className:"bg-amber-100 text-amber-800"}],He={aba:"bg-amber-100 text-amber-800",speech:"bg-sky-100 text-sky-800",ot:"bg-purple-100 text-purple-800",pt:"bg-rose-100 text-rose-800",respite:"bg-lime-100 text-lime-800",life_skills:"bg-violet-100 text-violet-800",residential:"bg-slate-200 text-slate-800",pet_therapy:"bg-orange-100 text-orange-800"},We="bg-teal-100 text-teal-800",Ue=We,ze=e=>(e??"").trim(),Ye=e=>e.split(/\s+/).map(e=>e.length>0?e[0].toUpperCase()+e.slice(1).toLowerCase():e).join(" "),qe=e=>e.toLowerCase().replace(/[^a-z0-9]/g,"").trim(),Ge=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Ve=Object.keys(Ce).map(e=>({rawKey:e,normalizedForSearch:e.replace(/[^a-z0-9\s]/g," ").replace(/\s+/g," ").trim()})).filter(e=>e.normalizedForSearch.length>0).sort((e,t)=>t.normalizedForSearch.length-e.normalizedForSearch.length),$e=e=>{const t=e.toLowerCase().replace(/[^a-z0-9\s]/g," ").replace(/\s+/g," ").trim();if(!t)return null;const s=` ${t} `;for(const{rawKey:a,normalizedForSearch:r}of Ve){if(new RegExp(`\\b${Ge(r)}\\b`,"i").test(s))return Ye(a)}return null},Ke=e=>{const t=ze(e);return t?Ye(t).toLowerCase():""},Ze=e=>{if(null==e)return"";const t=String(e).trim();return""===t?"":t.replace(/\.0+$/,"")},Je=e=>{if("boolean"==typeof e)return e;if("string"==typeof e){const t=e.trim().toLowerCase();return!!t&&("yes"===t||"true"===t||"y"===t||"1"===t||t.startsWith("yes"))}return!1},Qe=e=>e.split(/[,|/;]+/).map(e=>e.replace(/\s+/g," ").trim()).filter(e=>e.length>0),Xe=e=>{const t=new Set;return"string"==typeof e.service_type&&e.service_type.trim().length>0&&Qe(e.service_type).forEach(e=>t.add(e)),Array.isArray(e.service_types)&&e.service_types.filter(e=>"string"==typeof e&&e.trim().length>0).forEach(e=>Qe(e).forEach(e=>t.add(e))),Array.from(t)},et=e=>!!e&&(!(e.length>40)&&!/\d/.test(e)),tt=e=>{const t={aba:!1,speech:!1,ot:!1,pt:!1,respite:!1,life_skills:!1,residential:!1,pet_therapy:!1};return e.forEach(e=>{t[e]=!0}),t},st=e=>{if(!e)return{term:"",services:[]};const t=e.trim();if(""===t)return{term:"",services:[]};if(t.toLowerCase().startsWith("service=")){const e=t.slice(t.indexOf("=")+1),s=e.split(",").map(e=>e.trim().toLowerCase()).filter(Boolean).filter(e=>Pe.includes(e));return s.length>0?{term:"",services:s}:{term:e,services:[]}}return{term:t,services:[]}},at=(e,t)=>{var s;const a=we[t].toLowerCase();if((Ae[t]??[]).some(t=>{const s=e[t];return Je(s)}))return!0;if(null==(s=e.provider_name)?void 0:s.toLowerCase().includes(a))return!0;return Xe(e).some(e=>e.toLowerCase().includes(a))},rt=({providers:e,searchTerm:t,cityFilter:s,cityLocation:a,insuranceFilters:r,serviceFilters:i})=>{let l=e;const n=t.trim().toLowerCase();if(n){let e=n.split(/\s+/).filter(Boolean);if(s){const t=new Set(Ke(s).split(/\s+/).map(qe).filter(Boolean));t.size>0&&(e=e.filter(e=>{const s=qe(e);return!!s&&!t.has(s)}))}const t=e.map(e=>e.trim()).filter(e=>e.length>0);t.length>0&&(l=l.filter(e=>{const s=e.provider_name??"",a=e.city??"",r=Ze(e.zip),i=e.state??"",l=Xe(e).map(e=>e.toLowerCase());return t.every(t=>{const n=t.toLowerCase(),o=n.replace(/[^a-z0-9]/g,""),d=/^[0-9]+$/.test(n);return!!(l.some(e=>e.includes(n))||o in Se&&at(e,Se[o]))||(d?r.includes(n):0===o.length||(s.toLowerCase().includes(n)||a.toLowerCase().includes(n)||i.toLowerCase().includes(n)||r.includes(n)))})}))}const o=Object.entries(r).filter(([,e])=>e).map(([e])=>e);o.length>0&&(l=l.filter(e=>o.some(t=>{const s=e[Ne[t]];return"string"==typeof s&&"yes"===s.toLowerCase()})));const d=Object.entries(i).filter(([,e])=>e).map(([e])=>e);if(d.length>0&&(l=l.filter(e=>d.every(t=>at(e,t)))),s)if(a){const e=l.map(e=>{const t=Ie(e);return{provider:e,distance:t?Re(a,t):Number.POSITIVE_INFINITY}}),t=e.filter(({distance:e})=>e<=40);l=(t.length>0?t:e).map(({provider:e})=>e)}else{const e=Ke(s);l=l.filter(t=>Ke(t.city)===e)}return l};function it({initialSearch:t}){const s=st(t),[a,r]=e.useState([]),[i,l]=e.useState([]),[n,o]=e.useState(s.term),[d,c]=e.useState(""),[h,u]=e.useState(!0),[m,x]=e.useState(!0),g=e.useMemo(()=>$e(n),[n]),b=d||g||"",f=e.useMemo(()=>b?Le(b,a)??Ee(b):null,[b,a]),y=e.useMemo(()=>{const e=new Set;return i.forEach(t=>{t.google_place_id&&e.add(t.google_place_id)}),Array.from(e)},[i]),{ratings:v,loading:j}=function(t){const[s,a]=e.useState({}),[r,i]=e.useState(!0),[l,n]=e.useState(null),o=async()=>{if(t&&0!==t.length)try{i(!0),n(null);const{data:e,error:s}=await pe.from("provider_ratings_summary").select("*").in("google_place_id",t);if(s)throw s;const r={};null==e||e.forEach(e=>{r[e.google_place_id]=e}),a(r)}catch(e){console.error("Error fetching provider ratings:",e),n(e instanceof Error?e.message:"Failed to fetch ratings")}finally{i(!1)}else i(!1)};return e.useEffect(()=>{o()},[JSON.stringify(t)]),{ratings:s,loading:r,error:l,refetch:o}}(y),k=e.useMemo(()=>((e,t,s)=>{const a=e.map((e,a)=>({provider:e,index:a,rating:e.google_place_id?t[e.google_place_id]:void 0,distanceMiles:s?(()=>{const t=Ie(e);return t?Re(s,t):Number.POSITIVE_INFINITY})():null}));return a.sort((e,t)=>{if(s){const s=e.distanceMiles??Number.POSITIVE_INFINITY,a=t.distanceMiles??Number.POSITIVE_INFINITY;if(s!==a)return s-a}const a=!!(e.rating&&e.rating.review_count>0),r=!!(t.rating&&t.rating.review_count>0);if(a&&!r)return-1;if(!a&&r)return 1;if(a&&r){if(t.rating.avg_rating!==e.rating.avg_rating)return t.rating.avg_rating-e.rating.avg_rating;if(t.rating.review_count!==e.rating.review_count)return t.rating.review_count-e.rating.review_count}const i=e.provider.provider_name??"",l=t.provider.provider_name??"",n=i.localeCompare(l,void 0,{sensitivity:"base"});return 0!==n?n:e.index-t.index}),a.map(({provider:e})=>e)})(i,v,f),[i,v,f]),N=e.useMemo(()=>k.map(e=>{var t;return(null==(t=e.id)?void 0:t.toString())??""}).filter(e=>e.length>0),[k]),{photos:w}=ve(N),[A,S]=e.useState({medicaid:!1,medicare:!1,florida_blue:!1,unitedhealthcare:!1,aetna:!1,cigna:!1,tricare:!1,humana:!1}),[C,E]=e.useState(()=>tt(s.services));e.useEffect(()=>{(async()=>{try{x(!0);const e=1e3;let t=0;const s=[];for(;;){const{data:a,error:r}=await xe.from("providers").select("\n              id,\n              provider_name,\n              google_place_id,\n              phone,\n              website,\n              address1,\n              address2,\n              city,\n              state,\n              zip,\n              service_type,\n              latitude,\n              longitude,\n              accepts_medicaid,\n              accepts_medicare,\n              accepts_florida_blue,\n              accepts_unitedhealthcare,\n              accepts_aetna,\n              accepts_cigna,\n              accepts_tricare,\n              accepts_humana,\n              accepts_florida_healthcare_plans,\n              aba,\n              speech,\n              ot,\n              pt,\n              respite_care,\n              life_skills,\n              residential,\n              church_support,\n              pet_therapy\n            ").order("provider_name",{ascending:!0}).range(t,t+e-1);if(r)throw r;if(!a||0===a.length)break;const i=a.map(e=>{const t=Ze(e.zip),s=null!=e.id?String(e.id):void 0,a=Te(e.latitude),r=Te(e.longitude),i=null!=e.google_place_id?String(e.google_place_id):null;return{...e,id:s,zip:t,latitude:a,longitude:r,google_place_id:i}});if(s.push(...i),a.length<e)break;t+=e}r(s);const a=d||$e(n)||"",i=a?Le(a,s)??Ee(a):null;l(rt({providers:s,searchTerm:n,cityFilter:a,cityLocation:i,insuranceFilters:A,serviceFilters:C}))}catch(e){console.error("Error:",e)}finally{x(!1)}})()},[]),e.useEffect(()=>{l(rt({providers:a,searchTerm:n,cityFilter:b,cityLocation:f,insuranceFilters:A,serviceFilters:C}))},[a,n,b,f,A,C]),e.useEffect(()=>{const e=st(t);o(e.term),E(tt(e.services))},[t]);const _=[...new Set(a.map(e=>ze(e.city)).filter(e=>e.length>0).map(Ye).filter(et))].sort((e,t)=>e.localeCompare(t));return m?p.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),p.jsx("p",{className:"text-gray-600",children:"Loading provider directory..."})]})}):p.jsxs("div",{className:"min-h-screen bg-gray-50",children:[p.jsx("div",{className:"bg-blue-600 text-white p-6 shadow-lg",children:p.jsxs("div",{className:"max-w-7xl mx-auto",children:[p.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Florida Autism Services Directory"}),p.jsx("p",{className:"text-blue-100",children:"Find providers accepting your insurance"})]})}),p.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[p.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:p.jsxs("div",{className:"flex gap-4",children:[p.jsxs("div",{className:"flex-1 relative",children:[p.jsx(Z,{className:"absolute left-3 top-3 text-gray-400",size:20}),p.jsx("input",{type:"text",placeholder:"Search providers or cities...",value:n,onChange:e=>o(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),p.jsxs("select",{value:d,onChange:e=>c(e.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 max-w-[200px] sm:max-w-none overflow-hidden text-ellipsis",children:[p.jsx("option",{value:"",children:"All Cities"}),_.map(e=>p.jsx("option",{value:e,children:e},e))]}),p.jsxs("button",{onClick:()=>u(!h),className:"px-4 py-2 bg-gray-100 rounded-lg hover:bg-gray-200 flex items-center gap-2",children:[p.jsx(F,{size:20}),"Filters"]})]})}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[h&&p.jsx("div",{className:"lg:col-span-1",children:p.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 sticky top-6 lg:max-h-[calc(100vh-3rem)] lg:overflow-y-auto",children:[p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:"font-bold text-lg mb-3",children:"Insurance Accepted"}),p.jsx("div",{className:"space-y-2",children:Me.map(({key:e,label:t})=>p.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[p.jsx("input",{type:"checkbox",checked:A[e],onChange:()=>(e=>{S(t=>({...t,[e]:!t[e]}))})(e),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),p.jsx("span",{className:"text-sm",children:t})]},e))})]}),p.jsxs("div",{className:"border-t pt-4",children:[p.jsx("h3",{className:"font-bold text-lg mb-3",children:"Services Offered"}),p.jsx("div",{className:"space-y-2",children:Fe.map(({key:e,label:t})=>p.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[p.jsx("input",{type:"checkbox",checked:C[e],onChange:()=>(e=>{E(t=>t[e]?tt([]):tt([e]))})(e),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),p.jsx("span",{className:"text-sm",children:t})]},e))})]}),p.jsx("div",{className:"border-t pt-4 mt-4",children:p.jsxs("div",{className:"text-sm text-gray-600",children:[p.jsx("strong",{children:i.length})," of ",p.jsx("strong",{children:a.length})," providers"]})})]})}),p.jsx("div",{className:h?"lg:col-span-3":"lg:col-span-4",children:p.jsx("div",{className:"space-y-4",children:0===i.length?p.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[p.jsx("p",{className:"text-gray-600 text-lg",children:"No providers match your filters"}),p.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Try adjusting your search criteria"})]}):k.map(e=>{const t=(e=>{const t=[],s=new Set,a=Xe(e),r=e=>e.toLowerCase().replace(/[^a-z0-9]/g,""),i=(e,a)=>{const i=e.split(/\s+/).map(e=>0===e.length||e===e.toUpperCase()&&/[A-Z]/.test(e)?e:e[0].toUpperCase()+e.slice(1).toLowerCase()).join(" ").trim();if(!i)return;const l=r(i);s.has(l)||(t.push({label:i,className:a}),s.add(l))};Pe.forEach(t=>{var s;const r=(null==(s=Fe.find(e=>e.key===t))?void 0:s.label)??we[t],l=(Ae[t]??[]).some(t=>Je(e[t])),n=we[t].toLowerCase(),o=a.some(e=>e.toLowerCase().includes(n)),d="string"==typeof e.provider_name&&e.provider_name.toLowerCase().includes(n);(l||o||d)&&i(r,He[t]??We)});const l=new Set(Pe.map(e=>{var t;const s=(null==(t=Fe.find(t=>t.key===e))?void 0:t.label)??we[e];return r(s)}));return a.forEach(e=>{var t;const s=r(e),a=Se[s];if(a){const e=(null==(t=Fe.find(e=>e.key===a))?void 0:t.label)??we[a];return void i(e,He[a]??We)}l.has(s)||i(e,Ue)}),t})(e),s=(e=>{const t=[];return Me.forEach(({key:s,label:a})=>{const r=e[Ne[s]];Je(r)&&t.push({label:a,className:Be[s]??"bg-slate-100 text-slate-700"})}),De.forEach(({field:s,label:a,className:r})=>{Je(e[s])&&t.push({label:a,className:r})}),t})(e),a=e.google_place_id?v[e.google_place_id]:void 0,r=j&&!!e.google_place_id,i=e.id?w[e.id.toString()]??[]:[];return p.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:p.jsxs("div",{className:"flex flex-col gap-6 md:flex-row md:gap-8",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:"text-xl font-bold text-gray-900",children:e.provider_name}),e.service_type&&p.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.service_type}),r?p.jsx("div",{className:"mt-3 h-5 w-48 rounded-full bg-gray-200 animate-pulse"}):a?p.jsxs("div",{className:"mt-3 inline-flex flex-wrap items-center gap-3 rounded-full border border-blue-100 bg-white px-3 py-2 shadow-sm",children:[p.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[p.jsx(Oe,{className:"h-4 w-4"}),p.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-wider text-gray-600",children:"Google Reviews"})]}),p.jsx(je,{rating:a.avg_rating,reviewCount:a.review_count,size:"sm",showCount:!1}),p.jsx("span",{className:"text-sm font-semibold text-gray-900",children:a.avg_rating.toFixed(1)}),p.jsxs("span",{className:"text-xs text-gray-500",children:["(",(l=a.review_count,l>=5?"5+":l.toLocaleString()),")"]})]}):null,p.jsxs("div",{className:"mt-4 flex flex-col gap-4 md:flex-row md:items-start md:gap-8 text-sm",children:[p.jsxs("div",{className:"flex items-start gap-2 text-slate-600",children:[p.jsx(z,{size:18,className:"text-gray-400 mt-1 flex-shrink-0"}),p.jsxs("div",{children:[p.jsx("div",{children:e.address1}),e.address2&&p.jsx("div",{className:"text-gray-600",children:e.address2}),p.jsxs("div",{children:[e.city,e.state&&`, ${e.state}`,e.zip&&` ${e.zip}`]})]})]}),p.jsxs("div",{className:"flex flex-col gap-2 text-slate-600 min-w-[180px]",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(K,{size:18,className:"text-gray-400 flex-shrink-0"}),e.phone?p.jsx("a",{href:`tel:${e.phone}`,className:"text-blue-600 hover:underline",children:e.phone}):p.jsx("span",{className:"text-gray-500 italic",children:"Phone not available"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(O,{size:18,className:"text-gray-400 flex-shrink-0"}),e.website?p.jsx("a",{href:e.website.startsWith("http")?e.website:`https://${e.website}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Visit Website"}):e.scraped_website?p.jsx("a",{href:e.scraped_website.startsWith("http")?e.scraped_website:`https://${e.scraped_website}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Visit Website"}):p.jsx("span",{className:"text-gray-500 italic",children:"Website not available"})]})]})]}),p.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:t.length>0?t.map(t=>p.jsx("span",{className:`px-3 py-1 text-xs rounded-full font-medium ${t.className}`,children:t.label},`${e.id??e.provider_name}-service-${t.label}`)):p.jsx("span",{className:"text-xs text-gray-500 italic",children:"Services information not available"})}),p.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:s.length>0?s.map(t=>p.jsx("span",{className:`px-3 py-1 text-xs rounded-full font-medium ${t.className}`,children:t.label},`${e.id??e.provider_name}-insurance-${t.label}`)):p.jsx("span",{className:"text-xs text-gray-500 italic",children:"Insurance information not available"})})]}),i.length>0&&p.jsx("div",{className:"hidden md:flex md:w-72 md:self-stretch lg:w-80",children:1===i.length?p.jsx("a",{href:i[0].sourceUrl??i[0].imageUrl,target:"_blank",rel:"noopener noreferrer",className:"block h-full w-full overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-sm hover:shadow-lg transition-shadow",title:i[0].sourceUrl??"View source",children:p.jsx("img",{src:i[0].imageUrl,alt:`${e.provider_name??"Provider"} photo`,className:"h-full w-full object-contain bg-white",loading:"lazy"})},`${e.id??e.provider_name}-photo-0`):p.jsx("div",{className:"flex h-full w-full flex-col gap-3",children:i.slice(0,2).map((t,s)=>p.jsx("a",{href:t.sourceUrl??t.imageUrl,target:"_blank",rel:"noopener noreferrer",className:"flex-1 overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-sm hover:shadow-lg transition-shadow",title:t.sourceUrl??"View source",children:p.jsx("img",{src:t.imageUrl,alt:`${e.provider_name??"Provider"} photo ${s+1}`,className:"h-full w-full object-contain object-center",loading:"lazy"})},`${e.id??e.provider_name}-photo-${s}`))})})]})},e.id??`${e.provider_name}-${e.city}`);var l})})})]})]})]})}function lt({initialSearch:e}){return p.jsx("div",{children:p.jsx(it,{initialSearch:e})})}function nt(){const[t,s]=e.useState([]),[a,r]=e.useState(!0),[i,l]=e.useState("");e.useEffect(()=>{n()},[]);const n=async()=>{r(!0);try{const{data:e,error:t}=await xe.from("churches").select("*").order("City",{ascending:!0});t?console.error("Error fetching churches:",t):s(e||[])}catch(e){console.error("Unexpected error:",e)}finally{r(!1)}},o=t.filter(e=>{const t=i.toLowerCase();return e.ChurchName.toLowerCase().includes(t)||e.City.toLowerCase().includes(t)||e.Denomination.toLowerCase().includes(t)||e.AccommodationSnippet.toLowerCase().includes(t)});return p.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[p.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white py-16 px-4",children:p.jsxs("div",{className:"max-w-6xl mx-auto",children:[p.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[p.jsx(T,{className:"w-12 h-12"}),p.jsx("h1",{className:"text-4xl md:text-5xl font-bold",children:"Faith-Based Support"})]}),p.jsx("p",{className:"text-xl opacity-90 max-w-3xl",children:"Autism-friendly churches and faith communities across Florida offering sensory-friendly services, special needs ministries, and inclusive worship experiences."})]})}),p.jsx("div",{className:"max-w-6xl mx-auto px-4 -mt-8",children:p.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:p.jsx("input",{type:"text",placeholder:"Search by church name, city, or accommodation type...",value:i,onChange:e=>l(e.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg \r\n                     focus:ring-2 focus:ring-purple-500 focus:border-transparent\r\n                     dark:bg-gray-700 dark:text-white"})})}),p.jsx("div",{className:"max-w-6xl mx-auto px-4 py-12",children:a?p.jsxs("div",{className:"text-center py-12",children:[p.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),p.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading churches..."})]}):0===o.length?p.jsxs("div",{className:"text-center py-12",children:[p.jsx(T,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),p.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400",children:i?"No churches match your search.":"No churches found in the database."})]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"mb-6 text-center",children:p.jsxs("p",{className:"text-lg text-gray-700 dark:text-gray-300",children:["Found ",p.jsx("span",{className:"font-bold text-purple-600 dark:text-purple-400",children:o.length})," autism-friendly ",1===o.length?"church":"churches"]})}),p.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:o.map((e,t)=>p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow",children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:e.ChurchName}),p.jsx("p",{className:"text-purple-600 dark:text-purple-400 font-medium",children:e.Denomination})]}),e.AccommodationSnippet&&p.jsx("div",{className:"mb-4 p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:p.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm",children:e.AccommodationSnippet})}),e.AccommodationTags&&p.jsx("div",{className:"mb-4 flex flex-wrap gap-2",children:e.AccommodationTags.split("|").map((e,t)=>p.jsx("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 \r\n                                   dark:text-blue-300 text-xs rounded-full",children:e.trim()},t))}),p.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-2",children:["Yes"===e.SensoryRoom&&p.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[p.jsx(D,{className:"w-4 h-4 text-green-600"}),p.jsx("span",{children:"Sensory Room"})]}),"Yes"===e.AlternativeService&&p.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[p.jsx(D,{className:"w-4 h-4 text-green-600"}),p.jsx("span",{children:"Alt. Service"})]}),"Yes"===e.ChildrenProgram&&p.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[p.jsx(D,{className:"w-4 h-4 text-green-600"}),p.jsx("span",{children:"Children's Program"})]}),"Yes"===e.AdultProgram&&p.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[p.jsx(D,{className:"w-4 h-4 text-green-600"}),p.jsx("span",{children:"Adult Program"})]})]}),p.jsxs("div",{className:"mb-3 flex items-start gap-2 text-gray-600 dark:text-gray-400",children:[p.jsx(z,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),p.jsxs("div",{children:[p.jsx("p",{children:e.Street}),p.jsxs("p",{children:[e.City,", ",e.State," ",e.ZIP]}),p.jsxs("p",{className:"text-sm",children:[e.County," County"]})]})]}),p.jsxs("div",{className:"space-y-2 pt-3 border-t border-gray-200 dark:border-gray-700",children:[e.Phone&&p.jsxs("a",{href:`tel:${e.Phone}`,className:"flex items-center gap-2 text-purple-600 dark:text-purple-400 \r\n                                 hover:underline text-sm",children:[p.jsx(K,{className:"w-4 h-4"}),e.Phone]}),e.Website&&p.jsxs("a",{href:e.Website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-purple-600 dark:text-purple-400 \r\n                                 hover:underline text-sm",children:[p.jsx(P,{className:"w-4 h-4"}),"Visit Website"]}),!e.ContactEmail||e.ContactEmail.toLowerCase().includes("email")&&e.ContactEmail.toLowerCase().includes("protected")?null:p.jsxs("a",{href:`mailto:${e.ContactEmail}`,className:"flex items-center gap-2 text-purple-600 dark:text-purple-400 hover:underline text-sm",children:[p.jsx(U,{className:"w-4 h-4"}),e.ContactEmail]})]}),e.LastVerifiedDate&&p.jsxs("p",{className:"mt-3 text-xs text-gray-500 dark:text-gray-500",children:["Last verified: ",new Date(e.LastVerifiedDate).toLocaleDateString()]})]},t))})]})})]})}const ot=[{key:"all",label:"All Resources"},{key:"therapy",label:"Types of Therapy"},{key:"insurance",label:"Insurance & Funding"},{key:"education",label:"Education & IEP"},{key:"early-intervention",label:"Early Intervention"},{key:"parent-support",label:"Parent Support"},{key:"legal-rights",label:"Legal Rights"},{key:"daily-living",label:"Daily Living"},{key:"transition-adulthood",label:"Transition to Adulthood"}],dt=[{title:"Understanding ABA Therapy in Florida",category:"therapy",slug:"understanding-aba-therapy-florida",excerpt:"Learn about Applied Behavior Analysis, insurance coverage, and finding qualified providers in Florida.",readTime:"5 min",lastUpdated:"2025-10-15",keywords:["ABA therapy","autism treatment","BCBA"]},{title:"Florida Medicaid Waiver Guide for Autism Services",category:"insurance",slug:"florida-medicaid-waiver-autism-guide",excerpt:"Step-by-step guide to applying for the iBudget Waiver and accessing covered services.",readTime:"7 min",lastUpdated:"2025-10-18",keywords:["Medicaid waiver","iBudget","APD"]},{title:"IEP vs 504 Plan: Which Does Your Child Need?",category:"education",slug:"iep-vs-504-plan-comparison",excerpt:"Understand the differences and determine the best educational support for your child.",readTime:"7 min",lastUpdated:"2025-10-14",keywords:["IEP","504 plan","special education"]},{title:"Speech Therapy for Autism: What to Expect",category:"therapy",slug:"speech-therapy-autism-expectations",excerpt:"Comprehensive guide to speech-language therapy services, goals, and coverage options.",readTime:"6 min",lastUpdated:"2025-10-12",keywords:["speech therapy","communication","SLP"]}],ct=({onNavigate:t})=>{const[s,a]=e.useState("all"),[r,i]=e.useState(""),l=e.useMemo(()=>{const e=r.trim().toLowerCase();return dt.filter(t=>{if(!("all"===s||t.category===s))return!1;if(!e)return!0;return[t.title,t.excerpt,t.readTime,t.lastUpdated,...t.keywords].join(" ").toLowerCase().includes(e)})},[s,r]);return p.jsxs("div",{className:"mx-auto max-w-7xl px-4 py-12 sm:px-6 lg:px-8",children:[p.jsxs("header",{className:"mb-10 flex flex-col gap-6 rounded-3xl bg-gradient-to-r from-green-100 via-blue-50 to-green-100 p-8 shadow-sm dark:from-green-900/10 dark:via-slate-900 dark:to-green-900/10",children:[p.jsxs("div",{className:"flex items-start gap-4",children:[p.jsx("div",{className:"rounded-2xl bg-green-600 p-4 text-white shadow-md",children:p.jsx(A,{className:"h-8 w-8"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-semibold uppercase tracking-wide text-green-700 dark:text-green-300",children:"Resource Hub"}),p.jsx("h1",{className:"mt-2 text-3xl font-bold text-slate-900 dark:text-slate-100 sm:text-4xl",children:"Guides, Funding Help, and Support for Florida Families"}),p.jsx("p",{className:"mt-3 max-w-2xl text-base text-slate-600 dark:text-slate-300",children:"Explore vetted resources on therapies, insurance, school services, and everyday supports for autistic children, teens, and adults across Florida."})]})]}),p.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[p.jsx("div",{className:"flex flex-wrap gap-2",children:ot.map(({key:e,label:t})=>{const r=s===e;return p.jsx("button",{type:"button",onClick:()=>a(e),className:"rounded-full px-4 py-2 text-sm font-semibold transition-colors "+(r?"bg-green-600 text-white shadow-md":"bg-white text-slate-600 hover:bg-green-50 hover:text-green-700 dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-700 dark:hover:text-green-300"),children:t},e)})}),p.jsxs("div",{className:"relative w-full sm:w-80",children:[p.jsx(Z,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-slate-400"}),p.jsx("input",{type:"text",value:r,onChange:e=>i(e.target.value),placeholder:"Search by topic, keyword, or question...",className:"w-full rounded-full border border-slate-200 bg-white py-2 pl-10 pr-4 text-sm text-slate-700 shadow-sm transition focus:border-green-500 focus:outline-none focus:ring-2 focus:ring-green-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100 dark:focus:border-green-400 dark:focus:ring-green-500/40"})]})]})]}),0===l.length?p.jsxs("div",{className:"rounded-3xl border border-dashed border-slate-200 bg-white/80 p-12 text-center shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[p.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"No articles match your filters"}),p.jsx("p",{className:"mt-2 text-sm text-slate-500 dark:text-slate-400",children:"Try adjusting your search term or choosing a different category to discover additional resources."})]}):p.jsx("div",{className:"grid gap-6 sm:grid-cols-2 xl:grid-cols-3",children:l.map(e=>{var s;return p.jsxs("article",{className:"flex h-full flex-col rounded-2xl border border-slate-200 bg-white p-6 shadow-sm transition hover:shadow-lg dark:border-slate-700 dark:bg-slate-900",children:[p.jsxs("span",{className:"mb-4 inline-flex w-fit items-center gap-2 rounded-full bg-green-100 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-green-700 dark:bg-green-900/30 dark:text-green-300",children:[p.jsx(ee,{className:"h-3.5 w-3.5"}),(null==(s=ot.find(t=>t.key===e.category))?void 0:s.label)??"Resource"]}),p.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:e.title}),p.jsx("p",{className:"mt-3 flex-1 text-sm text-slate-600 dark:text-slate-400",children:e.excerpt}),p.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-4 text-xs text-blue-500 dark:text-blue-300",children:[p.jsxs("span",{className:"inline-flex items-center gap-1 font-medium",children:[p.jsx(I,{className:"h-4 w-4"}),e.readTime," read"]}),p.jsxs("span",{className:"inline-flex items-center gap-1 font-medium",children:[p.jsx(A,{className:"h-4 w-4"}),"Updated ",new Date(e.lastUpdated).toLocaleDateString()]})]}),p.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:e.keywords.map(e=>p.jsxs("span",{className:"rounded-full bg-blue-50 px-3 py-1 text-xs font-medium text-blue-500 dark:bg-blue-500/10 dark:text-blue-300",children:["#",e]},e))}),p.jsx("div",{className:"mt-6",children:p.jsxs("button",{type:"button",onClick:()=>t("article",{slug:e.slug,category:e.category}),className:"inline-flex items-center gap-2 rounded-full bg-green-600 px-4 py-2 text-sm font-semibold text-white shadow-md transition hover:bg-green-700",children:["Read Article",p.jsx(R,{className:"h-4 w-4"})]})})]},e.slug)})})]})},ht=()=>{const[t,s]=e.useState({name:"",email:"",subject:"",message:"",type:"general"}),[a,r]=e.useState(!1),[i,l]=e.useState(!1),[n,o]=e.useState("");return i?p.jsx("div",{className:"max-w-2xl mx-auto",children:p.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border-2 border-green-200 dark:border-green-800 rounded-2xl p-12 text-center",children:[p.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 dark:bg-green-900/40 rounded-full mb-4",children:p.jsx(_,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),p.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Message Sent Successfully!"}),p.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"Thank you for reaching out. We'll get back to you as soon as possible."}),p.jsx("button",{onClick:()=>l(!1),className:"px-6 py-3 bg-green-600 hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 text-white font-semibold rounded-lg transition-colors",children:"Send Another Message"})]})}):p.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-teal-100 dark:bg-teal-900/30 rounded-2xl mb-4",children:p.jsx(U,{className:"w-8 h-8 text-teal-600 dark:text-teal-400"})}),p.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Get in Touch"}),p.jsx("p",{className:"text-slate-600 dark:text-slate-400 max-w-2xl mx-auto",children:"Have questions, feedback, or want to suggest a provider? We'd love to hear from you."})]}),p.jsxs("form",{onSubmit:async e=>{e.preventDefault(),r(!0),o("");try{const{error:e}=await xe.from("contact_messages").insert([t]);if(e)throw e;l(!0),s({name:"",email:"",subject:"",message:"",type:"general"})}catch(a){console.error("Error submitting contact form:",a),o("Failed to send message. Please try again.")}finally{r(!1)}},className:"bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 rounded-2xl p-8 space-y-6",children:[n&&p.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 px-4 py-3 rounded-lg",children:n}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{children:[p.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Your Name ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsx("input",{type:"text",id:"name",required:!0,value:t.name,onChange:e=>s({...t,name:e.target.value}),className:"w-full px-4 py-3 rounded-lg border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:border-teal-500 dark:focus:border-teal-400 focus:outline-none focus:ring-2 focus:ring-teal-500/20",placeholder:"John Doe"})]}),p.jsxs("div",{children:[p.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Email Address ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsx("input",{type:"email",id:"email",required:!0,value:t.email,onChange:e=>s({...t,email:e.target.value}),className:"w-full px-4 py-3 rounded-lg border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:border-teal-500 dark:focus:border-teal-400 focus:outline-none focus:ring-2 focus:ring-teal-500/20",placeholder:"john@example.com"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Message Type"}),p.jsxs("select",{id:"type",value:t.type,onChange:e=>s({...t,type:e.target.value}),className:"w-full px-4 py-3 rounded-lg border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:border-teal-500 dark:focus:border-teal-400 focus:outline-none focus:ring-2 focus:ring-teal-500/20",children:[p.jsx("option",{value:"general",children:"General Inquiry"}),p.jsx("option",{value:"feedback",children:"Feedback"}),p.jsx("option",{value:"update",children:"Update Listing"}),p.jsx("option",{value:"report",children:"Report Issue"})]})]}),p.jsxs("div",{children:[p.jsxs("label",{htmlFor:"subject",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Subject ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsx("input",{type:"text",id:"subject",required:!0,value:t.subject,onChange:e=>s({...t,subject:e.target.value}),className:"w-full px-4 py-3 rounded-lg border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:border-teal-500 dark:focus:border-teal-400 focus:outline-none focus:ring-2 focus:ring-teal-500/20",placeholder:"How can we help?"})]}),p.jsxs("div",{children:[p.jsxs("label",{htmlFor:"message",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Message ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsx("textarea",{id:"message",required:!0,value:t.message,onChange:e=>s({...t,message:e.target.value}),rows:6,className:"w-full px-4 py-3 rounded-lg border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:border-teal-500 dark:focus:border-teal-400 focus:outline-none focus:ring-2 focus:ring-teal-500/20 resize-none",placeholder:"Tell us more..."})]}),p.jsx("button",{type:"submit",disabled:a,className:"w-full flex items-center justify-center space-x-2 px-6 py-4 bg-teal-600 hover:bg-teal-700 dark:bg-teal-500 dark:hover:bg-teal-600 disabled:bg-slate-300 dark:disabled:bg-slate-700 text-white font-semibold rounded-lg transition-colors",children:a?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),p.jsx("span",{children:"Sending..."})]}):p.jsxs(p.Fragment,{children:[p.jsx(J,{className:"w-5 h-5"}),p.jsx("span",{children:"Send Message"})]})})]}),p.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-xl p-6 text-center",children:p.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["You can also reach us directly at"," ",p.jsx("a",{href:"mailto:floridaautismservices@gmail.com",className:"text-teal-600 dark:text-teal-400 hover:underline",children:"floridaautismservices@gmail.com"})]})})]})},ut=()=>{const[t,s]=e.useState({name:"",description:"",address:"",city:"",county:"",zip_code:"",phone:"",email:"",website:"",service_types:[],settings:[],credentials:""}),[a,r]=e.useState(!1),[i,l]=e.useState(!1),[n,o]=e.useState("");return i?p.jsx("div",{className:"max-w-2xl mx-auto",children:p.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border-2 border-green-200 dark:border-green-800 rounded-2xl p-12 text-center",children:[p.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 dark:bg-green-900/40 rounded-full mb-4",children:p.jsx(_,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),p.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Submission Received!"}),p.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-2",children:"Thank you for submitting a provider to our directory."}),p.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500",children:"All submissions are reviewed before publication to ensure accuracy and quality. We'll contact you if we need additional information."})]})}):p.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-teal-100 dark:bg-teal-900/30 rounded-2xl mb-4",children:p.jsx(C,{className:"w-8 h-8 text-teal-600 dark:text-teal-400"})}),p.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Submit a Provider"}),p.jsx("p",{className:"text-slate-600 dark:text-slate-400 max-w-2xl mx-auto",children:"Know a great autism service provider? Help other families by adding them to our directory. All submissions are reviewed before publication."})]}),p.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4 flex items-start space-x-3",children:[p.jsx(N,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),p.jsxs("div",{className:"text-sm text-blue-900 dark:text-blue-300",children:[p.jsx("strong",{children:"Verification Process:"})," We review all submissions to verify credentials, services, and contact information before adding providers to our directory. This helps maintain trust and quality."]})]}),p.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),r(!0),o(""),0===t.service_types.length)return o("Please select at least one service type"),void r(!1);if(0===t.settings.length)return o("Please select at least one service setting"),void r(!1);try{const{error:e}=await xe.from("provider_submissions").insert([{...t,status:"pending"}]);if(e)throw e;l(!0)}catch(s){console.error("Error submitting provider:",s),o("Failed to submit provider. Please try again.")}finally{r(!1)}},className:"bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 rounded-2xl p-8 space-y-6",children:[n&&p.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 px-4 py-3 rounded-lg",children:n}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Basic Information"}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Provider/Organization Name ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsx("input",{type:"text",id:"name",required:!0,value:t.name,onChange:e=>s({...t,name:e.target.value}),className:"w-full px-4 py-3 rounded-lg border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:border-teal-500 dark:focus:border-teal-400 focus:outline-none focus:ring-2 focus:ring-teal-500/20"})]}),p.jsxs("div",{children:[p.jsxs("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Description ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsx("textarea",{id:"description",required:!0,value:t.description,onChange:e=>s({...t,description:e.target.value}),rows:4,className:"w-full px-4 py-3 rounded-lg border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:border-teal-500 dark:focus:border-teal-400 focus:outline-none focus:ring-2 focus:ring-teal-500/20 resize-none",placeholder:"Describe the services offered..."})]})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Location"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"md:col-span-2",children:[p.jsxs("label",{htmlFor:"address",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Street Address ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsx("input",{type:"text",id:"address",required:!0,value:t.address,onChange:e=>s({...t,address:e.target.value}),className:"w-full px-4 py-3 rounded-lg border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:border-teal-500 dark:focus:border-teal-400 focus:outline-none focus:ring-2 focus:ring-teal-500/20"})]}),p.jsxs("div",{children:[p.jsxs("label",{htmlFor:"city",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["City ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsx("input",{type:"text",id:"city",required:!0,value:t.city,onChange:e=>s({...t,city:e.target.value}),className:"w-full px-4 py-3 rounded-lg border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:border-teal-500 dark:focus:border-teal-400 focus:outline-none focus:ring-2 focus:ring-teal-500/20"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"county",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"County"}),p.jsx("input",{type:"text",id:"county",value:t.county,onChange:e=>s({...t,county:e.target.value}),className:"w-full px-4 py-3 rounded-lg border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:border-teal-500 dark:focus:border-teal-400 focus:outline-none focus:ring-2 focus:ring-teal-500/20"})]}),p.jsxs("div",{children:[p.jsxs("label",{htmlFor:"zip_code",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["ZIP Code ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsx("input",{type:"text",id:"zip_code",required:!0,value:t.zip_code,onChange:e=>s({...t,zip_code:e.target.value}),className:"w-full px-4 py-3 rounded-lg border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:border-teal-500 dark:focus:border-teal-400 focus:outline-none focus:ring-2 focus:ring-teal-500/20"})]})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Contact Information"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Phone Number"}),p.jsx("input",{type:"tel",id:"phone",value:t.phone,onChange:e=>s({...t,phone:e.target.value}),className:"w-full px-4 py-3 rounded-lg border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:border-teal-500 dark:focus:border-teal-400 focus:outline-none focus:ring-2 focus:ring-teal-500/20"})]}),p.jsxs("div",{children:[p.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Email Address ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsx("input",{type:"email",id:"email",required:!0,value:t.email,onChange:e=>s({...t,email:e.target.value}),className:"w-full px-4 py-3 rounded-lg border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:border-teal-500 dark:focus:border-teal-400 focus:outline-none focus:ring-2 focus:ring-teal-500/20"})]}),p.jsxs("div",{className:"md:col-span-2",children:[p.jsx("label",{htmlFor:"website",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Website"}),p.jsx("input",{type:"url",id:"website",value:t.website,onChange:e=>s({...t,website:e.target.value}),className:"w-full px-4 py-3 rounded-lg border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:border-teal-500 dark:focus:border-teal-400 focus:outline-none focus:ring-2 focus:ring-teal-500/20",placeholder:"https://"})]})]})]}),p.jsxs("div",{children:[p.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2",children:["Service Types ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:"Select all that apply"}),p.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:["ABA Therapy","Speech Therapy","Occupational Therapy","Physical Therapy","Behavioral Support","Social Skills Groups","Early Intervention","Respite Care","Case Management","Diagnostic Services"].map(e=>p.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:t.service_types.includes(e),onChange:()=>(e=>{s({...t,service_types:t.service_types.includes(e)?t.service_types.filter(t=>t!==e):[...t.service_types,e]})})(e),className:"w-4 h-4 text-teal-600 border-slate-300 dark:border-slate-600 rounded focus:ring-teal-500"}),p.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:e})]},e))})]}),p.jsxs("div",{children:[p.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2",children:["Service Settings ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:"Where are services provided?"}),p.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:["Clinic","In-Home","Telehealth","School-Based"].map(e=>p.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:t.settings.includes(e),onChange:()=>(e=>{s({...t,settings:t.settings.includes(e)?t.settings.filter(t=>t!==e):[...t.settings,e]})})(e),className:"w-4 h-4 text-teal-600 border-slate-300 dark:border-slate-600 rounded focus:ring-teal-500"}),p.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:e})]},e))})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"credentials",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Credentials & Certifications"}),p.jsx("textarea",{id:"credentials",value:t.credentials,onChange:e=>s({...t,credentials:e.target.value}),rows:3,className:"w-full px-4 py-3 rounded-lg border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:border-teal-500 dark:focus:border-teal-400 focus:outline-none focus:ring-2 focus:ring-teal-500/20 resize-none",placeholder:"e.g., BCBA, SLP, OTR/L, State License Numbers..."})]}),p.jsx("button",{type:"submit",disabled:a,className:"w-full px-6 py-4 bg-teal-600 hover:bg-teal-700 dark:bg-teal-500 dark:hover:bg-teal-600 disabled:bg-slate-300 dark:disabled:bg-slate-700 text-white font-semibold rounded-lg transition-colors",children:a?p.jsxs("span",{className:"flex items-center justify-center space-x-2",children:[p.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),p.jsx("span",{children:"Submitting..."})]}):"Submit Provider"})]})]})},mt=()=>{const[t,s]=e.useState(!1);return p.jsxs("div",{className:"space-y-12",children:[p.jsxs("section",{className:"bg-gradient-to-br from-sky-100/40 via-teal-50/30 to-amber-50/30 dark:from-slate-800 dark:via-slate-800 dark:to-slate-900 rounded-3xl px-10 py-10 text-center",children:[p.jsx("img",{src:"/assets/rainbow-ribbon-logo-Lm6zZSny.png",alt:"Florida Autism Services - connecting families to autism services",className:"mx-auto mb-8 w-[400px] max-w-full h-auto"}),p.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-slate-800 dark:text-slate-100 mb-4",children:"Our Mission"}),p.jsx("p",{className:"text-xl text-slate-600 dark:text-slate-300 max-w-3xl mx-auto",children:"To connect families across Florida with trusted, verified autism services and support, making it easier to find the care and resources they need."})]}),p.jsxs("section",{children:[p.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 mb-8 text-center",children:"What We Do"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[p.jsxs("div",{className:"bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 rounded-2xl p-8 text-center",children:[p.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-teal-100 dark:bg-teal-900/30 rounded-2xl mb-4",children:p.jsx(te,{className:"w-8 h-8 text-teal-600 dark:text-teal-400"})}),p.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-3",children:"Curate Quality Listings"}),p.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"We carefully review and verify every provider, church, and resource before adding them to our directory to ensure families can trust the information."})]}),p.jsxs("div",{className:"bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 rounded-2xl p-8 text-center",children:[p.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-2xl mb-4",children:p.jsx(se,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),p.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-3",children:"Build Community"}),p.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"We create connections between families, providers, and support organizations to foster a stronger autism community across Florida."})]}),p.jsxs("div",{className:"bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 rounded-2xl p-8 text-center",children:[p.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 dark:bg-blue-900/30 rounded-2xl mb-4",children:p.jsx(Q,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),p.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-3",children:"Provide Education"}),p.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"We share valuable resources, articles, and guides to help families navigate autism services, understand their rights, and make informed decisions."})]})]})]}),p.jsxs("section",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-2xl p-8 md:p-12",children:[p.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-6 text-center",children:"Our Approach"}),p.jsx("p",{className:"text-center text-slate-600 dark:text-slate-400 mb-8 max-w-3xl mx-auto",children:"We've compiled this directory through extensive research to help Florida families find autism services more easily. Here's how we built it:"}),p.jsxs("div",{className:"space-y-6 max-w-3xl mx-auto",children:[p.jsxs("div",{className:"flex items-start space-x-4",children:[p.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-teal-100 dark:bg-teal-900/30 rounded-full flex items-center justify-center",children:p.jsx("span",{className:"text-teal-600 dark:text-teal-400 font-bold",children:"1"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-1",children:"Comprehensive Research"}),p.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"We searched multiple sources including Google, state databases, professional directories, and community resources to identify autism service providers across Florida."})]})]}),p.jsxs("div",{className:"flex items-start space-x-4",children:[p.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-teal-100 dark:bg-teal-900/30 rounded-full flex items-center justify-center",children:p.jsx("span",{className:"text-teal-600 dark:text-teal-400 font-bold",children:"2"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-1",children:"Official Database Integration"}),p.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"We incorporated data from verified state resources, including the Florida Agency for Persons with Disabilities (APD) provider database and other official government listings."})]})]}),p.jsxs("div",{className:"flex items-start space-x-4",children:[p.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-teal-100 dark:bg-teal-900/30 rounded-full flex items-center justify-center",children:p.jsx("span",{className:"text-teal-600 dark:text-teal-400 font-bold",children:"3"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-1",children:"Information Aggregation"}),p.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"We gathered publicly available information about each provider, including contact details, services offered, location, and insurance accepted based on their websites and public profiles."})]})]}),p.jsxs("div",{className:"flex items-start space-x-4",children:[p.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-teal-100 dark:bg-teal-900/30 rounded-full flex items-center justify-center",children:p.jsx("span",{className:"text-teal-600 dark:text-teal-400 font-bold",children:"4"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-1",children:"Ongoing Updates"}),p.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"We continuously add new providers and update information as we discover changes. This is a growing directory, and we encourage families to verify details directly with providers before making decisions."})]})]})]})]}),p.jsxs("section",{className:"rounded-2xl border border-amber-200 bg-amber-50 p-8 md:p-10 shadow-sm",children:[p.jsx("h2",{className:"text-2xl font-bold text-amber-800 mb-4 text-center",children:"Important Disclaimer"}),p.jsx("p",{className:"text-sm text-amber-900 mb-4 text-center",children:"Please Note: This directory is provided for informational purposes only. All listings are based on publicly available information and have not been independently verified by Florida Autism Services. We do not endorse any particular provider, and we cannot guarantee the accuracy, quality, or current availability of services."}),p.jsxs("div",{className:"mx-auto max-w-3xl space-y-3 text-sm text-amber-900",children:[p.jsx("p",{children:"We strongly recommend that families:"}),p.jsxs("ul",{className:"list-disc space-y-2 pl-5",children:[p.jsx("li",{children:"Verify credentials directly with providers"}),p.jsx("li",{children:"Check licensing status with Florida licensing boards"}),p.jsx("li",{children:"Read reviews from other families"}),p.jsx("li",{children:"Visit providers in person when possible"}),p.jsx("li",{children:"Confirm insurance coverage with your insurer"})]}),p.jsx("div",{className:"rounded-lg bg-amber-100/60 p-4",children:p.jsx("p",{className:"font-medium text-amber-900",children:"Report Issues: If you notice incorrect information or have concerns about a listing, please contact us so we can update our records."})})]})]}),p.jsxs("section",{children:[p.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 mb-8 text-center",children:"Our Values"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"flex items-start space-x-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl p-6",children:[p.jsx(E,{className:"w-6 h-6 text-teal-600 dark:text-teal-400 flex-shrink-0 mt-1"}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Trust & Transparency"}),p.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"We believe families deserve accurate, trustworthy information. We're transparent about our vetting process and always prioritize data integrity."})]})]}),p.jsxs("div",{className:"flex items-start space-x-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl p-6",children:[p.jsx(E,{className:"w-6 h-6 text-teal-600 dark:text-teal-400 flex-shrink-0 mt-1"}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Accessibility for All"}),p.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Our platform is designed to be accessible, with features like dark mode and low-sensory options to accommodate different needs and preferences."})]})]}),p.jsxs("div",{className:"flex items-start space-x-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl p-6",children:[p.jsx(E,{className:"w-6 h-6 text-teal-600 dark:text-teal-400 flex-shrink-0 mt-1"}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Community-Driven"}),p.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"We welcome input from families, providers, and community members to continually improve and expand our directory."})]})]}),p.jsxs("div",{className:"flex items-start space-x-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl p-6",children:[p.jsx(E,{className:"w-6 h-6 text-teal-600 dark:text-teal-400 flex-shrink-0 mt-1"}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Always Free"}),p.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Our directory is and always will be completely free for families to use. We never charge for access to provider information or resources."})]})]})]})]}),p.jsxs("section",{className:"bg-gradient-to-r from-teal-50 to-green-50 dark:from-slate-800 dark:to-slate-800 rounded-2xl p-8 text-center",children:[p.jsx(M,{className:"w-12 h-12 text-teal-600 dark:text-teal-400 mx-auto mb-4"}),p.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-3",children:"Our Vision"}),p.jsx("p",{className:"text-lg text-slate-700 dark:text-slate-300 max-w-3xl mx-auto",children:"We envision a Florida where every family affected by autism can easily find the services, support, and community they need to thrive. By building the most comprehensive and trusted directory of autism resources, we're working to make that vision a reality."})]}),p.jsxs("section",{className:"text-center bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 rounded-2xl p-8",children:[p.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-4",children:"Privacy & Data Protection"}),p.jsx("p",{className:"text-slate-600 dark:text-slate-400 max-w-2xl mx-auto mb-6",children:"We take your privacy seriously. We do not sell or share user data with third parties. All information submitted through our forms is used solely to improve our directory and communicate with submitters when necessary."}),p.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500",children:"For more information, please review our Privacy Policy and Terms of Service."})]}),p.jsx("section",{className:"bg-gradient-to-br from-amber-50 via-teal-50/30 to-sky-50/30 dark:from-slate-800 dark:via-slate-800 dark:to-slate-900 rounded-3xl p-8 md:p-12 border-2 border-amber-200/50 dark:border-amber-800/30",children:p.jsxs("div",{className:"max-w-3xl mx-auto text-center space-y-6",children:[p.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-amber-100 dark:bg-amber-900/30 rounded-full mb-4",children:p.jsx(D,{className:"w-10 h-10 text-amber-600 dark:text-amber-400"})}),p.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-slate-800 dark:text-slate-100",children:"Support the Cause"}),p.jsxs("p",{className:"text-lg text-slate-600 dark:text-slate-300 leading-relaxed",children:[p.jsx("strong",{className:"text-slate-800 dark:text-slate-100",children:"Florida Autism Services is a free community resource."})," ","Donations help us verify providers, maintain the site, expand our directory, and keep this valuable resource accessible to all families navigating autism services in Florida."]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 pt-4",children:[p.jsxs("div",{className:"bg-white/70 dark:bg-slate-800/70 rounded-xl p-4",children:[p.jsx(E,{className:"w-8 h-8 text-teal-600 dark:text-teal-400 mx-auto mb-2"}),p.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-100 mb-1",children:"Verify Providers"}),p.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Professional credential checks"})]}),p.jsxs("div",{className:"bg-white/70 dark:bg-slate-800/70 rounded-xl p-4",children:[p.jsx(E,{className:"w-8 h-8 text-teal-600 dark:text-teal-400 mx-auto mb-2"}),p.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-100 mb-1",children:"Expand Access"}),p.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Reach more families statewide"})]}),p.jsxs("div",{className:"bg-white/70 dark:bg-slate-800/70 rounded-xl p-4",children:[p.jsx(E,{className:"w-8 h-8 text-teal-600 dark:text-teal-400 mx-auto mb-2"}),p.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-100 mb-1",children:"Stay Free"}),p.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Always accessible to all"})]})]}),p.jsxs("button",{onClick:()=>s(!0),className:"inline-flex items-center space-x-2 px-8 py-4 bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-white text-lg font-semibold rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl",children:[p.jsx(D,{className:"w-5 h-5"}),p.jsx("span",{children:"Make a Donation"})]}),p.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500",children:"Every contribution, big or small, makes a difference"})]})}),p.jsx(oe,{isOpen:t,onClose:()=>s(!1)})]})},xt=e=>{const t="Florida Autism Services",s=e.title?`${e.title} | ${t}`:t,a=e.description||"Connecting families to autism services across Florida. Find verified providers, resources, and support for individuals with autism and their families.",r=e.keywords||["Florida autism services","autism support Florida","ASD therapies","autism providers","special needs services"];document.title=s;const i=(e,t,s=!1)=>{const a=s?"property":"name";let r=document.querySelector(`meta[${a}="${e}"]`);r||(r=document.createElement("meta"),r.setAttribute(a,e),document.head.appendChild(r)),r.setAttribute("content",t)};i("description",a),i("keywords",r.join(", ")),i("og:title",s,!0),i("og:description",a,!0),i("og:type",e.type||"website",!0),i("og:url",e.url||"https://floridaautismservices.com",!0),i("og:image","https://floridaautismservices.com/assets/rainbow-ribbon-logo.png",!0),i("twitter:card","summary_large_image"),i("twitter:title",s),i("twitter:description",a),i("twitter:image","https://floridaautismservices.com/assets/rainbow-ribbon-logo.png");const l=e.canonicalUrl||e.url||window.location.href;let n=document.querySelector('link[rel="canonical"]');n||(n=document.createElement("link"),n.setAttribute("rel","canonical"),document.head.appendChild(n)),n.setAttribute("href",l)},pt=(e,t)=>{const s={"@context":"https://schema.org","@type":e};"Organization"===e?Object.assign(s,{name:"Florida Autism Services",description:"Connecting families to autism services across Florida",url:"https://floridaautismservices.com",logo:"https://floridaautismservices.com/assets/rainbow-ribbon-logo.png",contactPoint:{"@type":"ContactPoint",contactType:"Customer Service",url:"https://floridaautismservices.com/contact",areaServed:"US-FL"}}):"WebSite"===e?Object.assign(s,{name:"Florida Autism Services",url:"https://floridaautismservices.com",potentialAction:{"@type":"SearchAction",target:"https://floridaautismservices.com/providers?search={search_term_string}","query-input":"required name=search_term_string"}}):"LocalBusiness"===e&&t&&Object.assign(s,t);const a=`structured-data-${e.toLowerCase()}`;let r=document.querySelector(`script#${a}`);r||(r=document.createElement("script"),r.setAttribute("type","application/ld+json"),r.setAttribute("id",a),document.head.appendChild(r)),r.textContent=JSON.stringify(s)},gt=({onNavigate:e})=>{const t=[{title:"Speech Therapy for Autism",onClick:()=>e("article",{slug:"speech-therapy-autism-expectations"})},{title:"Florida Medicaid Waiver Guide",onClick:()=>e("article",{slug:"florida-medicaid-waiver-autism-guide"})},{title:"Private Insurance Coverage",onClick:()=>e("article",{slug:"understanding-private-insurance-autism"})}];return p.jsx("div",{className:"bg-slate-50 pb-16 pt-6",children:p.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-6 px-4 sm:px-6 lg:px-8",children:[p.jsxs("nav",{className:"flex flex-wrap items-center gap-2 text-sm text-slate-500",children:[p.jsxs("button",{type:"button",onClick:()=>e("home"),className:"inline-flex items-center gap-1 font-medium text-green-600 transition hover:text-green-700",children:[p.jsx(w,{className:"h-3.5 w-3.5"}),"Home"]}),p.jsx("span",{className:"text-slate-400",children:"/"}),p.jsx("button",{type:"button",onClick:()=>e("resources"),className:"font-medium text-green-600 transition hover:text-green-700",children:"Resources"}),p.jsx("span",{className:"text-slate-400",children:"/"}),p.jsx("span",{className:"font-medium text-slate-500",children:"Types of Therapy"}),p.jsx("span",{className:"text-slate-400",children:"/"}),p.jsx("span",{className:"font-semibold text-slate-700",children:"Understanding ABA Therapy"})]}),p.jsxs("header",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-r from-green-600 to-green-700 px-6 py-12 text-white shadow-xl sm:px-10",children:[p.jsx("div",{className:"absolute inset-y-0 right-0 w-1/3 bg-green-500/20 blur-3xl"}),p.jsxs("div",{className:"relative flex flex-col gap-4",children:[p.jsx("span",{className:"inline-flex w-fit items-center gap-2 rounded-full bg-white/20 px-4 py-1 text-xs font-semibold uppercase tracking-wide text-white",children:"Types of Therapy"}),p.jsx("h1",{className:"text-3xl font-bold leading-tight sm:text-4xl",children:"Understanding ABA Therapy in Florida: A Complete Guide for Families"}),p.jsxs("p",{className:"flex items-center gap-4 text-sm font-medium text-green-100",children:[p.jsxs("span",{className:"inline-flex items-center gap-2",children:[p.jsx(A,{className:"h-4 w-4"}),"5 min read"]}),p.jsxs("span",{className:"inline-flex items-center gap-2",children:[p.jsx(I,{className:"h-4 w-4"}),"Updated October 15, 2025"]})]})]})]}),p.jsxs("main",{className:"mx-auto w-full max-w-4xl space-y-12",children:[p.jsxs("aside",{className:"rounded-3xl border border-amber-200 bg-amber-50 p-6 shadow-sm",children:[p.jsx("h2",{className:"mb-3 text-lg font-semibold text-amber-800",children:"Key Takeaways"}),p.jsxs("ul",{className:"grid gap-3 text-sm text-amber-900 sm:grid-cols-2",children:[p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx("span",{className:"mt-1 h-2.5 w-2.5 rounded-full bg-amber-500"}),"ABA is a science-based teaching method that breaks big goals into small steps for real-life success."]}),p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx("span",{className:"mt-1 h-2.5 w-2.5 rounded-full bg-amber-500"}),"A BCBA creates a custom plan for your child and checks progress with data every week."]}),p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx("span",{className:"mt-1 h-2.5 w-2.5 rounded-full bg-amber-500"}),"Modern ABA in Florida feels like playΓÇötherapists use games, songs, and interests to teach."]}),p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx("span",{className:"mt-1 h-2.5 w-2.5 rounded-full bg-amber-500"}),"Medicaid, most private insurers, and TRICARE all cover ABA therapy when requirements are met."]}),p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx("span",{className:"mt-1 h-2.5 w-2.5 rounded-full bg-amber-500"}),"Practicing skills at home helps your child learn fasterΓÇöparent involvement is the secret sauce."]}),p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx("span",{className:"mt-1 h-2.5 w-2.5 rounded-full bg-amber-500"}),"Teens and adults benefit too, with programs for jobs, independent living, and college support."]})]})]}),p.jsxs("article",{className:"space-y-10 rounded-3xl border border-slate-200 bg-white p-8 shadow-sm dark:border-slate-700 dark:bg-slate-900",children:[p.jsxs("section",{className:"space-y-4 text-base leading-relaxed text-slate-700 dark:text-slate-200",children:[p.jsx("h2",{className:"text-2xl font-semibold text-slate-900 dark:text-slate-100",children:"What is ABA Therapy?"}),p.jsx("p",{children:"Think of ABA (Applied Behavior Analysis) as a teaching method backed by science. It helps people with autism learn new skills and reduce behaviors that might get in the way of learning or safety. Instead of using a one-size-fits-all program, a Board Certified Behavior Analyst (BCBA) designs a plan that fits your child. They break big goals into small, doable steps, then keep track of progress with data so you can see whatΓÇÖs working."}),p.jsx("p",{children:"ABA can make a big difference in everyday life. Kids and adults use ABA strategies to build communication, play with friends, get dressed more easily, feel safer in the community, and learn in school. In Florida, many providers make sessions feel like playtime with games, songs, and activities your child already loves. Teams often include speech therapists and occupational therapists so everyone is working toward the same goals."}),p.jsx("p",{children:"ABA isnΓÇÖt just for little kids. Teens and adults can use ABA to learn job skills, cook meals, ride the bus, or get ready for college classes. The plan changes as your child grows and as your familyΓÇÖs goals change. Your BCBA will always check in with you to be sure therapy matches what matters most to your family."}),p.jsx("div",{className:"rounded-xl border-l-4 border-blue-500 bg-blue-50 p-4 text-sm text-blue-900",children:p.jsx("p",{children:"Ask if the clinic offers a ΓÇ£pairingΓÇ¥ period. This lets therapists learn about your childΓÇÖs favorite games and snacks so sessions start off fun and friendly."})})]}),p.jsxs("section",{className:"space-y-4 text-base leading-relaxed text-slate-700 dark:text-slate-200",children:[p.jsx("h2",{className:"text-2xl font-semibold text-slate-900 dark:text-slate-100",children:"How Does ABA Work?"}),p.jsx("p",{children:"ABA usually begins with an assessment that lasts one to two weeks. During this time a BCBA watches your child in different places, talks with your family about goals, and uses tools to understand strengths and challenges. They also look at why certain behaviors happen so they can teach safe alternatives."}),p.jsx("p",{children:"Next, the BCBA writes a treatment plan filled with clear goals. You review the plan together to make sure it fits your family. Once insurance approves it, therapy begins! Registered Behavior Technicians (RBTs) work with your child at home, in a clinic, at school, or in the community. Each session includes data collection so progress is easy to see. Your BCBA checks this data often, updates the plan, and coaches you along the way."}),p.jsx("p",{children:"The secret to success is practice everywhere. Skills learned in therapy need to work at bedtime, at grandmaΓÇÖs house, and at the grocery store. Your BCBA will show you how to use strategies in daily routines and will team up with teachers, speech therapists, or doctors so everyone is on the same page. Many Florida providers now use secure apps where you can view notes, watch short videos, or message your BCBA any time you have a question."}),p.jsx("div",{className:"rounded-xl border-l-4 border-blue-500 bg-blue-50 p-4 text-sm text-blue-900",children:p.jsx("p",{children:"Ask your BCBA to share session notes or graphs each week. Seeing ΓÇ£winsΓÇ¥ on paper keeps everyone motivated and helps you spot new skills to celebrate at home."})})]}),p.jsxs("section",{className:"space-y-4 text-base leading-relaxed text-slate-700 dark:text-slate-200",children:[p.jsx("h2",{className:"text-2xl font-semibold text-slate-900 dark:text-slate-100",children:"Insurance Coverage in Florida"}),p.jsx("p",{children:"Florida has powerful laws that help families pay for ABA therapy. Whether you use Medicaid, private insurance, or TRICARE, thereΓÇÖs a path to coverage."}),p.jsxs("p",{children:[p.jsx("strong",{children:"Florida Medicaid"})," covers ABA with no hour limits for kids under 21. You need an autism diagnosis and a prescription or referral. Families who have the iBudget Waiver through the Agency for Persons with Disabilities can keep ABA services during the teen and adult years too."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Private insurance"})," plans like Blue Cross Blue Shield, Aetna, UnitedHealthcare, Cigna, and Humana usually cover up to $36,000 per year. A few employer insurance plans donΓÇÖt have to follow FloridaΓÇÖs rules, so itΓÇÖs smart to ask your HR team to confirm."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Military families"})," can rely on TRICAREΓÇÖs Autism Care Demonstration. It covers up to 40 hours per week with small copays, as long as you keep a referral from your primary doctor and renew approvals every six months."]}),p.jsx("p",{children:"Even with insurance you might see deductibles, copays, or coinsurance. Ask whether your provider offers payment plans or if they know about scholarships like the Family Empowerment Scholarship (formerly Gardiner). Some nonprofits give small grants to help with therapy costs."}),p.jsx("div",{className:"rounded-xl border-l-4 border-blue-500 bg-blue-50 p-4 text-sm text-blue-900",children:p.jsx("p",{children:"Keep a binderΓÇöor a shared digital folderΓÇöwith reports, prescriptions, and insurance letters. Having everything in one place makes approvals and renewals much easier."})})]}),p.jsxs("section",{className:"space-y-4 text-base leading-relaxed text-slate-700 dark:text-slate-200",children:[p.jsx("h2",{className:"text-2xl font-semibold text-slate-900 dark:text-slate-100",children:"Finding Great Providers in Florida"}),p.jsx("p",{children:"Ready to start your search? Begin with the BACB registry to make sure the BCBA is certified. Ask your pediatrician, school ESE team, and other parents for recommendations. DonΓÇÖt forget to explore the Florida Autism Services databaseΓÇöyou can filter by location, insurance, and services."}),p.jsx("p",{children:"When you meet a new provider, bring a list of questions. Ask how often the BCBA will be with your child, whether you can observe sessions, and how they share progress. ItΓÇÖs okay to ask about staff training, background checks, and how they coordinate with other therapists. The best providers welcome your questions because they see you as part of the team."}),p.jsx("p",{children:"Watch for red flags like a BCBA who is rarely around, unclear goals, or staff who seem unsure what to do. If something feels off, speak up. ItΓÇÖs perfectly fine to get a second opinion or switch to another provider."}),p.jsx("p",{children:"Waitlists are common in Florida, especially in smaller towns. Get on several lists, ask about telehealth or hybrid models, and check back often. While you wait, your BCBA may give you early strategies to try at home so you feel productive and prepared."})]}),p.jsxs("section",{className:"space-y-4 text-base leading-relaxed text-slate-700 dark:text-slate-200",children:[p.jsx("h2",{className:"text-2xl font-semibold text-slate-900 dark:text-slate-100",children:"What to Expect"}),p.jsx("p",{children:"During the first months, therapists focus on building a strong relationship with your child. They use play to create trust and start with ΓÇ£quick winΓÇ¥ goals so your child sees success early. YouΓÇÖll receive regular updates that explain what skills were practiced and what comes next."}),p.jsx("p",{children:"Progress doesnΓÇÖt always move in a straight line. Some weeks feel fast, others slower. ThatΓÇÖs normal! Your BCBA studies the data and adjusts teaching methods to keep things moving. If challenging behaviors pop up, the team looks for the cause and teaches safer ways to communicate needsΓÇönever harsh punishments."}),p.jsx("p",{children:"Every six to twelve months, the BCBA reassesses skills, updates goals, and sends reports to insurance. Transition planning is part of the process too. As your child grows, the team helps them try new settings, like school classrooms, clubs, internships, or community outings, so progress continues after therapy hours decrease."}),p.jsx("div",{className:"rounded-xl border-l-4 border-blue-500 bg-blue-50 p-4 text-sm text-blue-900",children:p.jsx("p",{children:"Keep a shared notebook or digital document where therapists and family members add notes. ItΓÇÖs a simple way to spot patterns, remember new words, and plan next steps together."})})]}),p.jsxs("section",{className:"space-y-4 text-base leading-relaxed text-slate-700 dark:text-slate-200",children:[p.jsx("h2",{className:"text-2xl font-semibold text-slate-900 dark:text-slate-100",children:"Parent Involvement"}),p.jsx("p",{children:"Parent involvement isnΓÇÖt optionalΓÇöitΓÇÖs the secret sauce! When families practice strategies between sessions, kids make faster progress. YouΓÇÖll receive parent training where therapists model steps, practice with you, and give gentle feedback until you feel confident."}),p.jsx("p",{children:"The more you practice, the more natural the new skills feel. Your BCBA might provide visual schedules, favorite reward ideas, or simple data sheets. Share what works at home, tell the team about changes (like new medicines or sleep routines), and bring therapy data to school IEP meetings."}),p.jsx("p",{children:"Caring for yourself matters too. Florida has strong caregiver networks like Family Network on Disabilities, Parent to Parent groups, CARD centers, and APD respite programs. Connecting with other parents helps you feel supported and ready for the next challenge."})]})]}),p.jsxs("section",{className:"rounded-3xl border border-slate-200 bg-white p-8 shadow-sm dark:border-slate-700 dark:bg-slate-900",children:[p.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Sources"}),p.jsx("ul",{className:"mt-4 space-y-3 text-sm text-slate-700 dark:text-slate-300",children:[{label:"Behavior Analyst Certification Board (BACB)",href:"https://www.bacb.com/"},{label:"Florida Agency for Persons with Disabilities",href:"https://apd.myflorida.com/"},{label:"TRICARE Autism Care Demonstration",href:"https://tricare.mil/"},{label:"American Speech-Language-Hearing Association",href:"https://www.asha.org/"},{label:"Autism Speaks ΓÇô Florida Resources",href:"https://www.autismspeaks.org/"}].map(e=>p.jsx("li",{children:p.jsxs("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-blue-600 transition hover:text-blue-700 dark:text-blue-300 dark:hover:text-blue-200",children:[p.jsx(O,{className:"h-4 w-4"}),e.label]})},e.href))})]}),p.jsxs("section",{className:"rounded-3xl border border-slate-200 bg-white p-8 shadow-sm dark:border-slate-700 dark:bg-slate-900",children:[p.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Related Articles"}),p.jsx("div",{className:"mt-4 grid gap-4 sm:grid-cols-3",children:t.map(e=>p.jsx("button",{type:"button",onClick:e.onClick,className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-6 text-left text-sm font-semibold text-slate-700 transition hover:border-green-500 hover:bg-green-50 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-200 dark:hover:border-green-400 dark:hover:bg-slate-700",children:e.title},e.title))})]}),p.jsx("section",{className:"rounded-3xl bg-green-600 px-8 py-10 text-white shadow-lg",children:p.jsxs("div",{className:"flex flex-col gap-6 sm:flex-row sm:items-center sm:justify-between",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold",children:"Ready to Find ABA Providers Near You?"}),p.jsx("p",{className:"mt-3 text-sm text-green-100",children:"Search our database of 1,900+ verified ABA providers across Florida."})]}),p.jsx("button",{type:"button",onClick:()=>e("find-providers",{service:"ABA"}),className:"inline-flex items-center gap-2 rounded-full bg-white px-6 py-3 text-sm font-semibold text-green-700 shadow-md transition hover:bg-green-100",children:"Search ABA Providers"})]})}),p.jsx("p",{className:"text-center text-xs text-slate-500 dark:text-slate-400",children:"Last Updated: October 15, 2025"})]})]})})},bt=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},ft=(...e)=>e.filter((e,t,s)=>Boolean(e)&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim(),yt=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};
src\frontend\dist\assets\index-521__UTy.js: */const jt=e.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:r,className:i="",children:l,iconNode:n,...o},d)=>e.createElement("svg",{ref:d,...vt,width:s,height:s,stroke:t,strokeWidth:r?24*Number(a)/Number(s):a,className:ft("lucide",i),...!l&&!yt(o)&&{"aria-hidden":"true"},...o},[...n.map(([t,s])=>e.createElement(t,s)),...Array.isArray(l)?l:[l]])),kt=(t,s)=>{const a=e.forwardRef(({className:a,...r},i)=>{return e.createElement(jt,{ref:i,iconNode:s,className:ft(`lucide-${l=bt(t),l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${t}`,a),...r});var l});return a.displayName=bt(t),a},Nt=kt("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),wt=kt("book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]),At=kt("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),St=kt("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Ct=kt("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Et=kt("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),_t=({onNavigate:e})=>{const t=[{title:"Understanding ABA Therapy",description:null,onClick:()=>e("article",{slug:"understanding-aba-therapy-florida"}),disabled:!1},{title:"Private Insurance Coverage",description:"Coming Soon",onClick:()=>{},disabled:!0},{title:"IEP vs 504 Plans",description:"Coming Soon",onClick:()=>{},disabled:!0}];return p.jsx("div",{className:"bg-slate-50 pb-16 pt-6",children:p.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-6 px-4 sm:px-6 lg:px-8",children:[p.jsxs("nav",{className:"flex flex-wrap items-center gap-2 text-sm text-slate-500",children:[p.jsxs("button",{type:"button",onClick:()=>e("home"),className:"inline-flex items-center gap-1 font-medium text-green-600 transition hover:text-green-700",children:[p.jsx(Nt,{className:"h-3.5 w-3.5"}),"Home"]}),p.jsx("span",{className:"text-slate-400",children:"/"}),p.jsx("button",{type:"button",onClick:()=>e("resources"),className:"font-medium text-green-600 transition hover:text-green-700",children:"Resources"}),p.jsx("span",{className:"text-slate-400",children:"/"}),p.jsx("span",{className:"font-medium text-slate-500",children:"Insurance & Funding"}),p.jsx("span",{className:"text-slate-400",children:"/"}),p.jsx("span",{className:"font-semibold text-slate-700",children:"Florida Medicaid Waiver Guide"})]}),p.jsxs("header",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-r from-sky-600 to-indigo-600 px-6 py-12 text-white shadow-xl sm:px-10",children:[p.jsx("div",{className:"absolute inset-y-0 right-0 w-1/3 bg-white/10 blur-3xl"}),p.jsxs("div",{className:"relative flex flex-col gap-4",children:[p.jsx("span",{className:"inline-flex w-fit items-center gap-2 rounded-full bg-white/20 px-4 py-1 text-xs font-semibold uppercase tracking-wide text-white",children:"Insurance & Funding"}),p.jsx("h1",{className:"text-3xl font-bold leading-tight sm:text-4xl",children:"Florida Medicaid Waiver Guide: Getting Services for Your Child with Autism"}),p.jsxs("p",{className:"flex items-center gap-4 text-sm font-medium text-sky-100",children:[p.jsxs("span",{className:"inline-flex items-center gap-2",children:[p.jsx(wt,{className:"h-4 w-4"}),"7 min read"]}),p.jsxs("span",{className:"inline-flex items-center gap-2",children:[p.jsx(Ct,{className:"h-4 w-4"}),"Updated October 18, 2025"]})]})]})]}),p.jsxs("main",{className:"mx-auto w-full max-w-4xl space-y-12",children:[p.jsxs("aside",{className:"rounded-3xl border border-amber-200 bg-amber-50 p-6 shadow-sm",children:[p.jsx("h2",{className:"mb-3 text-lg font-semibold text-amber-800",children:"Key Takeaways"}),p.jsx("ul",{className:"grid gap-3 text-sm text-amber-900 sm:grid-cols-2",children:["The iBudget Waiver provides funding for services beyond regular Medicaid, from respite care to supported employment.","Eligibility requires an autism or developmental disability diagnosis, Florida residency, and Medicaid qualification.","There is typically a multi-year waitlist, but applying early secures your spot-it's free to apply.","While waiting, families can access regular Medicaid ABA therapy (no cap for kids under 21), Early Steps, and education scholarships.","Once enrolled, a Waiver Support Coordinator helps you create a personalized support plan and choose approved providers."].map(e=>p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx("span",{className:"mt-1 h-2.5 w-2.5 rounded-full bg-amber-500"}),e]},e))})]}),p.jsxs("article",{className:"space-y-12 rounded-3xl border border-slate-200 bg-white p-8 shadow-sm dark:border-slate-700 dark:bg-slate-900",children:[p.jsxs("section",{className:"space-y-4 text-base leading-relaxed text-slate-700 dark:text-slate-200",children:[p.jsx("h2",{className:"text-2xl font-semibold text-slate-900 dark:text-slate-100",children:"What is the Florida Medicaid Waiver?"}),p.jsx("p",{children:"Think of the Medicaid Waiver as a special program that helps families get services their child needs - services that regular Medicaid might not cover or might not cover enough of."}),p.jsxs("p",{children:["In Florida, the main waiver for people with autism and other developmental disabilities is called the"," ",p.jsx("strong",{children:"iBudget Waiver"}),". It's run by the Agency for Persons with Disabilities (APD)."]}),p.jsx("p",{children:"Here's why it matters: The waiver can pay for things like:"}),p.jsxs("ul",{className:"ml-6 list-disc space-y-1 text-slate-700 dark:text-slate-200",children:[p.jsx("li",{children:"ABA therapy beyond basic coverage"}),p.jsx("li",{children:"Respite care (a break for caregivers!)"}),p.jsx("li",{children:"Personal care assistance"}),p.jsx("li",{children:"Residential services"}),p.jsx("li",{children:"Supported employment"}),p.jsx("li",{children:"Life skills coaching"}),p.jsx("li",{children:"Specialized therapies"}),p.jsx("li",{children:"Adaptive equipment"})]}),p.jsxs("p",{children:[p.jsx("strong",{children:"The best part?"})," Once you're enrolled, you get a budget to spend on approved services that fit YOUR family's needs."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"The tough part?"})," There's usually a waitlist. But don't let that stop you from applying! The sooner you get on the list, the sooner your name comes up."]})]}),p.jsxs("section",{className:"space-y-4 text-base leading-relaxed text-slate-700 dark:text-slate-200",children:[p.jsx("h2",{className:"text-2xl font-semibold text-slate-900 dark:text-slate-100",children:"Who Qualifies for the iBudget Waiver?"}),p.jsx("p",{children:"To get on the waiver, your child needs to meet these requirements:"}),p.jsxs("div",{className:"space-y-3 rounded-2xl border border-emerald-200 bg-emerald-50 p-4 text-emerald-900",children:[p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx(St,{className:"mt-1 h-5 w-5 text-emerald-500"}),p.jsxs("div",{children:[p.jsx("p",{className:"font-semibold",children:"Have a qualifying diagnosis:"}),p.jsxs("ul",{className:"ml-5 list-disc space-y-1",children:[p.jsx("li",{children:"Autism Spectrum Disorder"}),p.jsx("li",{children:"Intellectual disability"}),p.jsx("li",{children:"Cerebral palsy"}),p.jsx("li",{children:"Spina bifida"}),p.jsx("li",{children:"Prader-Willi syndrome"}),p.jsx("li",{children:"Or another developmental disability that started before age 18"})]})]})]}),p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx(St,{className:"mt-1 h-5 w-5 text-emerald-500"}),p.jsxs("p",{children:[p.jsx("strong",{children:"Be a Florida resident"})," (proof required)"]})]}),p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx(St,{className:"mt-1 h-5 w-5 text-emerald-500"}),p.jsxs("p",{children:[p.jsx("strong",{children:"Qualify for Medicaid"})," (or be able to once you're on the waiver)"]})]}),p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx(St,{className:"mt-1 h-5 w-5 text-emerald-500"}),p.jsxs("p",{children:[p.jsx("strong",{children:"Need the level of care"})," typically provided in an institution (but you want to stay home!)"]})]})]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Good news:"}),' Most children with autism qualify! The "level of care" requirement sounds scary, but it basically means your child needs significant support with daily activities, behavior, or safety.']})]}),p.jsxs("section",{className:"space-y-4 text-base leading-relaxed text-slate-700 dark:text-slate-200",children:[p.jsx("h2",{className:"text-2xl font-semibold text-slate-900 dark:text-slate-100",children:"The Waitlist: What You Need to Know"}),p.jsxs("p",{children:["Let's be honest - this is the hardest part. Florida's iBudget Waiver has a waitlist that can be ",p.jsx("strong",{children:"several years long"}),". But here's what you should know:"]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("p",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Why is there a waitlist?"}),p.jsx("p",{children:"The state has a limited budget for the program. They can only enroll people as funding becomes available."})]}),p.jsxs("div",{children:[p.jsx("p",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"How long is the wait?"}),p.jsx("p",{children:"It varies by region and your child's needs. Some families wait 2-3 years, others wait longer. Crisis situations may move faster."})]}),p.jsxs("div",{children:[p.jsx("p",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Does it cost money to be on the waitlist?"}),p.jsx("p",{children:"Nope! It's completely free to apply and stay on the list."})]}),p.jsxs("div",{children:[p.jsx("p",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"What happens while you wait?"}),p.jsxs("ul",{className:"ml-6 list-disc space-y-1",children:[p.jsx("li",{children:"You can access regular Medicaid services (which cover ABA therapy!)"}),p.jsx("li",{children:"Use Early Steps if your child is under 3"}),p.jsx("li",{children:"Apply for scholarships like Gardiner or McKay"}),p.jsx("li",{children:"Connect with county-level resources"})]})]})]}),p.jsx("div",{className:"rounded-xl border-l-4 border-indigo-500 bg-indigo-50 p-4 text-sm text-indigo-900",children:p.jsxs("p",{children:[p.jsx("strong",{children:"Pro tip:"})," Apply NOW even if you're not sure you'll need it. Your spot is based on when you applied, so getting on the list early is smart!"]})})]}),p.jsxs("section",{className:"space-y-5 text-base leading-relaxed text-slate-700 dark:text-slate-200",children:[p.jsx("h2",{className:"text-2xl font-semibold text-slate-900 dark:text-slate-100",children:"How to Apply: Step-by-Step"}),p.jsxs("div",{className:"space-y-5",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Step 1: Contact APD"}),p.jsxs("p",{children:["Call the Agency for Persons with Disabilities at ",p.jsx("strong",{children:"(866) APD-CARES"})," [(866) 273-2273]"]}),p.jsxs("p",{children:["Or visit their website: ",p.jsx("strong",{children:"apd.myflorida.com"})]}),p.jsx("p",{children:"Tell them you want to apply for the iBudget Waiver for your child with autism."})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Step 2: Complete the Application"}),p.jsx("p",{children:"APD will send you paperwork (or you can fill it out online). You'll need:"}),p.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[p.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4 dark:border-slate-700 dark:bg-slate-800",children:[p.jsx("p",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Your child's information:"}),p.jsxs("ul",{className:"ml-5 mt-2 list-disc space-y-1",children:[p.jsx("li",{children:"Birth certificate"}),p.jsx("li",{children:"Social Security number"}),p.jsx("li",{children:"Proof of Florida residency (utility bill, lease, etc.)"})]})]}),p.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4 dark:border-slate-700 dark:bg-slate-800",children:[p.jsx("p",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Medical documentation:"}),p.jsxs("ul",{className:"ml-5 mt-2 list-disc space-y-1",children:[p.jsx("li",{children:"Autism diagnosis from a psychologist or doctor"}),p.jsx("li",{children:"Recent evaluation reports"}),p.jsx("li",{children:"List of current medications"}),p.jsx("li",{children:"Medical history"})]})]}),p.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4 dark:border-slate-700 dark:bg-slate-800 sm:col-span-2",children:[p.jsx("p",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Medicaid information:"}),p.jsxs("ul",{className:"ml-5 mt-2 list-disc space-y-1",children:[p.jsx("li",{children:"If your child has Medicaid, provide the ID number"}),p.jsx("li",{children:"If not, APD will help you apply"})]})]})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Step 3: Assessment"}),p.jsx("p",{children:"An APD representative will schedule a time to:"}),p.jsxs("ul",{className:"ml-6 list-disc space-y-1",children:[p.jsx("li",{children:"Meet with your family (often at your home)"}),p.jsx("li",{children:"Ask questions about your child's daily needs"}),p.jsx("li",{children:"Review medical records"}),p.jsx("li",{children:"Determine eligibility"})]}),p.jsx("div",{className:"rounded-xl border-l-4 border-emerald-500 bg-emerald-50 p-4 text-sm text-emerald-900",children:p.jsxs("p",{children:[p.jsx("strong",{children:"This is important!"})," Be honest about the challenges your child faces. This isn't about being negative - it's about making sure they get the right level of support."]})})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Step 4: Get on the Waitlist"}),p.jsx("p",{children:"Once approved, your child is added to the waitlist. You'll get a letter confirming:"}),p.jsxs("ul",{className:"ml-6 list-disc space-y-1",children:[p.jsx("li",{children:"Your waitlist number"}),p.jsx("li",{children:"The date you were added"}),p.jsx("li",{children:"What happens next"})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Step 5: Stay in Touch"}),p.jsxs("p",{children:[p.jsx("strong",{children:"Critical step:"})," APD sends annual renewal forms. If you don't return them, you could lose your spot! Set a reminder to watch for that letter."]}),p.jsx("p",{children:"Also update APD if:"}),p.jsxs("ul",{className:"ml-6 list-disc space-y-1",children:[p.jsx("li",{children:"You move"}),p.jsx("li",{children:"Your phone number changes"}),p.jsx("li",{children:"Your child's needs change significantly"})]})]})]})]}),p.jsxs("section",{className:"space-y-4 text-base leading-relaxed text-slate-700 dark:text-slate-200",children:[p.jsx("h2",{className:"text-2xl font-semibold text-slate-900 dark:text-slate-100",children:"What Services Does the iBudget Cover?"}),p.jsx("p",{children:"Once you're enrolled (off the waitlist!), you can use your budget for:"}),p.jsxs("div",{className:"space-y-5",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Home & Family Support"}),p.jsxs("ul",{className:"ml-6 list-disc space-y-1",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Personal Care Assistance"})," - Help with bathing, dressing, eating, medication"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Respite Care"})," - Temporary care so parents can rest, work, or handle appointments"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"In-Home Support"})," - Someone to help your child practice life skills at home"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Family Training"})," - Teaching you strategies to support your child"]})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Therapy & Development"}),p.jsxs("ul",{className:"ml-6 list-disc space-y-1",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"ABA Therapy"})," - Additional hours beyond what regular Medicaid covers"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Specialized Therapies"})," - Speech, OT, PT when needed"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Behavior Support"})," - BCBA consultation and planning"]})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Living Independently"}),p.jsxs("ul",{className:"ml-6 list-disc space-y-1",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Supported Living"})," - Assistance for teens/adults who want to live on their own"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Residential Services"})," - Group homes or supported living arrangements"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Environmental Modifications"})," - Home changes for safety or accessibility"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Adaptive Equipment"})," - Communication devices, sensory tools, mobility aids"]})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Community & Employment"}),p.jsxs("ul",{className:"ml-6 list-disc space-y-1",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Supported Employment"})," - Job coaching and workplace support"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Personal Supports"})," - Help participating in community activities"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Transportation"})," - Getting to work, therapy, or activities"]})]})]})]}),p.jsxs("p",{children:[p.jsx("strong",{children:"The Budget Amount:"})," Your iBudget amount is based on your child's needs. It can range from ",p.jsx("strong",{children:"$15,000 to over $100,000 per year"})," depending on the support tier."]}),p.jsx("p",{children:"APD categorizes needs into tiers (Tier 1 is highest need, Tier 4 is lowest). Your budget matches your tier."})]}),p.jsxs("section",{className:"space-y-4 text-base leading-relaxed text-slate-700 dark:text-slate-200",children:[p.jsx("h2",{className:"text-2xl font-semibold text-slate-900 dark:text-slate-100",children:"How to Use Your iBudget"}),p.jsxs("p",{children:["Once enrolled, you'll work with a ",p.jsx("strong",{children:"Waiver Support Coordinator"}),"-think of them as your guide!"]}),p.jsxs("div",{className:"space-y-5",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Step 1: Create a Support Plan"}),p.jsx("p",{children:"Your coordinator helps you:"}),p.jsxs("ul",{className:"ml-6 list-disc space-y-1",children:[p.jsx("li",{children:"Choose which services you need"}),p.jsx("li",{children:"Find approved providers"}),p.jsx("li",{children:"Budget your funds wisely"}),p.jsx("li",{children:"Set goals for your child"})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Step 2: Hire Providers"}),p.jsx("p",{children:"You can hire:"}),p.jsxs("ul",{className:"ml-6 list-disc space-y-1",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Agency providers"})," - Companies that employ therapists and caregivers"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Individual providers"})," - People you hire directly (including family members in some cases!)"]})]}),p.jsx("p",{children:"All providers must be approved by APD."})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Step 3: Track Your Budget"}),p.jsx("p",{children:"Your coordinator monitors spending. You'll get regular reports showing:"}),p.jsxs("ul",{className:"ml-6 list-disc space-y-1",children:[p.jsx("li",{children:"How much of your budget you've used"}),p.jsx("li",{children:"What services were provided"}),p.jsx("li",{children:"How much remains"})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Step 4: Annual Reviews"}),p.jsx("p",{children:"Every year, APD reassesses your child's needs. Your budget might:"}),p.jsxs("ul",{className:"ml-6 list-disc space-y-1",children:[p.jsx("li",{children:"Stay the same"}),p.jsx("li",{children:"Increase if needs have grown"}),p.jsx("li",{children:"Decrease if needs have lessened"})]})]})]})]}),p.jsxs("section",{className:"space-y-4 text-base leading-relaxed text-slate-700 dark:text-slate-200",children:[p.jsx("h2",{className:"text-2xl font-semibold text-slate-900 dark:text-slate-100",children:"While You're on the Waitlist"}),p.jsx("p",{children:"Don't just wait - use this time to access other supports!"}),p.jsxs("div",{className:"space-y-5",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Regular Medicaid Services"}),p.jsx("p",{children:"Florida Medicaid covers:"}),p.jsxs("ul",{className:"ml-6 list-disc space-y-1",children:[p.jsx("li",{children:"ABA therapy (no annual cap for kids under 21!)"}),p.jsx("li",{children:"Speech therapy"}),p.jsx("li",{children:"Occupational therapy"}),p.jsx("li",{children:"Physical therapy"}),p.jsx("li",{children:"Doctor visits and hospitalizations"}),p.jsx("li",{children:"Mental health services"}),p.jsx("li",{children:"Prescription medications"})]}),p.jsx("p",{children:"These services are available NOW while you wait for the waiver."})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Early Steps (Ages 0-3)"}),p.jsx("p",{children:"Florida's Early Steps program provides free:"}),p.jsxs("ul",{className:"ml-6 list-disc space-y-1",children:[p.jsx("li",{children:"Developmental screenings"}),p.jsx("li",{children:"Evaluations"}),p.jsx("li",{children:"Therapy services"}),p.jsx("li",{children:"Family support"})]}),p.jsxs("p",{children:["Call ",p.jsx("strong",{children:"(800) 218-0001"})," to get started."]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Education Scholarships"}),p.jsxs("ul",{className:"ml-6 list-disc space-y-1",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Gardiner Scholarship"})," (now Family Empowerment Scholarship) - Up to $10,000+ for private school or therapy"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"McKay Scholarship"})," - Funding for private schools for students with IEPs"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Hope Scholarship"})," - Additional option for students facing bullying"]})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"County Resources"}),p.jsx("p",{children:"Many Florida counties offer:"}),p.jsxs("ul",{className:"ml-6 list-disc space-y-1",children:[p.jsx("li",{children:"Recreation programs for kids with disabilities"}),p.jsx("li",{children:"Parent support groups"}),p.jsx("li",{children:"Respite vouchers"}),p.jsx("li",{children:"Equipment lending libraries"})]}),p.jsx("p",{children:"Check with your county's Parks & Recreation or Human Services department."})]})]})]}),p.jsxs("section",{className:"space-y-4 text-base leading-relaxed text-slate-700 dark:text-slate-200",children:[p.jsx("h2",{className:"text-2xl font-semibold text-slate-900 dark:text-slate-100",children:"Common Questions"}),p.jsxs("dl",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("dt",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Can my child have both regular Medicaid AND the waiver?"}),p.jsx("dd",{children:"Yes! The waiver is an addition to regular Medicaid, not a replacement."})]}),p.jsxs("div",{children:[p.jsx("dt",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"What if my child doesn't have Medicaid?"}),p.jsx("dd",{children:"APD can help you apply. Many families qualify through special Medicaid pathways for people with disabilities."})]}),p.jsxs("div",{children:[p.jsx("dt",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Can we hire family members as caregivers?"}),p.jsx("dd",{children:"Sometimes! It depends on the service and your situation. Ask your waiver coordinator."})]}),p.jsxs("div",{children:[p.jsx("dt",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"What if we move to a different county in Florida?"}),p.jsx("dd",{children:"Your waiver follows you! Just notify APD of your new address."})]}),p.jsxs("div",{children:[p.jsx("dt",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Can adults get the waiver?"}),p.jsx("dd",{children:"Yes! The iBudget serves people of all ages, not just children."})]}),p.jsxs("div",{children:[p.jsx("dt",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"What happens when my child turns 18?"}),p.jsx("dd",{children:"Services continue! You'll just need to address guardianship or supported decision-making if needed."})]})]})]}),p.jsxs("section",{className:"space-y-4 text-base leading-relaxed text-slate-700 dark:text-slate-200",children:[p.jsx("h2",{className:"text-2xl font-semibold text-slate-900 dark:text-slate-100",children:"Red Flags & How to Advocate"}),p.jsx("p",{children:p.jsx("strong",{children:"Warning signs something's wrong:"})}),p.jsxs("ul",{className:"space-y-3",children:[p.jsxs("li",{className:"flex items-start gap-3 rounded-2xl border border-amber-200 bg-amber-50 p-4 text-amber-900",children:[p.jsx(At,{className:"mt-1 h-5 w-5 text-amber-500"}),"Your coordinator never responds"]}),p.jsxs("li",{className:"flex items-start gap-3 rounded-2xl border border-amber-200 bg-amber-50 p-4 text-amber-900",children:[p.jsx(At,{className:"mt-1 h-5 w-5 text-amber-500"}),"Services aren't being provided as planned"]}),p.jsxs("li",{className:"flex items-start gap-3 rounded-2xl border border-amber-200 bg-amber-50 p-4 text-amber-900",children:[p.jsx(At,{className:"mt-1 h-5 w-5 text-amber-500"}),"Your budget doesn't match your child's needs"]}),p.jsxs("li",{className:"flex items-start gap-3 rounded-2xl border border-amber-200 bg-amber-50 p-4 text-amber-900",children:[p.jsx(At,{className:"mt-1 h-5 w-5 text-amber-500"}),"Providers are unreliable or unprofessional"]})]}),p.jsx("p",{children:p.jsx("strong",{children:"What to do:"})}),p.jsxs("ol",{className:"ml-6 list-decimal space-y-2",children:[p.jsx("li",{children:"Document everything in writing"}),p.jsx("li",{children:"Contact your coordinator's supervisor"}),p.jsxs("li",{children:["File a complaint with APD: ",p.jsx("strong",{children:"(866) APD-CARES"})]}),p.jsxs("li",{children:["Reach out to:",p.jsxs("ul",{className:"ml-6 mt-1 list-disc space-y-1",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Family Network on Disabilities:"})," (800) 825-5736"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Disability Rights Florida:"})," (800) 342-0823"]})]})]})]}),p.jsx("p",{children:"You have rights! Don't be afraid to speak up."})]})]}),p.jsxs("section",{className:"rounded-3xl border border-slate-200 bg-white p-8 shadow-sm dark:border-slate-700 dark:bg-slate-900",children:[p.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Sources"}),p.jsx("ul",{className:"mt-4 space-y-3 text-sm text-slate-700 dark:text-slate-300",children:[{label:"Florida Agency for Persons with Disabilities (APD)",href:"https://apd.myflorida.com/"},{label:"Florida Medicaid - myflfamilies.com",href:"https://www.myflfamilies.com/"},{label:"Early Steps Florida - floridahealth.gov",href:"https://www.floridahealth.gov/"},{label:"Family Network on Disabilities - fndfl.org",href:"https://fndfl.org/"},{label:"Disability Rights Florida - disabilityrightsflorida.org",href:"https://disabilityrightsflorida.org/"}].map(e=>p.jsx("li",{children:p.jsxs("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-blue-600 transition hover:text-blue-700 dark:text-blue-300 dark:hover:text-blue-200",children:[p.jsx(Et,{className:"h-4 w-4"}),e.label]})},e.href))})]}),p.jsxs("section",{className:"rounded-3xl border border-slate-200 bg-white p-8 shadow-sm dark:border-slate-700 dark:bg-slate-900",children:[p.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Related Articles"}),p.jsx("div",{className:"mt-4 grid gap-4 sm:grid-cols-3",children:t.map(e=>p.jsxs("button",{type:"button",onClick:e.onClick,disabled:e.disabled,className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-6 text-left text-sm font-semibold text-slate-700 transition hover:border-green-500 hover:bg-green-50 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-200 dark:hover:border-green-400 dark:hover:bg-slate-700 "+(e.disabled?"cursor-not-allowed opacity-60 hover:border-slate-200 hover:bg-slate-50 dark:hover:border-slate-700 dark:hover:bg-slate-800":""),children:[p.jsx("span",{children:e.title}),e.description&&p.jsx("p",{className:"mt-2 text-xs font-normal text-slate-500 dark:text-slate-400",children:e.description})]},e.title))})]}),p.jsx("section",{className:"rounded-3xl bg-gradient-to-r from-purple-600 to-purple-700 px-8 py-10 text-white shadow-lg",children:p.jsxs("div",{className:"flex flex-col gap-6 sm:flex-row sm:items-center sm:justify-between",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold",children:"Need Help with Your Application?"}),p.jsx("p",{className:"mt-3 text-sm text-purple-100",children:"Connect with Florida parent support organizations for FREE assistance with waiver applications and advocacy."})]}),p.jsx("button",{type:"button",onClick:()=>e("find-providers"),className:"inline-flex items-center gap-2 rounded-full bg-white px-6 py-3 text-sm font-semibold text-purple-700 shadow-md transition hover:bg-purple-100",children:"Find Support Organizations"})]})}),p.jsx("p",{className:"text-center text-xs text-slate-500 dark:text-slate-400",children:"Last Updated: October 18, 2025"})]})]})})};
src\frontend\dist\assets\index-521__UTy.js: */function Rt(){const[t,s]=e.useState("home"),[a,r]=e.useState(""),[i,l]=e.useState(null);e.useEffect(()=>{pt("Organization"),pt("WebSite")},[]),e.useEffect(()=>{const e=e=>{e.state&&e.state.page?(s(e.state.page),e.state.data&&l(e.state.data)):s("home")};return window.addEventListener("popstate",e),window.history.state||window.history.replaceState({page:"home"},"","/"),()=>window.removeEventListener("popstate",e)},[]),e.useEffect(()=>{switch(window.scrollTo({top:0,behavior:"smooth"}),t){case"home":xt({title:"Home",description:"Find trusted autism service providers, resources, and support across Florida. Comprehensive directory of verified ABA therapy, speech therapy, occupational therapy, and more.",keywords:["Florida autism services","autism support Florida","ASD therapies Florida","autism providers","special needs services Florida"],url:"https://floridaautismservices.com",canonicalUrl:"https://floridaautismservices.com"});break;case"providers":xt({title:"Find Providers",description:"Search verified autism service providers across Florida. Filter by location, service type, and setting. Find ABA, speech, occupational therapy, and more.",keywords:["autism providers Florida","ABA therapy Florida","speech therapy autism","occupational therapy ASD","autism specialists"],url:"https://floridaautismservices.com/providers",canonicalUrl:"https://floridaautismservices.com/providers"});break;case"churches":xt({title:"Faith-Based Support",description:"Find welcoming churches and faith-based organizations in Florida offering autism support programs, sensory-friendly services, and inclusive communities.",keywords:["autism friendly churches Florida","sensory-friendly church","faith-based autism support","special needs ministry"],url:"https://floridaautismservices.com/churches",canonicalUrl:"https://floridaautismservices.com/churches"});break;case"resources":xt({title:"Educational Resources",description:"Learn about autism therapies, insurance, education rights, and more. Comprehensive guides and articles for families navigating autism services in Florida.",keywords:["autism resources Florida","IEP Florida","autism insurance coverage","early intervention Florida","autism education"],url:"https://floridaautismservices.com/resources",canonicalUrl:"https://floridaautismservices.com/resources"});break;case"article":{const e=(null==i?void 0:i.slug)||"";xt({title:{"understanding-aba-therapy-florida":"Understanding ABA Therapy in Florida","florida-medicaid-waiver-autism-guide":"Florida Medicaid Waiver Guide","iep-vs-504-plan-comparison":"IEP vs 504 Plan Comparison","speech-therapy-autism-expectations":"Speech Therapy for Autism"}[e]||"Resource Article",description:"In-depth resource article for Florida Autism Services families.",url:`https://floridaautismservices.com/resources/${e}`,canonicalUrl:`https://floridaautismservices.com/resources/${e}`});break}case"contact":xt({title:"Contact Us",description:"Get in touch with Florida Autism Services. We're here to help you find the support and resources you need.",url:"https://floridaautismservices.com/contact",canonicalUrl:"https://floridaautismservices.com/contact"});break;case"submit":xt({title:"Submit a Provider",description:"Help other families by adding a trusted autism service provider to our directory. All submissions are reviewed and verified.",url:"https://floridaautismservices.com/submit",canonicalUrl:"https://floridaautismservices.com/submit"});break;case"about":xt({title:"About Us",description:"Learn about our mission to connect families with trusted autism services across Florida. Discover our vetting process and values.",url:"https://floridaautismservices.com/about",canonicalUrl:"https://floridaautismservices.com/about"})}},[t,i]);const n=(e,t)=>{s(e);const a={page:e,data:t},i="home"===e?"/":`/${e}`;if(window.history.pushState(a,"",i),"string"==typeof t)return r(t),void l(null);if(t&&"object"==typeof t){const e=t;return l(e),void(e.query&&"string"==typeof e.query?r(e.query):r(""))}r(""),l(null)};return p.jsx(f,{children:p.jsxs("div",{className:"flex min-h-screen flex-col",children:[p.jsx(ce,{currentPage:t,onNavigate:n}),p.jsx("main",{className:"mx-auto w-full flex-1 max-w-7xl px-4 py-8 sm:px-6 lg:px-8",children:(()=>{switch(t){case"home":return p.jsx(me,{onNavigate:n});case"providers":return p.jsx(lt,{initialSearch:a});case"churches":return p.jsx(nt,{});case"resources":return p.jsx(ct,{onNavigate:n});case"article":switch(null==i?void 0:i.slug){case"understanding-aba-therapy-florida":return p.jsx(gt,{onNavigate:n});case"florida-medicaid-waiver-autism-guide":return p.jsx(_t,{onNavigate:n});case"iep-vs-504-plan-comparison":case"speech-therapy-autism-expectations":return p.jsxs("div",{className:"mx-auto max-w-4xl p-8",children:[p.jsx("h1",{className:"mb-4 text-3xl font-bold text-slate-900 dark:text-slate-100",children:"Article Coming Soon"}),p.jsx("p",{className:"mb-6 text-slate-600 dark:text-slate-300",children:"This article is currently being developed. Check back shortly for a full guide."}),p.jsx("button",{type:"button",onClick:()=>n("resources"),className:"rounded-lg bg-green-600 px-6 py-2 text-sm font-semibold text-white shadow transition hover:bg-green-700",children:"ΓåÉ Back to Resources"})]});default:return p.jsxs("div",{className:"mx-auto max-w-4xl p-8",children:[p.jsx("h1",{className:"mb-4 text-3xl font-bold text-slate-900 dark:text-slate-100",children:"Article Not Found"}),p.jsx("p",{className:"mb-6 text-slate-600 dark:text-slate-300",children:"The article you're looking for doesn't exist or has been moved."}),p.jsx("button",{type:"button",onClick:()=>n("resources"),className:"rounded-lg bg-green-600 px-6 py-2 text-sm font-semibold text-white shadow transition hover:bg-green-700",children:"ΓåÉ Back to Resources"})]})}case"contact":return p.jsx(ht,{});case"submit":return p.jsx(ut,{});case"about":return p.jsx(mt,{});default:return p.jsx(me,{onNavigate:n})}})()}),p.jsx(he,{onNavigate:n})]})})}x(document.getElementById("root")).render(p.jsx(e.StrictMode,{children:p.jsx(Rt,{})}));
src\frontend\dist\assets\supabase-DIVpvRwM.js:import{g as e,c as t}from"./vendor-DEgpx9a4.js";const r={},s=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),s=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));n=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in r)return;r[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,s&&i.setAttribute("nonce",s),document.head.appendChild(i),t?new Promise((t,r)=>{i.addEventListener("load",t),i.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})};class n extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class i extends n{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class o extends n{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class a extends n{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var l,c;(c=l||(l={})).Any="any",c.ApNortheast1="ap-northeast-1",c.ApNortheast2="ap-northeast-2",c.ApSouth1="ap-south-1",c.ApSoutheast1="ap-southeast-1",c.ApSoutheast2="ap-southeast-2",c.CaCentral1="ca-central-1",c.EuCentral1="eu-central-1",c.EuWest1="eu-west-1",c.EuWest2="eu-west-2",c.EuWest3="eu-west-3",c.SaEast1="sa-east-1",c.UsEast1="us-east-1",c.UsWest1="us-west-1",c.UsWest2="us-west-2";var h=function(e,t,r,s){return new(r||(r=Promise))(function(n,i){function o(e){try{l(s.next(e))}catch(t){i(t)}}function a(e){try{l(s.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};class u{constructor(e,{headers:t={},customFetch:r,region:n=l.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>s(async()=>{const{default:e}=await Promise.resolve().then(()=>E);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)})(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return h(this,arguments,void 0,function*(e,t={}){var r;try{const{headers:s,method:n,body:l,signal:c}=t;let h={},{region:u}=t;u||(u=this.region);const d=new URL(`${this.url}/${e}`);let f;u&&"any"!==u&&(h["x-region"]=u,d.searchParams.set("forceFunctionRegion",u)),l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&("undefined"!=typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",f=l):"string"==typeof l?(h["Content-Type"]="text/plain",f=l):"undefined"!=typeof FormData&&l instanceof FormData?f=l:(h["Content-Type"]="application/json",f=JSON.stringify(l)));const p=yield this.fetch(d.toString(),{method:n||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),s),body:f,signal:c}).catch(e=>{if("AbortError"===e.name)throw e;throw new i(e)}),g=p.headers.get("x-relay-error");if(g&&"true"===g)throw new o(p);if(!p.ok)throw new a(p);let w,y=(null!==(r=p.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return w="application/json"===y?yield p.json():"application/octet-stream"===y?yield p.blob():"text/event-stream"===y?p:"multipart/form-data"===y?yield p.formData():yield p.text(),{data:w,error:null,response:p}}catch(s){return s instanceof Error&&"AbortError"===s.name?{data:null,error:new i(s)}:{data:null,error:s,response:s instanceof a||s instanceof o?s.context:void 0}}})}}var d={},f={},p={},g={},w={},y={},v=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();const m=v.fetch,b=v.fetch.bind(v),_=v.Headers,k=v.Request,S=v.Response,E=Object.freeze(Object.defineProperty({__proto__:null,Headers:_,Request:k,Response:S,default:b,fetch:m},Symbol.toStringTag,{value:"Module"})),T=e(E);var O={};Object.defineProperty(O,"__esModule",{value:!0});let j=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};O.default=j;var P=t&&t.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(y,"__esModule",{value:!0});const A=P(T),R=P(O);y.default=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(r=e.isMaybeSingle)&&void 0!==r&&r,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=A.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,r,s,n;let i=null,o=null,a=null,l=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const r=await e.text();""===r||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?r:JSON.parse(r))}const n=null===(r=this.headers.get("Prefer"))||void 0===r?void 0:r.match(/count=(exact|planned|estimated)/),h=null===(s=e.headers.get("content-range"))||void 0===s?void 0:s.split("/");n&&h&&h.length>1&&(a=parseInt(h[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(i={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,a=null,l=406,c="Not Acceptable"):o=1===o.length?o[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(o=[],i=null,l=200,c="OK")}catch(h){404===e.status&&""===t?(l=204,c="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(n=null==i?void 0:i.details)||void 0===n?void 0:n.includes("0 rows"))&&(i=null,l=200,c="OK"),i&&this.shouldThrowOnError)throw new R.default(i)}return{error:i,data:o,count:a,status:l,statusText:c}});return this.shouldThrowOnError||(r=r.catch(e=>{var t,r,s;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(r=null==e?void 0:e.stack)&&void 0!==r?r:""}`,hint:"",code:`${null!==(s=null==e?void 0:e.code)&&void 0!==s?s:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}};var I=t&&t.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(w,"__esModule",{value:!0});const $=I(y);let C=class extends $.default{select(e){let t=!1;const r=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:n=s}={}){const i=n?`${n}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const s=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:s=r}={}){const n=void 0===s?"offset":`${s}.offset`,i=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(i,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:n=!1,format:i="text"}={}){var o;const a=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,n?"wal":null].filter(Boolean).join("|"),l=null!==(o=this.headers.get("Accept"))&&void 0!==o?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${a};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};w.default=C;var x=t&&t.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(g,"__esModule",{value:!0});const U=x(w);let N=class extends U.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let n="";"plain"===s?n="pl":"phrase"===s?n="ph":"websearch"===s&&(n="w");const i=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${n}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};g.default=N;var L=t&&t.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(p,"__esModule",{value:!0});const D=L(g);p.default=class{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=s}select(e,t){const{head:r=!1,count:s}=null!=t?t:{},n=r?"HEAD":"GET";let i=!1;const o=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e)).join("");return this.url.searchParams.set("select",o),s&&this.headers.append("Prefer",`count=${s}`),new D.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var s;if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new D.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:n=!0}={}){var i;if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),void 0!==t&&this.url.searchParams.set("on_conflict",t),s&&this.headers.append("Prefer",`count=${s}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new D.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}update(e,{count:t}={}){var r;return t&&this.headers.append("Prefer",`count=${t}`),new D.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}delete({count:e}={}){var t;return e&&this.headers.append("Prefer",`count=${e}`),new D.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}};var q=t&&t.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(f,"__esModule",{value:!0});const B=q(p),W=q(g);f.default=class e{constructor(e,{headers:t={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new B.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:s=!1,count:n}={}){var i;let o;const a=new URL(`${this.url}/rpc/${e}`);let l;r||s?(o=r?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{a.searchParams.append(e,t)})):(o="POST",l=t);const c=new Headers(this.headers);return n&&c.set("Prefer",`count=${n}`),new W.default({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}};var K=t&&t.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(d,"__esModule",{value:!0}),d.PostgrestError=d.PostgrestBuilder=d.PostgrestTransformBuilder=d.PostgrestFilterBuilder=d.PostgrestQueryBuilder=d.PostgrestClient=void 0;const M=K(f);d.PostgrestClient=M.default;const F=K(p);d.PostgrestQueryBuilder=F.default;const H=K(g);d.PostgrestFilterBuilder=H.default;const J=K(w);d.PostgrestTransformBuilder=J.default;const z=K(y);d.PostgrestBuilder=z.default;const G=K(O);d.PostgrestError=G.default;var V=d.default={PostgrestClient:M.default,PostgrestQueryBuilder:F.default,PostgrestFilterBuilder:H.default,PostgrestTransformBuilder:J.default,PostgrestBuilder:z.default,PostgrestError:G.default};const{PostgrestClient:Y,PostgrestQueryBuilder:Q,PostgrestFilterBuilder:X,PostgrestTransformBuilder:Z,PostgrestBuilder:ee,PostgrestError:te}=V;class re{static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process){const e=process.versions;if(e&&e.node){const t=e.node,r=parseInt(t.replace(/^v/,"").split(".")[0]);return r>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}}const se=1e4;var ne,ie,oe,ae,le,ce,he,ue,de,fe,pe;(ie=ne||(ne={}))[ie.connecting=0]="connecting",ie[ie.open=1]="open",ie[ie.closing=2]="closing",ie[ie.closed=3]="closed",(ae=oe||(oe={})).closed="closed",ae.errored="errored",ae.joined="joined",ae.joining="joining",ae.leaving="leaving",(ce=le||(le={})).close="phx_close",ce.error="phx_error",ce.join="phx_join",ce.reply="phx_reply",ce.leave="phx_leave",ce.access_token="access_token",(he||(he={})).websocket="websocket",(de=ue||(ue={})).Connecting="connecting",de.Open="open",de.Closing="closing",de.Closed="closed";class ge{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),n=t.getUint8(2);let i=this.HEADER_LENGTH+2;const o=r.decode(e.slice(i,i+s));i+=s;const a=r.decode(e.slice(i,i+n));i+=n;return{ref:null,topic:o,event:a,payload:JSON.parse(r.decode(e.slice(i,e.byteLength)))}}}class we{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(pe=fe||(fe={})).abstime="abstime",pe.bool="bool",pe.date="date",pe.daterange="daterange",pe.float4="float4",pe.float8="float8",pe.int2="int2",pe.int4="int4",pe.int4range="int4range",pe.int8="int8",pe.int8range="int8range",pe.json="json",pe.jsonb="jsonb",pe.money="money",pe.numeric="numeric",pe.oid="oid",pe.reltime="reltime",pe.text="text",pe.time="time",pe.timestamp="timestamp",pe.timestamptz="timestamptz",pe.timetz="timetz",pe.tsrange="tsrange",pe.tstzrange="tstzrange";const ye=(e,t,r={})=>{var s;const n=null!==(s=r.skipTypes)&&void 0!==s?s:[];return t?Object.keys(t).reduce((r,s)=>(r[s]=ve(s,e,t,n),r),{}):{}},ve=(e,t,r,s)=>{const n=t.find(t=>t.name===e),i=null==n?void 0:n.type,o=r[e];return i&&!s.includes(i)?me(i,o):be(o)},me=(e,t)=>{if("_"===e.charAt(0)){const r=e.slice(1,e.length);return Ee(t,r)}switch(e){case fe.bool:return _e(t);case fe.float4:case fe.float8:case fe.int2:case fe.int4:case fe.int8:case fe.numeric:case fe.oid:return ke(t);case fe.json:case fe.jsonb:return Se(t);case fe.timestamp:return Te(t);case fe.abstime:case fe.date:case fe.daterange:case fe.int4range:case fe.int8range:case fe.money:case fe.reltime:case fe.text:case fe.time:case fe.timestamptz:case fe.timetz:case fe.tsrange:case fe.tstzrange:default:return be(t)}},be=e=>e,_e=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ke=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Se=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Ee=(e,t)=>{if("string"!=typeof e)return e;const r=e.length-1,s=e[r];if("{"===e[0]&&"}"===s){let s;const i=e.slice(1,r);try{s=JSON.parse("["+i+"]")}catch(n){s=i?i.split(","):[]}return s.map(e=>me(t,e))}return e},Te=e=>"string"==typeof e?e.replace(" ","T"):e,Oe=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class je{constructor(e,t,r={},s=1e4){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Pe,Ae,Re,Ie,$e,Ce,xe,Ue;(Ae=Pe||(Pe={})).SYNC="sync",Ae.JOIN="join",Ae.LEAVE="leave";class Ne{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{const{onJoin:t,onLeave:r,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ne.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=Ne.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],s()}),this.channel._on(r.diff,{},e=>{const{onJoin:t,onLeave:r,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=Ne.syncDiff(this.state,e,t,r),s())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const n=this.cloneDeep(e),i=this.transformState(t),o={},a={};return this.map(n,(e,t)=>{i[e]||(a[e]=t)}),this.map(i,(e,t)=>{const r=n[e];if(r){const s=t.map(e=>e.presence_ref),n=r.map(e=>e.presence_ref),i=t.filter(e=>n.indexOf(e.presence_ref)<0),l=r.filter(e=>s.indexOf(e.presence_ref)<0);i.length>0&&(o[e]=i),l.length>0&&(a[e]=l)}else o[e]=t}),this.syncDiff(n,{joins:o,leaves:a},r,s)}static syncDiff(e,t,r,s){const{joins:n,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(n,(t,s)=>{var n;const i=null!==(n=e[t])&&void 0!==n?n:[];if(e[t]=this.cloneDeep(s),i.length>0){const r=e[t].map(e=>e.presence_ref),s=i.filter(e=>r.indexOf(e.presence_ref)<0);e[t].unshift(...s)}r(t,i,s)}),this.map(i,(t,r)=>{let n=e[t];if(!n)return;const i=r.map(e=>e.presence_ref);n=n.filter(e=>i.indexOf(e.presence_ref)<0),e[t]=n,s(t,n,r),0===n.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return t[r]="metas"in s?s.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(Ie=Re||(Re={})).ALL="*",Ie.INSERT="INSERT",Ie.UPDATE="UPDATE",Ie.DELETE="DELETE",(Ce=$e||($e={})).BROADCAST="broadcast",Ce.PRESENCE="presence",Ce.POSTGRES_CHANGES="postgres_changes",Ce.SYSTEM="system",(Ue=xe||(xe={})).SUBSCRIBED="SUBSCRIBED",Ue.TIMED_OUT="TIMED_OUT",Ue.CLOSED="CLOSED",Ue.CHANNEL_ERROR="CHANNEL_ERROR";class Le{constructor(e,t={config:{}},r){var s,n;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=oe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new je(this,le.join,this.params,this.timeout),this.rejoinTimer=new we(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=oe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=oe.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=oe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=oe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=oe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(le.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new Ne(this),this.broadcastEndpointURL=Oe(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null===(n=null===(s=this.params.config)||void 0===s?void 0:s.broadcast)||void 0===n?void 0:n.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,s,n;if(this.socket.isConnected()||this.socket.connect(),this.state==oe.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params,l=null!==(s=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map(e=>e.filter))&&void 0!==s?s:[],c=!!this.bindings[$e.PRESENCE]&&this.bindings[$e.PRESENCE].length>0||!0===(null===(n=this.params.config.presence)||void 0===n?void 0:n.enabled),h={},u={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:c}),postgres_changes:l,private:a};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(xe.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(xe.CLOSED)),this.updateJoinPayload(Object.assign({config:u},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var r;if(this.socket.setAuth(),void 0!==t){const s=this.bindings.postgres_changes,n=null!==(r=null==s?void 0:s.length)&&void 0!==r?r:0,i=[];for(let r=0;r<n;r++){const n=s[r],{filter:{event:o,schema:a,table:l,filter:c}}=n,h=t&&t[r];if(!h||h.event!==o||h.schema!==a||h.table!==l||h.filter!==c)return this.unsubscribe(),this.state=oe.errored,void(null==e||e(xe.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));i.push(Object.assign(Object.assign({},n),{id:h.id}))}return this.bindings.postgres_changes=i,void(e&&e(xe.SUBSCRIBED))}null==e||e(xe.SUBSCRIBED)}).receive("error",t=>{this.state=oe.errored,null==e||e(xe.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(xe.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===oe.joined&&e===$e.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e,t={}){var r,s;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var s,n,i;const o=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(i=null===(n=null===(s=this.params)||void 0===s?void 0:s.config)||void 0===n?void 0:n.broadcast)||void 0===i?void 0:i.ack)||r("ok"),o.receive("ok",()=>r("ok")),o.receive("error",()=>r("error")),o.receive("timeout",()=>r("timed out"))});{const{event:i,payload:o}=e,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,a,null!==(r=t.timeout)&&void 0!==r?r:this.timeout);return await(null===(s=e.body)||void 0===s?void 0:s.cancel()),e.ok?"ok":"error"}catch(n){return"AbortError"===n.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=oe.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(le.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new je(this,le.leave,{},e),r.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{null==r||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=oe.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const s=new AbortController,n=setTimeout(()=>s.abort(),r),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(n),i}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new je(this,e,t,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,n;const i=e.toLocaleLowerCase(),{close:o,error:a,leave:l,join:c}=le;if(r&&[o,a,l,c].indexOf(i)>=0&&r!==this._joinRef())return;let h=this._onMessage(i,t,r);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?null===(s=this.bindings.postgres_changes)||void 0===s||s.filter(e=>{var t,r,s;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(s=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===s?void 0:s.toLocaleLowerCase())===i}).map(e=>e.callback(h,r)):null===(n=this.bindings[i])||void 0===n||n.filter(e=>{var r,s,n,o,a,l;if(["broadcast","presence","postgres_changes"].includes(i)){if("id"in e){const i=e.id,o=null===(r=e.filter)||void 0===r?void 0:r.event;return i&&(null===(s=t.ids)||void 0===s?void 0:s.includes(i))&&("*"===o||(null==o?void 0:o.toLocaleLowerCase())===(null===(n=t.data)||void 0===n?void 0:n.type.toLocaleLowerCase()))}{const r=null===(a=null===(o=null==e?void 0:e.filter)||void 0===o?void 0:o.event)||void 0===a?void 0:a.toLocaleLowerCase();return"*"===r||r===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===i}).map(e=>{if("object"==typeof h&&"ids"in h){const e=h.data,{schema:t,table:r,commit_timestamp:s,type:n,errors:i}=e,o={schema:t,table:r,commit_timestamp:s,eventType:n,new:{},old:{},errors:i};h=Object.assign(Object.assign({},o),this._getPayloadRecords(e))}e.callback(h,r)})}_isClosed(){return this.state===oe.closed}_isJoined(){return this.state===oe.joined}_isJoining(){return this.state===oe.joining}_isLeaving(){return this.state===oe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),n={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(n):this.bindings[s]=[n],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(e=>{var s;return!((null===(s=e.type)||void 0===s?void 0:s.toLocaleLowerCase())===r&&Le.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(le.close,{},e)}_onError(e){this._on(le.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=oe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=ye(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=ye(e.columns,e.old_record)),t}}const De=()=>{},qe=25e3,Be=10,We=100,Ke=[1e3,2e3,5e3,1e4];class Me{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=se,this.transport=null,this.heartbeatIntervalMs=qe,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=De,this.ref=0,this.reconnectTimer=null,this.logger=De,this.conn=null,this.sendBuffer=[],this.serializer=new ge,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>s(async()=>{const{default:e}=await Promise.resolve().then(()=>E);return{default:e}},void 0).then(({default:t})=>t(...e)).catch(e=>{throw new Error(`Failed to load @supabase/node-fetch: ${e.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...e)=>t(...e)},!(null===(r=null==t?void 0:t.params)||void 0===r?void 0:r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${he.websocket}`,this.httpEndpoint=Oe(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=re.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ne.connecting:return ue.Connecting;case ne.open:return ue.Open;case ne.closing:return ue.Closing;default:return ue.Closed}}isConnected(){return this.connectionState()===ue.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(e=>e.topic===r);if(s)return s;{const r=new Le(`realtime:${e}`,t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:r,payload:s,ref:n}=e,i=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${r} (${n})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},We)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(a){this.log("error","error in heartbeat callback",a)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:r,payload:s,ref:n}=e,i=n?`(${n})`:"",o=s.status||"";this.log("receive",`${o} ${t} ${r} ${i}`.trim(),s),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,s,n)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(le.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?";return`${e}${r}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;t=e||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const r={access_token:t,version:"realtime-js/2.75.0"};t&&e.updateJoinPayload(r),e.joinedOnce&&e._isJoined()&&e._push(le.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new we(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Be)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,s,n,i,o,a,l,c;if(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(r=null==e?void 0:e.timeout)&&void 0!==r?r:se,this.heartbeatIntervalMs=null!==(s=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==s?s:qe,this.worker=null!==(n=null==e?void 0:e.worker)&&void 0!==n&&n,this.accessToken=null!==(i=null==e?void 0:e.accessToken)&&void 0!==i?i:null,this.heartbeatCallback=null!==(o=null==e?void 0:e.heartbeatCallback)&&void 0!==o?o:De,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(a=null==e?void 0:e.reconnectAfterMs)&&void 0!==a?a:e=>Ke[e-1]||1e4,this.encode=null!==(l=null==e?void 0:e.encode)&&void 0!==l?l:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(c=null==e?void 0:e.decode)&&void 0!==c?c:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}class Fe extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function He(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class Je extends Fe{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ze extends Fe{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Ge=function(e,t,r,s){return new(r||(r=Promise))(function(n,i){function o(e){try{l(s.next(e))}catch(t){i(t)}}function a(e){try{l(s.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};const Ve=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>s(async()=>{const{default:e}=await Promise.resolve().then(()=>E);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},Ye=e=>{if(Array.isArray(e))return e.map(e=>Ye(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,r])=>{const s=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[s]=Ye(r)}),t};var Qe=function(e,t,r,s){return new(r||(r=Promise))(function(n,i){function o(e){try{l(s.next(e))}catch(t){i(t)}}function a(e){try{l(s.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};const Xe=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Ze=(e,t,r)=>Qe(void 0,void 0,void 0,function*(){const n=yield Ge(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield s(()=>Promise.resolve().then(()=>E),void 0)).Response:Response});e instanceof n&&!(null==r?void 0:r.noResolveJson)?e.json().then(r=>{const s=e.status||500,n=(null==r?void 0:r.statusCode)||s+"";t(new Je(Xe(r),s,n))}).catch(e=>{t(new ze(Xe(e),e))}):t(new ze(Xe(e),e))}),et=(e,t,r,s)=>{const n={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&s?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(s)?(n.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),n.body=JSON.stringify(s)):n.body=s,(null==t?void 0:t.duplex)&&(n.duplex=t.duplex),Object.assign(Object.assign({},n),r)):n};function tt(e,t,r,s,n,i){return Qe(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(r,et(t,s,n,i)).then(e=>{if(!e.ok)throw e;return(null==s?void 0:s.noResolveJson)?e:e.json()}).then(e=>o(e)).catch(e=>Ze(e,a,s))})})}function rt(e,t,r,s){return Qe(this,void 0,void 0,function*(){return tt(e,"GET",t,r,s)})}function st(e,t,r,s,n){return Qe(this,void 0,void 0,function*(){return tt(e,"POST",t,s,n,r)})}function nt(e,t,r,s,n){return Qe(this,void 0,void 0,function*(){return tt(e,"PUT",t,s,n,r)})}function it(e,t,r,s,n){return Qe(this,void 0,void 0,function*(){return tt(e,"DELETE",t,s,n,r)})}var ot=function(e,t,r,s){return new(r||(r=Promise))(function(n,i){function o(e){try{l(s.next(e))}catch(t){i(t)}}function a(e){try{l(s.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};class at{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return ot(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(He(e))return{data:null,error:e};throw e}})}}var lt=function(e,t,r,s){return new(r||(r=Promise))(function(n,i){function o(e){try{l(s.next(e))}catch(t){i(t)}}function a(e){try{l(s.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};class ct{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}asStream(){return new at(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.execute().then(e,t)}execute(){return lt(this,void 0,void 0,function*(){try{const e=yield this.downloadFn();return{data:yield e.blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(He(e))return{data:null,error:e};throw e}})}}var ht=function(e,t,r,s){return new(r||(r=Promise))(function(n,i){function o(e){try{l(s.next(e))}catch(t){i(t)}}function a(e){try{l(s.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};const ut={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},dt={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ft{constructor(e,t={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=Ve(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,s){return ht(this,void 0,void 0,function*(){try{let n;const i=Object.assign(Object.assign({},dt),s);let o=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(i.upsert)});const a=i.metadata;"undefined"!=typeof Blob&&r instanceof Blob?(n=new FormData,n.append("cacheControl",i.cacheControl),a&&n.append("metadata",this.encodeMetadata(a)),n.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(n=r,n.append("cacheControl",i.cacheControl),a&&n.append("metadata",this.encodeMetadata(a))):(n=r,o["cache-control"]=`max-age=${i.cacheControl}`,o["content-type"]=i.contentType,a&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(a)))),(null==s?void 0:s.headers)&&(o=Object.assign(Object.assign({},o),s.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),h=yield("PUT"==e?nt:st)(this.fetch,`${this.url}/object/${c}`,n,Object.assign({headers:o},(null==i?void 0:i.duplex)?{duplex:i.duplex}:{}));return{data:{path:l,id:h.Id,fullPath:h.Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(He(n))return{data:null,error:n};throw n}})}upload(e,t,r){return ht(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return ht(this,void 0,void 0,function*(){const n=this._removeEmptyFolders(e),i=this._getFinalPath(n),o=new URL(this.url+`/object/upload/sign/${i}`);o.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:dt.upsert},s),i=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&r instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(e=r,e.append("cacheControl",t.cacheControl)):(e=r,i["cache-control"]=`max-age=${t.cacheControl}`,i["content-type"]=t.contentType);return{data:{path:n,fullPath:(yield nt(this.fetch,o.toString(),e,{headers:i})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(He(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(e,t){return ht(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(s["x-upsert"]="true");const n=yield st(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),i=new URL(this.url+n.url),o=i.searchParams.get("token");if(!o)throw new Fe("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:o},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(He(r))return{data:null,error:r};throw r}})}update(e,t,r){return ht(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return ht(this,void 0,void 0,function*(){try{return{data:yield st(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}})}copy(e,t,r){return ht(this,void 0,void 0,function*(){try{return{data:{path:(yield st(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return ht(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),n=yield st(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},(null==r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers});const i=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return n={signedUrl:encodeURI(`${this.url}${n.signedURL}${i}`)},{data:n,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return ht(this,void 0,void 0,function*(){try{const s=yield st(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),n=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:s.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${n}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}})}download(e,t){const r=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",s=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),n=s?`?${s}`:"",i=this._getFinalPath(e);return new ct(()=>rt(this.fetch,`${this.url}/${r}/${i}${n}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return ht(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield rt(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Ye(e),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(He(r))return{data:null,error:r};throw r}})}exists(e){return ht(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,r,s){return Qe(this,void 0,void 0,function*(){return tt(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(He(r)&&r instanceof ze){const e=r.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],n=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==n&&s.push(n);const i=void 0!==(null==t?void 0:t.transform)?"render/image":"object",o=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==o&&s.push(o);let a=s.join("&");return""!==a&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${a}`)}}}remove(e){return ht(this,void 0,void 0,function*(){try{return{data:yield it(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(He(t))return{data:null,error:t};throw t}})}list(e,t,r){return ht(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},ut),t),{prefix:e||""});return{data:yield st(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}})}listV2(e,t){return ht(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield st(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(He(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const pt={"X-Client-Info":"storage-js/2.75.0"};var gt=function(e,t,r,s){return new(r||(r=Promise))(function(n,i){function o(e){try{l(s.next(e))}catch(t){i(t)}}function a(e){try{l(s.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};class wt{constructor(e,t={},r,s){this.shouldThrowOnError=!1;const n=new URL(e);if(null==s?void 0:s.useNewHostname){/supabase\.(co|in|red)$/.test(n.hostname)&&!n.hostname.includes("storage.supabase.")&&(n.hostname=n.hostname.replace("supabase.","storage.supabase."))}this.url=n.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},pt),t),this.fetch=Ve(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return gt(this,void 0,void 0,function*(){try{return{data:yield rt(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(He(e))return{data:null,error:e};throw e}})}getBucket(e){return gt(this,void 0,void 0,function*(){try{return{data:yield rt(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(He(t))return{data:null,error:t};throw t}})}createBucket(e){return gt(this,arguments,void 0,function*(e,t={public:!1}){try{return{data:yield st(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(He(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return gt(this,void 0,void 0,function*(){try{return{data:yield nt(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(He(r))return{data:null,error:r};throw r}})}emptyBucket(e){return gt(this,void 0,void 0,function*(){try{return{data:yield st(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(He(t))return{data:null,error:t};throw t}})}deleteBucket(e){return gt(this,void 0,void 0,function*(){try{return{data:yield it(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(He(t))return{data:null,error:t};throw t}})}}class yt extends wt{constructor(e,t={},r,s){super(e,t,r,s)}from(e){return new ft(this.url,this.headers,e,this.fetch)}}let vt="";vt="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const mt={headers:{"X-Client-Info":`supabase-js-${vt}/2.75.0`}},bt={schema:"public"},_t={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},kt={};var St=function(e,t,r,s){return new(r||(r=Promise))(function(n,i){function o(e){try{l(s.next(e))}catch(t){i(t)}}function a(e){try{l(s.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};const Et=(e,t,r)=>{const s=(e=>{let t;return t=e||("undefined"==typeof fetch?b:fetch),(...e)=>t(...e)})(r),n="undefined"==typeof Headers?_:Headers;return(r,i)=>St(void 0,void 0,void 0,function*(){var o;const a=null!==(o=yield t())&&void 0!==o?o:e;let l=new n(null==i?void 0:i.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${a}`),s(r,Object.assign(Object.assign({},i),{headers:l}))})};var Tt=function(e,t,r,s){return new(r||(r=Promise))(function(n,i){function o(e){try{l(s.next(e))}catch(t){i(t)}}function a(e){try{l(s.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};const Ot="2.75.0",jt=3e4,Pt=9e4,At={"X-Client-Info":`gotrue-js/${Ot}`},Rt="X-Supabase-Api-Version",It={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},$t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Ct extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function xt(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class Ut extends Ct{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class Nt extends Ct{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Lt extends Ct{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class Dt extends Lt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class qt extends Lt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Bt extends Lt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Wt extends Lt{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Kt extends Lt{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Mt extends Lt{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ft(e){return xt(e)&&"AuthRetryableFetchError"===e.name}class Ht extends Lt{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Jt extends Lt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const zt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Gt=" \t\n\r=".split(""),Vt=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Gt.length;t+=1)e[Gt[t].charCodeAt(0)]=-2;for(let t=0;t<zt.length;t+=1)e[zt[t].charCodeAt(0)]=t;return e})();function Yt(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(zt[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(zt[e]),t.queuedBits-=6}}function Qt(e,t,r){const s=Vt[e];if(!(s>-1)){if(-2===s)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Xt(e){const t=[],r=e=>{t.push(String.fromCodePoint(e))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return void r(e);for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,s,r)};for(let o=0;o<e.length;o+=1)Qt(e.charCodeAt(o),n,i);return t.join("")}function Zt(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function er(e){const t=[],r={queue:0,queuedBits:0},s=e=>{t.push(e)};for(let n=0;n<e.length;n+=1)Qt(e.charCodeAt(n),r,s);return new Uint8Array(t)}function tr(e){const t=[];return function(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const t=1024*(s-55296)&65535;s=65536+(e.charCodeAt(r+1)-56320&65535|t),r+=1}Zt(s,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function rr(e){const t=[],r={queue:0,queuedBits:0},s=e=>{t.push(e)};return e.forEach(e=>Yt(e,r,s)),Yt(null,r,s),t.join("")}const sr=()=>"undefined"!=typeof window&&"undefined"!=typeof document,nr={tested:!1,writable:!1},ir=()=>{if(!sr())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(t){return!1}if(nr.tested)return nr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),nr.tested=!0,nr.writable=!0}catch(t){nr.tested=!0,nr.writable=!1}return nr.writable};const or=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>s(async()=>{const{default:e}=await Promise.resolve().then(()=>E);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},ar=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},lr=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(s){return r}},cr=async(e,t)=>{await e.removeItem(t)};class hr{constructor(){this.promise=new hr.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function ur(e){const t=e.split(".");if(3!==t.length)throw new Jt("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!$t.test(t[r]))throw new Jt("JWT not in base64url format");return{header:JSON.parse(Xt(t[0])),payload:JSON.parse(Xt(t[1])),signature:er(t[2]),raw:{header:t[0],payload:t[1]}}}function dr(e){return("0"+e.toString(16)).substr(-2)}async function fr(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function pr(e,t,r=!1){const s=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let r="";for(let s=0;s<56;s++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,dr).join("")}();let n=s;r&&(n+="/PASSWORD_RECOVERY"),await ar(e,`${t}-code-verifier`,n);const i=await fr(s);return[i,s===i?"plain":"s256"]}hr.promiseConstructor=Promise;const gr=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const wr=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function yr(e){if(!wr.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function vr(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function mr(e){return JSON.parse(JSON.stringify(e))}const br=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),_r=[502,503,504];async function kr(e){var t,r;if(!("object"==typeof(r=e)&&null!==r&&"status"in r&&"ok"in r&&"json"in r&&"function"==typeof r.json))throw new Mt(br(e),0);if(_r.includes(e.status))throw new Mt(br(e),e.status);let s,n;try{s=await e.json()}catch(o){throw new Nt(br(o),o)}const i=function(e){const t=e.headers.get(Rt);if(!t)return null;if(!t.match(gr))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(o){return null}}(e);if(i&&i.getTime()>=It.timestamp&&"object"==typeof s&&s&&"string"==typeof s.code?n=s.code:"object"==typeof s&&s&&"string"==typeof s.error_code&&(n=s.error_code),n){if("weak_password"===n)throw new Ht(br(s),e.status,(null===(t=s.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===n)throw new Dt}else if("object"==typeof s&&s&&"object"==typeof s.weak_password&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new Ht(br(s),e.status,s.weak_password.reasons);throw new Ut(br(s),e.status||500,n)}async function Sr(e,t,r,s){var n;const i=Object.assign({},null==s?void 0:s.headers);i[Rt]||(i[Rt]=It.name),(null==s?void 0:s.jwt)&&(i.Authorization=`Bearer ${s.jwt}`);const o=null!==(n=null==s?void 0:s.query)&&void 0!==n?n:{};(null==s?void 0:s.redirectTo)&&(o.redirect_to=s.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await async function(e,t,r,s,n,i){const o=((e,t,r,s)=>{const n={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),r))})(t,s,n,i);let a;try{a=await e(r,Object.assign({},o))}catch(l){throw console.error(l),new Mt(br(l),0)}a.ok||await kr(a);if(null==s?void 0:s.noResolveJson)return a;try{return await a.json()}catch(l){await kr(l)}}(e,t,r+a,{headers:i,noResolveJson:null==s?void 0:s.noResolveJson},{},null==s?void 0:s.body);return(null==s?void 0:s.xform)?null==s?void 0:s.xform(l):{data:Object.assign({},l),error:null}}function Er(e){var t;let r=null;var s;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=(s=e.expires_in,Math.round(Date.now()/1e3)+s)));return{data:{session:r,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Tr(e){const t=Er(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function Or(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function jr(e){return{data:e,error:null}}function Pr(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:n,verification_type:i}=e,o=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]])}return r}(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:s,redirect_to:n,verification_type:i},user:Object.assign({},o)},error:null}}function Ar(e){return e}const Rr=["global","local","others"];class Ir{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=or(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Rr[0]){if(Rr.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Rr.join(", ")}`);try{return await Sr(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(xt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Sr(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Or})}catch(r){if(xt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]])}return r}(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=null==r?void 0:r.newEmail,delete s.newEmail),await Sr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Pr,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(xt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Sr(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Or})}catch(t){if(xt(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,n,i,o,a;try{const l={nextPage:null,lastPage:0,total:0},c=await Sr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(n=null===(s=null==e?void 0:e.perPage)||void 0===s?void 0:s.toString())&&void 0!==n?n:""},xform:Ar});if(c.error)throw c.error;const h=await c.json(),u=null!==(i=c.headers.get("x-total-count"))&&void 0!==i?i:0,d=null!==(a=null===(o=c.headers.get("link"))||void 0===o?void 0:o.split(","))&&void 0!==a?a:[];return d.length>0&&(d.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},h),l),error:null}}catch(l){if(xt(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){yr(e);try{return await Sr(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Or})}catch(t){if(xt(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){yr(e);try{return await Sr(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Or})}catch(r){if(xt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){yr(e);try{return await Sr(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Or})}catch(r){if(xt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){yr(e.userId);try{const{data:t,error:r}=await Sr(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(t){if(xt(t))return{data:null,error:t};throw t}}async _deleteFactor(e){yr(e.userId),yr(e.id);try{return{data:await Sr(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(xt(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,s,n,i,o,a;try{const l={nextPage:null,lastPage:0,total:0},c=await Sr(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(n=null===(s=null==e?void 0:e.perPage)||void 0===s?void 0:s.toString())&&void 0!==n?n:""},xform:Ar});if(c.error)throw c.error;const h=await c.json(),u=null!==(i=c.headers.get("x-total-count"))&&void 0!==i?i:0,d=null!==(a=null===(o=c.headers.get("link"))||void 0===o?void 0:o.split(","))&&void 0!==a?a:[];return d.length>0&&(d.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},h),l),error:null}}catch(l){if(xt(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(e){try{return await Sr(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(xt(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Sr(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(xt(t))return{data:null,error:t};throw t}}async _deleteOAuthClient(e){try{return await Sr(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(xt(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Sr(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(xt(t))return{data:null,error:t};throw t}}}function $r(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Cr=!!(globalThis&&ir()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class xr extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ur extends xr{}async function Nr(e,t,r){Cr&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),Cr&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async s=>{if(!s){if(0===t)throw Cr&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Ur(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Cr)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(n){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",n)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}Cr&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Cr&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}))}function Lr(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Dr(e){const t=(new TextEncoder).encode(e);return"0x"+Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}class qr extends Error{constructor({message:e,code:t,cause:r,name:s}){var n;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=null!==(n=null!=s?s:r instanceof Error?r.name:void 0)&&void 0!==n?n:"Unknown Error",this.code=t}}class Br extends qr{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function Wr({error:e,options:t}){var r,s,n;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new qr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if("ConstraintError"===e.name){if(!0===(null===(r=i.authenticatorSelection)||void 0===r?void 0:r.requireResidentKey))return new qr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if("conditional"===t.mediation&&"required"===(null===(s=i.authenticatorSelection)||void 0===s?void 0:s.userVerification))return new qr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if("required"===(null===(n=i.authenticatorSelection)||void 0===n?void 0:n.userVerification))return new qr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if("InvalidStateError"===e.name)return new qr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if("NotAllowedError"===e.name)return new qr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("NotSupportedError"===e.name){return 0===i.pubKeyCredParams.filter(e=>"public-key"===e.type).length?new qr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new qr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e})}if("SecurityError"===e.name){const t=window.location.hostname;if(!Vr(t))return new qr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(i.rp.id!==t)return new qr({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("TypeError"===e.name){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new qr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if("UnknownError"===e.name)return new qr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new qr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Kr({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new qr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if("NotAllowedError"===e.name)return new qr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("SecurityError"===e.name){const t=window.location.hostname;if(!Vr(t))return new qr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(r.rpId!==t)return new qr({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("UnknownError"===e.name)return new qr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new qr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var Mr=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]])}return r};const Fr=new class{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function Hr(e){if(!e)throw new Error("Credential creation options are required");if("undefined"!=typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:s}=e,n=Mr(e,["challenge","user","excludeCredentials"]),i=er(t).buffer,o=Object.assign(Object.assign({},r),{id:er(r.id).buffer}),a=Object.assign(Object.assign({},n),{challenge:i,user:o});if(s&&s.length>0){a.excludeCredentials=new Array(s.length);for(let e=0;e<s.length;e++){const t=s[e];a.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:er(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return a}function Jr(e){if(!e)throw new Error("Credential request options are required");if("undefined"!=typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,s=Mr(e,["challenge","allowCredentials"]),n=er(t).buffer,i=Object.assign(Object.assign({},s),{challenge:n});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let e=0;e<r.length;e++){const t=r[e];i.allowCredentials[e]=Object.assign(Object.assign({},t),{id:er(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return i}function zr(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:rr(new Uint8Array(e.response.attestationObject)),clientDataJSON:rr(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:null!==(t=r.authenticatorAttachment)&&void 0!==t?t:void 0}}function Gr(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const r=e,s=e.getClientExtensionResults(),n=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:rr(new Uint8Array(n.authenticatorData)),clientDataJSON:rr(new Uint8Array(n.clientDataJSON)),signature:rr(new Uint8Array(n.signature)),userHandle:n.userHandle?rr(new Uint8Array(n.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:null!==(t=r.authenticatorAttachment)&&void 0!==t?t:void 0}}function Vr(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Yr(){var e,t;return!!(sr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(e=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===e?void 0:e.create)&&"function"==typeof(null===(t=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===t?void 0:t.get))}const Qr={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Xr={userVerification:"preferred",hints:["security-key"]};function Zr(...e){const t=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),r=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),s={};for(const n of e)if(n)for(const e in n){const i=n[e];if(void 0!==i)if(Array.isArray(i))s[e]=i;else if(r(i))s[e]=i;else if(t(i)){const r=s[e];t(r)?s[e]=Zr(r,i):s[e]=Zr(i)}else s[e]=i}return s}class es{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:s},n){try{const{data:i,error:o}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!i)return{data:null,error:o};const a=null!=s?s:Fr.createNewAbortSignal();if("create"===i.webauthn.type){const{user:e}=i.webauthn.credential_options.publicKey;e.name||(e.name=`${e.id}:${r}`),e.displayName||(e.displayName=e.name)}switch(i.webauthn.type){case"create":{const t=function(e,t){return Zr(Qr,e,t||{})}(i.webauthn.credential_options.publicKey,null==n?void 0:n.create),{data:r,error:s}=await async function(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Br("Browser returned unexpected credential type",t)}:{data:null,error:new Br("Empty credential response",t)}}catch(t){return{data:null,error:Wr({error:t,options:e})}}}({publicKey:t,signal:a});return r?{data:{factorId:e,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:r}},error:null}:{data:null,error:s}}case"request":{const t=function(e,t){return Zr(Xr,e,t||{})}(i.webauthn.credential_options.publicKey,null==n?void 0:n.request),{data:r,error:s}=await async function(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Br("Browser returned unexpected credential type",t)}:{data:null,error:new Br("Empty credential response",t)}}catch(t){return{data:null,error:Kr({error:t,options:e})}}}(Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:t,signal:a}));return r?{data:{factorId:e,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:r}},error:null}:{data:null,error:s}}}}catch(i){return xt(i)?{data:null,error:i}:{data:null,error:new Nt("Unexpected error in challenge",i)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:r=("undefined"!=typeof window?[window.location.origin]:void 0),signal:s}},n){if(!t)return{data:null,error:new Ct("rpId is required for WebAuthn authentication")};try{if(!Yr())return{data:null,error:new Nt("Browser does not support WebAuthn",null)};const{data:i,error:o}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:s},{request:n});if(!i)return{data:null,error:o};const{webauthn:a}=i;return this._verify({factorId:e,challengeId:i.challengeId,webauthn:{type:a.type,rpId:t,rpOrigins:r,credential_response:a.credential_response}})}catch(i){return xt(i)?{data:null,error:i}:{data:null,error:new Nt("Unexpected error in authenticate",i)}}}async _register({friendlyName:e,rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:r=("undefined"!=typeof window?[window.location.origin]:void 0),signal:s},n){if(!t)return{data:null,error:new Ct("rpId is required for WebAuthn registration")};try{if(!Yr())return{data:null,error:new Nt("Browser does not support WebAuthn",null)};const{data:i,error:o}=await this._enroll({friendlyName:e});if(!i)return await this.client.mfa.listFactors().then(t=>{var r;return null===(r=t.data)||void 0===r?void 0:r.all.find(t=>"webauthn"===t.factor_type&&t.friendly_name===e&&"unverified"!==t.status)}).then(e=>e?this.client.mfa.unenroll({factorId:null==e?void 0:e.id}):void 0),{data:null,error:o};const{data:a,error:l}=await this._challenge({factorId:i.id,friendlyName:i.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:s},{create:n});return a?this._verify({factorId:i.id,challengeId:a.challengeId,webauthn:{rpId:t,rpOrigins:r,type:a.webauthn.type,credential_response:a.webauthn.credential_response}}):{data:null,error:l}}catch(i){return xt(i)?{data:null,error:i}:{data:null,error:new Nt("Unexpected error in register",i)}}}}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const ts={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:At,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function rs(e,t,r){return await r()}const ss={};class ns{get jwks(){var e,t;return null!==(t=null===(e=ss[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){ss[this.storageKey]=Object.assign(Object.assign({},ss[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=ss[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ss[this.storageKey]=Object.assign(Object.assign({},ss[this.storageKey]),{cachedAt:e})}constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ns.nextInstanceID,ns.nextInstanceID+=1,this.instanceID>0&&sr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},ts),e);if(this.logDebugMessages=!!s.debug,"function"==typeof s.debug&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Ir({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=or(s.fetch),this.lock=s.lock||rs,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:sr()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Nr:this.lock=rs,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new es(this)},this.persistSession?(s.storage?this.storage=s.storage:ir()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=$r(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=$r(this.memoryStorage)),sr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(n){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",n)}null===(r=this.broadcastChannel)||void 0===r||r.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ot}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(s){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),sr()&&this.detectSessionInUrl&&"none"!==r){const{data:s,error:n}=await this._getSessionFromURL(t,r);if(n){if(this._debug("#_initialize()","error detecting session from URL",n),function(e){return xt(e)&&"AuthImplicitGrantRedirectError"===e.name}(n)){const t=null===(e=n.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:n}}return await this._removeSession(),{error:n}}const{session:i,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",o),await this._saveSession(i),setTimeout(async()=>{"recovery"===o?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return xt(t)?{error:t}:{error:new Nt("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const n=await Sr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(r=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===(s=null==e?void 0:e.options)||void 0===s?void 0:s.captchaToken}},xform:Er}),{data:i,error:o}=n;if(o||!i)return{data:{user:null,session:null},error:o};const a=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(n){if(xt(n))return{data:{user:null,session:null},error:n};throw n}}async signUp(e){var t,r,s;try{let n;if("email"in e){const{email:r,password:s,options:i}=e;let o=null,a=null;"pkce"===this.flowType&&([o,a]=await pr(this.storage,this.storageKey)),n=await Sr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==i?void 0:i.emailRedirectTo,body:{email:r,password:s,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:o,code_challenge_method:a},xform:Er})}else{if(!("phone"in e))throw new Bt("You must provide either an email or phone number and a password");{const{phone:t,password:i,options:o}=e;n=await Sr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:i,data:null!==(r=null==o?void 0:o.data)&&void 0!==r?r:{},channel:null!==(s=null==o?void 0:o.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken}},xform:Er})}}const{data:i,error:o}=n;if(o||!i)return{data:{user:null,session:null},error:o};const a=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(n){if(xt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:s,options:n}=e;t=await Sr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:s,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}},xform:Tr})}else{if(!("phone"in e))throw new Bt("You must provide either an email or phone number and a password");{const{phone:r,password:s,options:n}=e;t=await Sr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:s,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}},xform:Tr})}}const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:r&&r.session&&r.user?(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s}):{data:{user:null,session:null},error:new qt}}catch(t){if(xt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,n;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(n=e.options)||void 0===n?void 0:n.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,s,n,i,o,a,l,c,h,u;let d,f;if("message"in e)d=e.message,f=e.signature;else{const{chain:h,wallet:u,statement:p,options:g}=e;let w;if(sr())if("object"==typeof u)w=u;else{const e=window;if(!("ethereum"in e)||"object"!=typeof e.ethereum||!("request"in e.ethereum)||"function"!=typeof e.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");w=e.ethereum}else{if("object"!=typeof u||!(null==g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=u}const y=new URL(null!==(t=null==g?void 0:g.url)&&void 0!==t?t:window.location.href),v=await w.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!v||0===v.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const m=Lr(v[0]);let b=null===(r=null==g?void 0:g.signInWithEthereum)||void 0===r?void 0:r.chainId;if(!b){const e=await w.request({method:"eth_chainId"});b=parseInt(e,16)}d=function(e){var t;const{chainId:r,domain:s,expirationTime:n,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:h,uri:u,version:d}=e;if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!u)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==d)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${d}`);if(null===(t=e.statement)||void 0===t?void 0:t.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`);const f=`${h?`${h}://${s}`:s} wants you to sign in with your Ethereum account:\n${Lr(e.address)}\n\n${e.statement?`${e.statement}\n`:""}`;let p=`URI: ${u}\nVersion: ${d}\nChain ID: ${r}${o?`\nNonce: ${o}`:""}\nIssued At: ${i.toISOString()}`;if(n&&(p+=`\nExpiration Time: ${n.toISOString()}`),a&&(p+=`\nNot Before: ${a.toISOString()}`),l&&(p+=`\nRequest ID: ${l}`),c){let e="\nResources:";for(const t of c){if(!t||"string"!=typeof t)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${t}`);e+=`\n- ${t}`}p+=e}return`${f}\n${p}`}({domain:y.host,address:m,statement:p,uri:y.href,version:"1",chainId:b,nonce:null===(s=null==g?void 0:g.signInWithEthereum)||void 0===s?void 0:s.nonce,issuedAt:null!==(i=null===(n=null==g?void 0:g.signInWithEthereum)||void 0===n?void 0:n.issuedAt)&&void 0!==i?i:new Date,expirationTime:null===(o=null==g?void 0:g.signInWithEthereum)||void 0===o?void 0:o.expirationTime,notBefore:null===(a=null==g?void 0:g.signInWithEthereum)||void 0===a?void 0:a.notBefore,requestId:null===(l=null==g?void 0:g.signInWithEthereum)||void 0===l?void 0:l.requestId,resources:null===(c=null==g?void 0:g.signInWithEthereum)||void 0===c?void 0:c.resources}),f=await w.request({method:"personal_sign",params:[Dr(d),m]})}try{const{data:t,error:r}=await Sr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:d,signature:f},(null===(h=e.options)||void 0===h?void 0:h.captchaToken)?{gotrue_meta_security:{captcha_token:null===(u=e.options)||void 0===u?void 0:u.captchaToken}}:null),xform:Er});if(r)throw r;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:r}):{data:{user:null,session:null},error:new qt}}catch(p){if(xt(p))return{data:{user:null,session:null},error:p};throw p}}async signInWithSolana(e){var t,r,s,n,i,o,a,l,c,h,u,d;let f,p;if("message"in e)f=e.message,p=e.signature;else{const{chain:u,wallet:d,statement:g,options:w}=e;let y;if(sr())if("object"==typeof d)y=d;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");y=e.solana}else{if("object"!=typeof d||!(null==w?void 0:w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=d}const v=new URL(null!==(t=null==w?void 0:w.url)&&void 0!==t?t:window.location.href);if("signIn"in y&&y.signIn){const e=await y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==w?void 0:w.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),g?{statement:g}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");f="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in y&&"function"==typeof y.signMessage&&"publicKey"in y&&"object"==typeof y&&y.publicKey&&"toBase58"in y.publicKey&&"function"==typeof y.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=[`${v.host} wants you to sign in with your Solana account:`,y.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${v.href}`,`Issued At: ${null!==(s=null===(r=null==w?void 0:w.signInWithSolana)||void 0===r?void 0:r.issuedAt)&&void 0!==s?s:(new Date).toISOString()}`,...(null===(n=null==w?void 0:w.signInWithSolana)||void 0===n?void 0:n.notBefore)?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...(null===(i=null==w?void 0:w.signInWithSolana)||void 0===i?void 0:i.expirationTime)?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...(null===(o=null==w?void 0:w.signInWithSolana)||void 0===o?void 0:o.chainId)?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...(null===(a=null==w?void 0:w.signInWithSolana)||void 0===a?void 0:a.nonce)?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...(null===(l=null==w?void 0:w.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...(null===(h=null===(c=null==w?void 0:w.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===h?void 0:h.length)?["Resources",...w.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await y.signMessage((new TextEncoder).encode(f),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:r}=await Sr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:rr(p)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(d=e.options)||void 0===d?void 0:d.captchaToken}}:null),xform:Er});if(r)throw r;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:r}):{data:{user:null,session:null},error:new qt}}catch(g){if(xt(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(e){const t=await lr(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(null!=t?t:"").split("/");try{const{data:t,error:n}=await Sr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Er});if(await cr(this.storage,`${this.storageKey}-code-verifier`),n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=s?s:null}),error:n}):{data:{user:null,session:null,redirectType:null},error:new qt}}catch(n){if(xt(n))return{data:{user:null,session:null,redirectType:null},error:n};throw n}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:n,nonce:i}=e,o=await Sr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:n,nonce:i,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:Er}),{data:a,error:l}=o;return l?{data:{user:null,session:null},error:l}:a&&a.session&&a.user?(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:l}):{data:{user:null,session:null},error:new qt}}catch(t){if(xt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,n,i;try{if("email"in e){const{email:s,options:n}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await pr(this.storage,this.storageKey));const{error:a}=await Sr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:null!==(t=null==n?void 0:n.data)&&void 0!==t?t:{},create_user:null===(r=null==n?void 0:n.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},code_challenge:i,code_challenge_method:o},redirectTo:null==n?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:t,options:r}=e,{data:o,error:a}=await Sr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(s=null==r?void 0:r.data)&&void 0!==s?s:{},create_user:null===(n=null==r?void 0:r.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},channel:null!==(i=null==r?void 0:r.channel)&&void 0!==i?i:"sms"}});return{data:{user:null,session:null,messageId:null==o?void 0:o.message_id},error:a}}throw new Bt("You must provide either an email or phone number.")}catch(o){if(xt(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,r;try{let s,n;"options"in e&&(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo,n=null===(r=e.options)||void 0===r?void 0:r.captchaToken);const{data:i,error:o}=await Sr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:n}}),redirectTo:s,xform:Er});if(o)throw o;if(!i)throw new Error("An error occurred on token verification.");const a=i.session,l=i.user;return(null==a?void 0:a.access_token)&&(await this._saveSession(a),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(s){if(xt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{let n=null,i=null;return"pkce"===this.flowType&&([n,i]=await pr(this.storage,this.storageKey)),await Sr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==r?r:void 0}),(null===(s=null==e?void 0:e.options)||void 0===s?void 0:s.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:n,code_challenge_method:i}),headers:this.headers,xform:jr})}catch(n){if(xt(n))return{data:null,error:n};throw n}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Dt;const{error:s}=await Sr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(xt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:n}=e,{error:i}=await Sr(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}},redirectTo:null==n?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:i}}if("phone"in e){const{phone:r,type:s,options:n}=e,{data:i,error:o}=await Sr(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}}});return{data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:o}}throw new Bt("You must provide either an email or phone number and a type")}catch(t){if(xt(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(e){}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await lr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=!!e.expires_at&&1e3*e.expires_at-Date.now()<Pt;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const t=await lr(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=vr()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,r,s)=>(t||"user"!==r||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,r,s))})}return{data:{session:e},error:null}}const{data:s,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{session:null},error:n}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await Sr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Or}):await this._useSession(async e=>{var t,r,s;const{data:n,error:i}=e;if(i)throw i;return(null===(t=n.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Sr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(s=null===(r=n.session)||void 0===r?void 0:r.access_token)&&void 0!==s?s:void 0,xform:Or}):{data:{user:null},error:new Dt}})}catch(t){if(xt(t))return function(e){return xt(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await cr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:n}=r;if(n)throw n;if(!s.session)throw new Dt;const i=s.session;let o=null,a=null;"pkce"===this.flowType&&null!=e.email&&([o,a]=await pr(this.storage,this.storageKey));const{data:l,error:c}=await Sr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:a}),jwt:i.access_token,xform:Or});if(c)throw c;return i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if(xt(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Dt;const t=Date.now()/1e3;let r=t,s=!0,n=null;const{payload:i}=ur(e.access_token);if(i.exp&&(r=i.exp,s=r<=t),s){const{data:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return{data:{user:null,session:null},error:r};if(!t)return{data:{user:null,session:null},error:null};n=t}else{const{data:s,error:i}=await this._getUser(e.access_token);if(i)throw i;n={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)}return{data:{user:n.user,session:n},error:null}}catch(t){if(xt(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:s,error:n}=t;if(n)throw n;e=null!==(r=s.session)&&void 0!==r?r:void 0}if(!(null==e?void 0:e.refresh_token))throw new Dt;const{data:s,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{user:null,session:null},error:n}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(xt(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!sr())throw new Wt("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Wt(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Kt("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Wt("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Kt("No code detected.");const{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;const s=new URL(window.location.href);return s.searchParams.delete("code"),window.history.replaceState(window.history.state,"",s.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:n,refresh_token:i,expires_in:o,expires_at:a,token_type:l}=e;if(!(n&&o&&i&&l))throw new Wt("No session defined in URL");const c=Math.round(Date.now()/1e3),h=parseInt(o);let u=c+h;a&&(u=parseInt(a));const d=u-c;1e3*d<=jt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${d}s, should have been closer to ${h}s`);const f=u-h;c-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,u,c):c-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,u,c);const{data:p,error:g}=await this._getUser(n);if(g)throw g;const w={provider_token:r,provider_refresh_token:s,access_token:n,expires_in:h,expires_at:u,refresh_token:i,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(r){if(xt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await lr(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:n}=t;if(n)return{error:n};const i=null===(r=s.session)||void 0===r?void 0:r.access_token;if(i){const{error:t}=await this.admin.signOut(i,e);if(t&&(!function(e){return xt(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await cr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:s},error:n}=t;if(n)throw n;await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(n){await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",n),console.error(n)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;"pkce"===this.flowType&&([r,s]=await pr(this.storage,this.storageKey,!0));try{return await Sr(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(n){if(xt(n))return{data:null,error:n};throw n}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(xt(t))return{data:null,error:t};throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:s}=await this._useSession(async t=>{var r,s,n,i,o;const{data:a,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:!0});return await Sr(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(o=null===(i=a.session)||void 0===i?void 0:i.access_token)&&void 0!==o?o:void 0})});if(s)throw s;return sr()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==r?void 0:r.url),{data:{provider:e.provider,url:null==r?void 0:r.url},error:null}}catch(r){if(xt(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:s,data:{session:n}}=t;if(s)throw s;const{options:i,provider:o,token:a,access_token:l,nonce:c}=e,h=await Sr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:null!==(r=null==n?void 0:n.access_token)&&void 0!==r?r:void 0,body:{provider:o,id_token:a,access_token:l,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:Er}),{data:u,error:d}=h;return d?{data:{user:null,session:null},error:d}:u&&u.session&&u.user?(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("USER_UPDATED",u.session)),{data:u,error:d}):{data:{user:null,session:null},error:new qt}}catch(s){if(xt(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:n,error:i}=t;if(i)throw i;return await Sr(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(s=null===(r=n.session)||void 0===r?void 0:r.access_token)&&void 0!==s?s:void 0})})}catch(t){if(xt(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await(r=async r=>(r>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await Sr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Er})),s=(e,t)=>{const r=200*Math.pow(2,e);return t&&Ft(t)&&Date.now()+r-n<jt},new Promise((e,t)=>{(async()=>{for(let i=0;i<1/0;i++)try{const t=await r(i);if(!s(i,null,t))return void e(t)}catch(n){if(!s(i,n))return void t(n)}})()}))}catch(n){if(this._debug(t,"error",n),xt(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}var r,s}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),sr()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await lr(this.storage,this.storageKey);if(n&&this.userStorage){let t=await lr(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:n.user},await ar(this.userStorage,this.storageKey+"-user",t)),n.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:vr()}else if(n&&!n.user&&!n.user){const e=await lr(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(n.user=e.user,await cr(this.storage,this.storageKey+"-user"),await ar(this.storage,this.storageKey,n)):n.user=vr()}if(this._debug(r,"session from storage",n),!this._isValidSession(n))return this._debug(r,"session is not valid"),void(null!==n&&await this._removeSession());const i=1e3*(null!==(t=n.expires_at)&&void 0!==t?t:1/0)-Date.now()<Pt;if(this._debug(r,`session has${i?"":" not"} expired with margin of 90000s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:e}=await this._callRefreshToken(n.refresh_token);e&&(console.error(e),Ft(e)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(n.user&&!0===n.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(n.access_token);!t&&(null==e?void 0:e.user)?(n.user=e.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(r,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){return this._debug(r,"error",n),void console.error(n)}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Dt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new hr;const{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new Dt;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const s={data:t.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(n){if(this._debug(s,"error",n),xt(n)){const e={data:null,error:n};return Ft(n)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(n),n}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],n=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(n){s.push(n)}});if(await Promise.all(n),s.length>0){for(let e=0;e<s.length;e+=1)console.error(s[e]);throw s[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!r&&t.user&&await ar(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const s=mr(e);await ar(this.storage,this.storageKey,s)}else{const e=mr(t);await ar(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await cr(this.storage,this.storageKey),await cr(this.storage,this.storageKey+"-code-verifier"),await cr(this.storage,this.storageKey+"-user"),this.userStorage&&await cr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&sr()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),jt);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:r}}=e;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const s=Math.floor((1e3*r.expires_at-t)/jt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),s<=3&&await this._callRefreshToken(r.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof xr))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!sr()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if((null==r?void 0:r.redirectTo)&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),(null==r?void 0:r.scopes)&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),"pkce"===this.flowType){const[e,t]=await pr(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});s.push(r.toString())}if(null==r?void 0:r.queryParams){const e=new URLSearchParams(r.queryParams);s.push(e.toString())}return(null==r?void 0:r.skipBrowserRedirect)&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:n}=t;return n?{data:null,error:n}:await Sr(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(r=null==s?void 0:s.session)||void 0===r?void 0:r.access_token})})}catch(t){if(xt(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:n,error:i}=t;if(i)return{data:null,error:i};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:a,error:l}=await Sr(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&"totp"===a.type&&(null===(s=null==a?void 0:a.totp)||void 0===s?void 0:s.qr_code)&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(t){if(xt(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:n}=t;if(n)return{data:null,error:n};const i=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?zr(e.webauthn.credential_response):Gr(e.webauthn.credential_response)})}:{code:e.code}),{data:o,error:a}=await Sr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:i,headers:this.headers,jwt:null===(r=null==s?void 0:s.session)||void 0===r?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(xt(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:n}=t;if(n)return{data:null,error:n};const i=await Sr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:null===(r=null==s?void 0:s.session)||void 0===r?void 0:r.access_token});if(i.error)return i;const{data:o}=i;if("webauthn"!==o.type)return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Hr(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Jr(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(xt(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const n of null!==(e=null==t?void 0:t.factors)&&void 0!==e?e:[])s.all.push(n),"verified"===n.status&&s[n.factor_type].push(n);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:s},error:n}=e;if(n)return{data:null,error:n};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=ur(s.access_token);let o=null;i.aal&&(o=i.aal);let a=o;(null!==(r=null===(t=s.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==r?r:[]).length>0&&(a="aal2");return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:i.amr||[]},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(t=>t.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(t=>t.kid===e),r&&this.jwks_cached_at+6e5>s)return r;const{data:n,error:i}=await Sr(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return n.keys&&0!==n.keys.length?(this.jwks=n,this.jwks_cached_at=s,r=n.keys.find(t=>t.kid===e),r||null):null}async getClaims(e,t={}){try{let r=e;if(!r){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};r=e.session.access_token}const{header:s,payload:n,signature:i,raw:{header:o,payload:a}}=ur(r);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(n.exp);const l=s.alg&&!s.alg.startsWith("HS")&&s.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(s.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(r);if(e)throw e;return{data:{claims:n,header:s,signature:i},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(s.alg),h=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!(await crypto.subtle.verify(c,h,i,tr(`${o}.${a}`))))throw new Jt("Invalid JWT signature");return{data:{claims:n,header:s,signature:i},error:null}}catch(r){if(xt(r))return{data:null,error:r};throw r}}}ns.nextInstanceID=0;const is=ns;class os extends is{constructor(e){super(e)}}var as=function(e,t,r,s){return new(r||(r=Promise))(function(n,i){function o(e){try{l(s.next(e))}catch(t){i(t)}}function a(e){try{l(s.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};class ls{constructor(e,t,r){var s,n,i;this.supabaseUrl=e,this.supabaseKey=t;const o=function(e){const t=null==e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((r=t).endsWith("/")?r:r+"/")}catch(s){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var r}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const a=`sb-${o.hostname.split(".")[0]}-auth-token`,l=function(e,t){var r,s;const{db:n,auth:i,realtime:o,global:a}=e,{db:l,auth:c,realtime:h,global:u}=t,d={db:Object.assign(Object.assign({},l),n),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},h),o),storage:{},global:Object.assign(Object.assign(Object.assign({},u),a),{headers:Object.assign(Object.assign({},null!==(r=null==u?void 0:u.headers)&&void 0!==r?r:{}),null!==(s=null==a?void 0:a.headers)&&void 0!==s?s:{})}),accessToken:()=>Tt(this,void 0,void 0,function*(){return""})};return e.accessToken?d.accessToken=e.accessToken:delete d.accessToken,d}(null!=r?r:{},{db:bt,realtime:kt,auth:Object.assign(Object.assign({},_t),{storageKey:a}),global:mt});this.storageKey=null!==(s=l.auth.storageKey)&&void 0!==s?s:"",this.headers=null!==(n=l.global.headers)&&void 0!==n?n:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(i=l.auth)&&void 0!==i?i:{},this.headers,l.global.fetch),this.fetch=Et(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new Y(new URL("rest/v1",o).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new yt(this.storageUrl.href,this.headers,this.fetch,null==r?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new u(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return as(this,void 0,void 0,function*(){var e,t;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return null!==(t=null===(e=r.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:n,storageKey:i,flowType:o,lock:a,debug:l},c,h){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new os({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),c),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:n,flowType:o,lock:a,debug:l,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new Me(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=r,this.realtime.setAuth(r))}}const cs=(e,t,r)=>new ls(e,t,r);(function(){if("undefined"!=typeof window)return!1;if("undefined"==typeof process)return!1;const e=process.version;if(null==e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("ΓÜá∩╕Å  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");export{cs as c};
src\frontend\node_modules\.vite\deps\@supabase_supabase-js.js:                console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.");
src\frontend\node_modules\.vite\deps_temp_1c5fc2ff\@supabase_supabase-js.js:                console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.");
src\frontend\node_modules\@supabase\auth-js\dist\main\GoTrueClient.js:                                console.warn('Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.');
src\frontend\node_modules\@supabase\auth-js\dist\module\GoTrueClient.js:                                console.warn('Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.');
src\frontend\node_modules\@supabase\supabase-js\dist\umd\supabase.js:!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.supabase=t():e.supabase=t()}(self,()=>(()=>{"use strict";var e={13:function(e,t,s){var r=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))(function(i,n){function o(e){try{l(r.next(e))}catch(e){n(e)}}function a(e){try{l(r.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=s(227),n=s(279),o=s(830),a=s(962),l=s(251),c=s(442),h=s(819),u=s(795);t.default=class{constructor(e,t,s){var r,i,o;this.supabaseUrl=e,this.supabaseKey=t;const u=(0,h.validateSupabaseUrl)(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,f={db:l.DEFAULT_DB_OPTIONS,realtime:l.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},l.DEFAULT_AUTH_OPTIONS),{storageKey:d}),global:l.DEFAULT_GLOBAL_OPTIONS},p=(0,h.applySettingDefaults)(null!=s?s:{},f);this.storageKey=null!==(r=p.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(i=p.global.headers)&&void 0!==i?i:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(o=p.auth)&&void 0!==o?o:{},this.headers,p.global.fetch),this.fetch=(0,c.fetchWithAuth)(t,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new n.PostgrestClient(new URL("rest/v1",u).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new a.StorageClient(this.storageUrl.href,this.headers,this.fetch,null==s?void 0:s.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new i.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return r(this,void 0,void 0,function*(){var e,t;if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return null!==(t=null===(e=s.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,userStorage:i,storageKey:n,flowType:o,lock:a,debug:l},c,h){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new u.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),c),storageKey:n,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,userStorage:i,flowType:o,lock:a,debug:l,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new o.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,s){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===s?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=s,this.realtime.setAuth(s))}}},45:function(e,t,s){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(s(825));t.default=class{constructor(e,{headers:t={},schema:s,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=s,this.fetch=r}select(e,{head:t=!1,count:s}={}){const r=t?"HEAD":"GET";let n=!1;const o=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!n?"":('"'===e&&(n=!n),e)).join("");return this.url.searchParams.set("select",o),s&&this.headers.append("Prefer",`count=${s}`),new i.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:s=!0}={}){var r;if(t&&this.headers.append("Prefer",`count=${t}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:r,defaultToNull:n=!0}={}){var o;if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),void 0!==t&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(o=this.fetch)&&void 0!==o?o:fetch})}update(e,{count:t}={}){var s;return t&&this.headers.append("Prefer",`count=${t}`),new i.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}delete({count:e}={}){var t;return e&&this.headers.append("Prefer",`count=${e}`),new i.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}}},227:(e,t,s)=>{s.r(t),s.d(t,{FunctionRegion:()=>a,FunctionsClient:()=>l,FunctionsError:()=>r,FunctionsFetchError:()=>i,FunctionsHttpError:()=>o,FunctionsRelayError:()=>n});class r extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class i extends r{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class n extends r{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class o extends r{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var a;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(a||(a={}));class l{constructor(e,{headers:t={},customFetch:r,region:i=a.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(s.bind(s,517)).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)})(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s,r,a,l,c;return r=this,a=void 0,c=function*(){try{const{headers:r,method:a,body:l}=t;let c={},{region:h}=t;h||(h=this.region);const u=new URL(`${this.url}/${e}`);let d;h&&"any"!==h&&(c["x-region"]=h,u.searchParams.set("forceFunctionRegion",h)),l&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!=typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",d=l):"string"==typeof l?(c["Content-Type"]="text/plain",d=l):"undefined"!=typeof FormData&&l instanceof FormData?d=l:(c["Content-Type"]="application/json",d=JSON.stringify(l)));const f=yield this.fetch(u.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),r),body:d}).catch(e=>{throw new i(e)}),p=f.headers.get("x-relay-error");if(p&&"true"===p)throw new n(f);if(!f.ok)throw new o(f);let g,v=(null!==(s=f.headers.get("Content-Type"))&&void 0!==s?s:"text/plain").split(";")[0].trim();return g="application/json"===v?yield f.json():"application/octet-stream"===v?yield f.blob():"text/event-stream"===v?f:"multipart/form-data"===v?yield f.formData():yield f.text(),{data:g,error:null,response:f}}catch(e){return{data:null,error:e,response:e instanceof o||e instanceof n?e.context:void 0}}},new((l=void 0)||(l=Promise))(function(e,t){function s(e){try{n(c.next(e))}catch(e){t(e)}}function i(e){try{n(c.throw(e))}catch(e){t(e)}}function n(t){var r;t.done?e(t.value):(r=t.value,r instanceof l?r:new l(function(e){e(r)})).then(s,i)}n((c=c.apply(r,a||[])).next())})}}},251:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_REALTIME_OPTIONS=t.DEFAULT_AUTH_OPTIONS=t.DEFAULT_DB_OPTIONS=t.DEFAULT_GLOBAL_OPTIONS=t.DEFAULT_HEADERS=void 0;const r=s(822);let i="";i="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node",t.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${i}/${r.version}`},t.DEFAULT_GLOBAL_OPTIONS={headers:t.DEFAULT_HEADERS},t.DEFAULT_DB_OPTIONS={schema:"public"},t.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},t.DEFAULT_REALTIME_OPTIONS={}},261:function(e,t,s){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(s(660));class n extends i.default{select(e){let t=!1;const s=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:r,referencedTable:i=r}={}){const n=i?`${i}.order`:"order",o=this.url.searchParams.get(n);return this.url.searchParams.set(n,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${void 0===s?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const r=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:r=s}={}){const i=void 0===r?"offset":`${r}.offset`,n=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(n,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:r=!1,wal:i=!1,format:n="text"}={}){var o;const a=[e?"analyze":null,t?"verbose":null,s?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=null!==(o=this.headers.get("Accept"))&&void 0!==o?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${n}; for="${l}"; options=${a};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}}t.default=n},279:function(e,t,s){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const i=r(s(961));t.PostgrestClient=i.default;const n=r(s(45));t.PostgrestQueryBuilder=n.default;const o=r(s(825));t.PostgrestFilterBuilder=o.default;const a=r(s(261));t.PostgrestTransformBuilder=a.default;const l=r(s(660));t.PostgrestBuilder=l.default;const c=r(s(818));t.PostgrestError=c.default,t.default={PostgrestClient:i.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:c.default}},442:function(e,t,s){var r,i=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s);var i=Object.getOwnPropertyDescriptor(t,s);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,r,i)}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[t.length]=s);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s=r(e),o=0;o<s.length;o++)"default"!==s[o]&&i(t,e,s[o]);return n(t,e),t}),a=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))(function(i,n){function o(e){try{l(r.next(e))}catch(e){n(e)}}function a(e){try{l(r.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.fetchWithAuth=t.resolveHeadersConstructor=t.resolveFetch=void 0;const l=o(s(517));t.resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?l.default:fetch),(...e)=>t(...e)},t.resolveHeadersConstructor=()=>"undefined"==typeof Headers?l.Headers:Headers,t.fetchWithAuth=(e,s,r)=>{const i=(0,t.resolveFetch)(r),n=(0,t.resolveHeadersConstructor)();return(t,r)=>a(void 0,void 0,void 0,function*(){var o;const a=null!==(o=yield s())&&void 0!==o?o:e;let l=new n(null==r?void 0:r.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${a}`),i(t,Object.assign(Object.assign({},r),{headers:l}))})}},517:(e,t,s)=>{s.r(t),s.d(t,{Headers:()=>o,Request:()=>a,Response:()=>l,default:()=>n,fetch:()=>i});var r=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==s.g)return s.g;throw new Error("unable to locate global object")}();const i=r.fetch,n=r.fetch.bind(r),o=r.Headers,a=r.Request,l=r.Response},646:function(e,t,s){var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s);var i=Object.getOwnPropertyDescriptor(t,s);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,r,i)}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),i=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||r(t,e,s)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createClient=t.SupabaseClient=t.FunctionRegion=t.FunctionsError=t.FunctionsRelayError=t.FunctionsFetchError=t.FunctionsHttpError=t.PostgrestError=void 0;const o=n(s(13));i(s(745),t);var a=s(279);Object.defineProperty(t,"PostgrestError",{enumerable:!0,get:function(){return a.PostgrestError}});var l=s(227);Object.defineProperty(t,"FunctionsHttpError",{enumerable:!0,get:function(){return l.FunctionsHttpError}}),Object.defineProperty(t,"FunctionsFetchError",{enumerable:!0,get:function(){return l.FunctionsFetchError}}),Object.defineProperty(t,"FunctionsRelayError",{enumerable:!0,get:function(){return l.FunctionsRelayError}}),Object.defineProperty(t,"FunctionsError",{enumerable:!0,get:function(){return l.FunctionsError}}),Object.defineProperty(t,"FunctionRegion",{enumerable:!0,get:function(){return l.FunctionRegion}}),i(s(830),t);var c=s(13);Object.defineProperty(t,"SupabaseClient",{enumerable:!0,get:function(){return n(c).default}}),t.createClient=(e,t,s)=>new o.default(e,t,s),function(){if("undefined"!=typeof window)return!1;if("undefined"==typeof process)return!1;const e=process.version;if(null==e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18}()&&console.warn("ΓÜá∩╕Å  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")},660:function(e,t,s){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(s(517)),n=r(s(818));t.default=class{constructor(e){var t,s;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(s=e.isMaybeSingle)&&void 0!==s&&s,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=i.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let s=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,s,r,i;let o=null,a=null,l=null,c=e.status,h=e.statusText;if(e.ok){if("HEAD"!==this.method){const s=await e.text();""===s||(a="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?s:JSON.parse(s))}const i=null===(s=this.headers.get("Prefer"))||void 0===s?void 0:s.match(/count=(exact|planned|estimated)/),n=null===(r=e.headers.get("content-range"))||void 0===r?void 0:r.split("/");i&&n&&n.length>1&&(l=parseInt(n[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,c=406,h="Not Acceptable"):a=1===a.length?a[0]:null)}else{const t=await e.text();try{o=JSON.parse(t),Array.isArray(o)&&404===e.status&&(a=[],o=null,c=200,h="OK")}catch(s){404===e.status&&""===t?(c=204,h="No Content"):o={message:t}}if(o&&this.isMaybeSingle&&(null===(i=null==o?void 0:o.details)||void 0===i?void 0:i.includes("0 rows"))&&(o=null,c=200,h="OK"),o&&this.shouldThrowOnError)throw new n.default(o)}return{error:o,data:a,count:l,status:c,statusText:h}});return this.shouldThrowOnError||(s=s.catch(e=>{var t,s,r;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(s=null==e?void 0:e.stack)&&void 0!==s?s:""}`,hint:"",code:`${null!==(r=null==e?void 0:e.code)&&void 0!==r?r:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}}},745:(e,t,s)=>{s.r(t),s.d(t,{AuthAdminApi:()=>Se,AuthApiError:()=>d,AuthClient:()=>Te,AuthError:()=>h,AuthImplicitGrantRedirectError:()=>b,AuthInvalidCredentialsError:()=>m,AuthInvalidJwtError:()=>O,AuthInvalidTokenResponseError:()=>y,AuthPKCEGrantCodeExchangeError:()=>k,AuthRetryableFetchError:()=>S,AuthSessionMissingError:()=>v,AuthUnknownError:()=>p,AuthWeakPasswordError:()=>E,CustomAuthError:()=>g,GoTrueAdminApi:()=>he,GoTrueClient:()=>ke,NavigatorLockAcquireTimeoutError:()=>pe,SIGN_OUT_SCOPES:()=>ce,isAuthApiError:()=>f,isAuthError:()=>u,isAuthImplicitGrantRedirectError:()=>_,isAuthRetryableFetchError:()=>T,isAuthSessionMissingError:()=>w,isAuthWeakPasswordError:()=>j,lockInternals:()=>de,navigatorLock:()=>ve,processLock:()=>ye});const r="2.71.1",i=3e4,n={"X-Client-Info":`gotrue-js/${r}`},o="X-Supabase-Api-Version",a=Date.parse("2024-01-01T00:00:00.0Z"),l="2024-01-01",c=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class h extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function u(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class d extends h{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function f(e){return u(e)&&"AuthApiError"===e.name}class p extends h{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class g extends h{constructor(e,t,s,r){super(e,s,r),this.name=t,this.status=s}}class v extends g{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function w(e){return u(e)&&"AuthSessionMissingError"===e.name}class y extends g{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class m extends g{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class b extends g{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function _(e){return u(e)&&"AuthImplicitGrantRedirectError"===e.name}class k extends g{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class S extends g{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function T(e){return u(e)&&"AuthRetryableFetchError"===e.name}class E extends g{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}function j(e){return u(e)&&"AuthWeakPasswordError"===e.name}class O extends g{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),A=" \t\n\r=".split(""),$=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<A.length;t+=1)e[A[t].charCodeAt(0)]=-2;for(let t=0;t<P.length;t+=1)e[P[t].charCodeAt(0)]=t;return e})();function C(e,t,s){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;s(P[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;s(P[e]),t.queuedBits-=6}}function x(e,t,s){const r=$[e];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function R(e){const t=[],s=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},n=e=>{!function(e,t,s){if(0===t.utf8seq){if(e<=127)return void s(e);for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&s(t.codepoint)}}(e,r,s)};for(let t=0;t<e.length;t+=1)x(e.charCodeAt(t),i,n);return t.join("")}function I(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function U(e){const t=[],s={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let t=0;t<e.length;t+=1)x(e.charCodeAt(t),s,r);return new Uint8Array(t)}function L(e){const t=[],s={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>C(e,s,r)),C(null,s,r),t.join("")}const N=()=>"undefined"!=typeof window&&"undefined"!=typeof document,D={tested:!1,writable:!1},F=()=>{if(!N())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(e){return!1}if(D.tested)return D.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),D.tested=!0,D.writable=!0}catch(e){D.tested=!0,D.writable=!1}return D.writable},M=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(s.bind(s,517)).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},B=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},q=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch(e){return s}},W=async(e,t)=>{await e.removeItem(t)};class H{constructor(){this.promise=new H.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function K(e){const t=e.split(".");if(3!==t.length)throw new O("Invalid JWT structure");for(let e=0;e<t.length;e++)if(!c.test(t[e]))throw new O("JWT not in base64url format");return{header:JSON.parse(R(t[0])),payload:JSON.parse(R(t[1])),signature:U(t[2]),raw:{header:t[0],payload:t[1]}}}function z(e){return("0"+e.toString(16)).substr(-2)}async function J(e,t,s=!1){const r=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let s="";for(let r=0;r<56;r++)s+=e.charAt(Math.floor(Math.random()*t));return s}return crypto.getRandomValues(e),Array.from(e,z).join("")}();let i=r;s&&(i+="/PASSWORD_RECOVERY"),await B(e,`${t}-code-verifier`,i);const n=await async function(e){if("undefined"==typeof crypto||void 0===crypto.subtle||"undefined"==typeof TextEncoder)return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),s=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(s);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}(r);return[n,r===n?"plain":"s256"]}H.promiseConstructor=Promise;const G=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,V=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Y(e){if(!V.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Q(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function X(e){return JSON.parse(JSON.stringify(e))}const Z=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ee=[502,503,504];async function te(e){var t,s;if(!("object"==typeof(s=e)&&null!==s&&"status"in s&&"ok"in s&&"json"in s&&"function"==typeof s.json))throw new S(Z(e),0);if(ee.includes(e.status))throw new S(Z(e),e.status);let r,i;try{r=await e.json()}catch(e){throw new p(Z(e),e)}const n=function(e){const t=e.headers.get(o);if(!t)return null;if(!t.match(G))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(e){return null}}(e);if(n&&n.getTime()>=a&&"object"==typeof r&&r&&"string"==typeof r.code?i=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(i=r.error_code),i){if("weak_password"===i)throw new E(Z(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===i)throw new v}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new E(Z(r),e.status,r.weak_password.reasons);throw new d(Z(r),e.status||500,i)}async function se(e,t,s,r){var i;const n=Object.assign({},null==r?void 0:r.headers);n[o]||(n[o]=l),(null==r?void 0:r.jwt)&&(n.Authorization=`Bearer ${r.jwt}`);const a=null!==(i=null==r?void 0:r.query)&&void 0!==i?i:{};(null==r?void 0:r.redirectTo)&&(a.redirect_to=r.redirectTo);const c=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",h=await async function(e,t,s,r,i,n){const o=((e,t,s,r)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),s))})(t,r,{},n);let a;try{a=await e(s,Object.assign({},o))}catch(e){throw console.error(e),new S(Z(e),0)}if(a.ok||await te(a),null==r?void 0:r.noResolveJson)return a;try{return await a.json()}catch(e){await te(e)}}(e,t,s+c,{headers:n,noResolveJson:null==r?void 0:r.noResolveJson},0,null==r?void 0:r.body);return(null==r?void 0:r.xform)?null==r?void 0:r.xform(h):{data:Object.assign({},h),error:null}}function re(e){var t;let s=null;var r;return function(e){return e.access_token&&e.refresh_token&&e.expires_in}(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r))),{data:{session:s,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function ie(e){const t=re(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function ne(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function oe(e){return{data:e,error:null}}function ae(e){const{action_link:t,email_otp:s,hashed_token:r,redirect_to:i,verification_type:n}=e,o=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(s[r[i]]=e[r[i]])}return s}(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:s,hashed_token:r,redirect_to:i,verification_type:n},user:Object.assign({},o)},error:null}}function le(e){return e}const ce=["global","local","others"];class he{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=M(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=ce[0]){if(ce.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ce.join(", ")}`);try{return await se(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(e){if(u(e))return{data:null,error:e};throw e}}async inviteUserByEmail(e,t={}){try{return await se(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ne})}catch(e){if(u(e))return{data:{user:null},error:e};throw e}}async generateLink(e){try{const{options:t}=e,s=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(s[r[i]]=e[r[i]])}return s}(e,["options"]),r=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(r.new_email=null==s?void 0:s.newEmail,delete r.newEmail),await se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:ae,redirectTo:null==t?void 0:t.redirectTo})}catch(e){if(u(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(e){try{return await se(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ne})}catch(e){if(u(e))return{data:{user:null},error:e};throw e}}async listUsers(e){var t,s,r,i,n,o,a;try{const l={nextPage:null,lastPage:0,total:0},c=await se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(s=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==s?s:"",per_page:null!==(i=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==i?i:""},xform:le});if(c.error)throw c.error;const h=await c.json(),u=null!==(n=c.headers.get("x-total-count"))&&void 0!==n?n:0,d=null!==(a=null===(o=c.headers.get("link"))||void 0===o?void 0:o.split(","))&&void 0!==a?a:[];return d.length>0&&(d.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),s=JSON.parse(e.split(";")[1].split("=")[1]);l[`${s}Page`]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},h),l),error:null}}catch(e){if(u(e))return{data:{users:[]},error:e};throw e}}async getUserById(e){Y(e);try{return await se(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ne})}catch(e){if(u(e))return{data:{user:null},error:e};throw e}}async updateUserById(e,t){Y(e);try{return await se(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ne})}catch(e){if(u(e))return{data:{user:null},error:e};throw e}}async deleteUser(e,t=!1){Y(e);try{return await se(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ne})}catch(e){if(u(e))return{data:{user:null},error:e};throw e}}async _listFactors(e){Y(e.userId);try{const{data:t,error:s}=await se(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:s}}catch(e){if(u(e))return{data:null,error:e};throw e}}async _deleteFactor(e){Y(e.userId),Y(e.id);try{return{data:await se(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(e){if(u(e))return{data:null,error:e};throw e}}}function ue(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}const de={debug:!!(globalThis&&F()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"))};class fe extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class pe extends fe{}class ge extends fe{}async function ve(e,t,s){de.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),de.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw de.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new pe(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(de.debug)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(e){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",e)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}de.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await s()}finally{de.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}))}const we={};async function ye(e,t,s){var r;const i=null!==(r=we[e])&&void 0!==r?r:Promise.resolve(),n=Promise.race([i.catch(()=>null),t>=0?new Promise((s,r)=>{setTimeout(()=>{r(new ge(`Acquring process lock with name "${e}" timed out`))},t)}):null].filter(e=>e)).catch(e=>{if(e&&e.isAcquireTimeout)throw e;return null}).then(async()=>await s());return we[e]=n.catch(async e=>{if(e&&e.isAcquireTimeout)return await i,null;throw e}),await n}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const me={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:n,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function be(e,t,s){return await s()}const _e={};class ke{constructor(e){var t,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ke.nextInstanceID,ke.nextInstanceID+=1,this.instanceID>0&&N()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},me),e);if(this.logDebugMessages=!!r.debug,"function"==typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new he({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=M(r.fetch),this.lock=r.lock||be,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:N()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=ve:this.lock=be,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:F()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ue(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=ue(this.memoryStorage)),N()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(e){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",e)}null===(s=this.broadcastChannel)||void 0===s||s.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=_e[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){_e[this.storageKey]=Object.assign(Object.assign({},_e[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=_e[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){_e[this.storageKey]=Object.assign(Object.assign({},_e[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${r}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},s=new URL(e);if(s.hash&&"#"===s.hash[0])try{new URLSearchParams(s.hash.substring(1)).forEach((e,s)=>{t[s]=e})}catch(e){}return s.searchParams.forEach((e,s)=>{t[s]=e}),t}(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),N()&&this.detectSessionInUrl&&"none"!==s){const{data:r,error:i}=await this._getSessionFromURL(t,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),_(i)){const t=null===(e=i.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:i}}return await this._removeSession(),{error:i}}const{session:n,redirectType:o}=r;return this._debug("#_initialize()","detected session in URL",n,"redirect type",o),await this._saveSession(n),setTimeout(async()=>{"recovery"===o?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return u(e)?{error:e}:{error:new p("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,r;try{const i=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(s=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==s?s:{},gotrue_meta_security:{captcha_token:null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:re}),{data:n,error:o}=i;if(o||!n)return{data:{user:null,session:null},error:o};const a=n.session,l=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(e){if(u(e))return{data:{user:null,session:null},error:e};throw e}}async signUp(e){var t,s,r;try{let i;if("email"in e){const{email:s,password:r,options:n}=e;let o=null,a=null;"pkce"===this.flowType&&([o,a]=await J(this.storage,this.storageKey)),i=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==n?void 0:n.emailRedirectTo,body:{email:s,password:r,data:null!==(t=null==n?void 0:n.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},code_challenge:o,code_challenge_method:a},xform:re})}else{if(!("phone"in e))throw new m("You must provide either an email or phone number and a password");{const{phone:t,password:n,options:o}=e;i=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:n,data:null!==(s=null==o?void 0:o.data)&&void 0!==s?s:{},channel:null!==(r=null==o?void 0:o.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken}},xform:re})}}const{data:n,error:o}=i;if(o||!n)return{data:{user:null,session:null},error:o};const a=n.session,l=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(e){if(u(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:r,options:i}=e;t=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:ie})}else{if(!("phone"in e))throw new m("You must provide either an email or phone number and a password");{const{phone:s,password:r,options:i}=e;t=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:ie})}}const{data:s,error:r}=t;return r?{data:{user:null,session:null},error:r}:s&&s.session&&s.user?(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r}):{data:{user:null,session:null},error:new y}}catch(e){if(u(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOAuth(e){var t,s,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(i=e.options)||void 0===i?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,r,i,n,o,a,l,c,h,d,f;let p,g;if("message"in e)p=e.message,g=e.signature;else{const{chain:u,wallet:d,statement:f,options:v}=e;let w;if(N())if("object"==typeof d)w=d;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");w=e.solana}else{if("object"!=typeof d||!(null==v?void 0:v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=d}const y=new URL(null!==(t=null==v?void 0:v.url)&&void 0!==t?t:window.location.href);if("signIn"in w&&w.signIn){const e=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==v?void 0:v.signInWithSolana),{version:"1",domain:y.host,uri:y.href}),f?{statement:f}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");p="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),g=t.signature}else{if(!("signMessage"in w&&"function"==typeof w.signMessage&&"publicKey"in w&&"object"==typeof w&&w.publicKey&&"toBase58"in w.publicKey&&"function"==typeof w.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${y.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${y.href}`,`Issued At: ${null!==(r=null===(s=null==v?void 0:v.signInWithSolana)||void 0===s?void 0:s.issuedAt)&&void 0!==r?r:(new Date).toISOString()}`,...(null===(i=null==v?void 0:v.signInWithSolana)||void 0===i?void 0:i.notBefore)?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...(null===(n=null==v?void 0:v.signInWithSolana)||void 0===n?void 0:n.expirationTime)?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...(null===(o=null==v?void 0:v.signInWithSolana)||void 0===o?void 0:o.chainId)?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...(null===(a=null==v?void 0:v.signInWithSolana)||void 0===a?void 0:a.nonce)?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...(null===(l=null==v?void 0:v.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...(null===(h=null===(c=null==v?void 0:v.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===h?void 0:h.length)?["Resources",...v.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await w.signMessage((new TextEncoder).encode(p),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=e}}try{const{data:t,error:s}=await se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:L(g)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(f=e.options)||void 0===f?void 0:f.captchaToken}}:null),xform:re});if(s)throw s;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:s}):{data:{user:null,session:null},error:new y}}catch(e){if(u(e))return{data:{user:null,session:null},error:e};throw e}}async _exchangeCodeForSession(e){const t=await q(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(null!=t?t:"").split("/");try{const{data:t,error:i}=await se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:re});if(await W(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=r?r:null}),error:i}):{data:{user:null,session:null,redirectType:null},error:new y}}catch(e){if(u(e))return{data:{user:null,session:null,redirectType:null},error:e};throw e}}async signInWithIdToken(e){try{const{options:t,provider:s,token:r,access_token:i,nonce:n}=e,o=await se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:i,nonce:n,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:re}),{data:a,error:l}=o;return l?{data:{user:null,session:null},error:l}:a&&a.session&&a.user?(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:l}):{data:{user:null,session:null},error:new y}}catch(e){if(u(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOtp(e){var t,s,r,i,n;try{if("email"in e){const{email:r,options:i}=e;let n=null,o=null;"pkce"===this.flowType&&([n,o]=await J(this.storage,this.storageKey));const{error:a}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},create_user:null===(s=null==i?void 0:i.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:n,code_challenge_method:o},redirectTo:null==i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:t,options:s}=e,{data:o,error:a}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null==s?void 0:s.data)&&void 0!==r?r:{},create_user:null===(i=null==s?void 0:s.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},channel:null!==(n=null==s?void 0:s.channel)&&void 0!==n?n:"sms"}});return{data:{user:null,session:null,messageId:null==o?void 0:o.message_id},error:a}}throw new m("You must provide either an email or phone number.")}catch(e){if(u(e))return{data:{user:null,session:null},error:e};throw e}}async verifyOtp(e){var t,s;try{let r,i;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,i=null===(s=e.options)||void 0===s?void 0:s.captchaToken);const{data:n,error:o}=await se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:re});if(o)throw o;if(!n)throw new Error("An error occurred on token verification.");const a=n.session,l=n.user;return(null==a?void 0:a.access_token)&&(await this._saveSession(a),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(e){if(u(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithSSO(e){var t,s,r;try{let i=null,n=null;return"pkce"===this.flowType&&([i,n]=await J(this.storage,this.storageKey)),await se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==s?s:void 0}),(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:n}),headers:this.headers,xform:oe})}catch(e){if(u(e))return{data:null,error:e};throw e}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new v;const{error:r}=await se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(u(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:i}=e,{error:n}=await se(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},redirectTo:null==i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:n}}if("phone"in e){const{phone:s,type:r,options:i}=e,{data:n,error:o}=await se(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:null==n?void 0:n.message_id},error:o}}throw new m("You must provide either an email or phone number and a type")}catch(e){if(u(e))return{data:{user:null,session:null},error:e};throw e}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch(e){}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(e){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await q(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=!!e.expires_at&&1e3*e.expires_at-Date.now()<9e4;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const t=await q(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=Q()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,s,r)=>(t||"user"!==s||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,s,r))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ne}):await this._useSession(async e=>{var t,s,r;const{data:i,error:n}=e;if(n)throw n;return(null===(t=i.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(s=i.session)||void 0===s?void 0:s.access_token)&&void 0!==r?r:void 0,xform:ne}):{data:{user:null},error:new v}})}catch(e){if(u(e))return w(e)&&(await this._removeSession(),await W(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:e};throw e}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:r,error:i}=s;if(i)throw i;if(!r.session)throw new v;const n=r.session;let o=null,a=null;"pkce"===this.flowType&&null!=e.email&&([o,a]=await J(this.storage,this.storageKey));const{data:l,error:c}=await se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:a}),jwt:n.access_token,xform:ne});if(c)throw c;return n.user=l.user,await this._saveSession(n),await this._notifyAllSubscribers("USER_UPDATED",n),{data:{user:n.user},error:null}})}catch(e){if(u(e))return{data:{user:null},error:e};throw e}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new v;const t=Date.now()/1e3;let s=t,r=!0,i=null;const{payload:n}=K(e.access_token);if(n.exp&&(s=n.exp,r=s<=t),r){const{session:t,error:s}=await this._callRefreshToken(e.refresh_token);if(s)return{data:{user:null,session:null},error:s};if(!t)return{data:{user:null,session:null},error:null};i=t}else{const{data:r,error:n}=await this._getUser(e.access_token);if(n)throw n;i={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(e){if(u(e))return{data:{session:null,user:null},error:e};throw e}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:r,error:i}=t;if(i)throw i;e=null!==(s=r.session)&&void 0!==s?s:void 0}if(!(null==e?void 0:e.refresh_token))throw new v;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(e){if(u(e))return{data:{user:null,session:null},error:e};throw e}}async _getSessionFromURL(e,t){try{if(!N())throw new b("No browser detected.");if(e.error||e.error_description||e.error_code)throw new b(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new k("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new b("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new k("No code detected.");const{data:t,error:s}=await this._exchangeCodeForSession(e.code);if(s)throw s;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:r,access_token:n,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!(n&&a&&o&&c))throw new b("No session defined in URL");const h=Math.round(Date.now()/1e3),u=parseInt(a);let d=h+u;l&&(d=parseInt(l));const f=d-h;1e3*f<=i&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${u}s`);const p=d-u;h-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,d,h):h-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,d,h);const{data:g,error:v}=await this._getUser(n);if(v)throw v;const w={provider_token:s,provider_refresh_token:r,access_token:n,expires_in:u,expires_at:d,refresh_token:o,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(e){if(u(e))return{data:{session:null,redirectType:null},error:e};throw e}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await q(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:r,error:i}=t;if(i)return{error:i};const n=null===(s=r.session)||void 0===s?void 0:s.access_token;if(n){const{error:t}=await this.admin.signOut(n,e);if(t&&(!f(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await W(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,r;try{const{data:{session:r},error:i}=t;if(i)throw i;await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(t){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",t),console.error(t)}})}async resetPasswordForEmail(e,t={}){let s=null,r=null;"pkce"===this.flowType&&([s,r]=await J(this.storage,this.storageKey,!0));try{return await se(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(e){if(u(e))return{data:null,error:e};throw e}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(e){if(u(e))return{data:null,error:e};throw e}}async linkIdentity(e){var t;try{const{data:s,error:r}=await this._useSession(async t=>{var s,r,i,n,o;const{data:a,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(s=e.options)||void 0===s?void 0:s.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(i=e.options)||void 0===i?void 0:i.queryParams,skipBrowserRedirect:!0});return await se(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(o=null===(n=a.session)||void 0===n?void 0:n.access_token)&&void 0!==o?o:void 0})});if(r)throw r;return N()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==s?void 0:s.url),{data:{provider:e.provider,url:null==s?void 0:s.url},error:null}}catch(t){if(u(t))return{data:{provider:e.provider,url:null},error:t};throw t}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,r;const{data:i,error:n}=t;if(n)throw n;return await se(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(r=null===(s=i.session)||void 0===s?void 0:s.access_token)&&void 0!==r?r:void 0})})}catch(e){if(u(e))return{data:null,error:e};throw e}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await(s=async s=>(s>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:re})),r=(e,t)=>{const s=200*Math.pow(2,e);return t&&T(t)&&Date.now()+s-n<i},new Promise((e,t)=>{(async()=>{for(let i=0;i<1/0;i++)try{const t=await s(i);if(!r(i,null))return void e(t)}catch(e){if(!r(i,e))return void t(e)}})()}))}catch(e){if(this._debug(t,"error",e),u(e))return{data:{session:null,user:null},error:e};throw e}finally{this._debug(t,"end")}var s,r}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),N()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await q(this.storage,this.storageKey);if(r&&this.userStorage){let t=await q(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:r.user},await B(this.userStorage,this.storageKey+"-user",t)),r.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:Q()}else if(r&&!r.user&&!r.user){const e=await q(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(r.user=e.user,await W(this.storage,this.storageKey+"-user"),await B(this.storage,this.storageKey,r)):r.user=Q()}if(this._debug(s,"session from storage",r),!this._isValidSession(r))return this._debug(s,"session is not valid"),void(null!==r&&await this._removeSession());const i=1e3*(null!==(t=r.expires_at)&&void 0!==t?t:1/0)-Date.now()<9e4;if(this._debug(s,`session has${i?"":" not"} expired with margin of 90000s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:e}=await this._callRefreshToken(r.refresh_token);e&&(console.error(e),T(e)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(r.user&&!0===r.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(r.access_token);!t&&(null==e?void 0:e.user)?(r.user=e.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(e){console.error("Error getting user data:",e),this._debug(s,"error getting user data, skipping SIGNED_IN notification",e)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(e){return this._debug(s,"error",e),void console.error(e)}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new v;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new H;const{data:t,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!t.session)throw new v;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(e){if(this._debug(r,"error",e),u(e)){const s={session:null,error:e};return T(e)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(s),s}throw null===(s=this.refreshingDeferred)||void 0===s||s.reject(e),e}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],i=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,t)}catch(e){r.push(e)}});if(await Promise.all(i),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!s&&t.user&&await B(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const r=X(e);await B(this.storage,this.storageKey,r)}else{const e=X(t);await B(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await W(this.storage,this.storageKey),await W(this.storage,this.storageKey+"-code-verifier"),await W(this.storage,this.storageKey+"-user"),this.userStorage&&await W(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&N()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),i);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*s.expires_at-e)/i);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(s.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof fe))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!N()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const r=[`provider=${encodeURIComponent(t)}`];if((null==s?void 0:s.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),(null==s?void 0:s.scopes)&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),"pkce"===this.flowType){const[e,t]=await J(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(s.toString())}if(null==s?void 0:s.queryParams){const e=new URLSearchParams(s.queryParams);r.push(e.toString())}return(null==s?void 0:s.skipBrowserRedirect)&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;return i?{data:null,error:i}:await se(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token})})}catch(e){if(u(e))return{data:null,error:e};throw e}}async _enroll(e){try{return await this._useSession(async t=>{var s,r;const{data:i,error:n}=t;if(n)return{data:null,error:n};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:a,error:l}=await se(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:null===(s=null==i?void 0:i.session)||void 0===s?void 0:s.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(r=null==a?void 0:a.totp)||void 0===r?void 0:r.qr_code)&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(e){if(u(e))return{data:null,error:e};throw e}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:n,error:o}=await se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+n.expires_in},n)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",n),{data:n,error:o})})}catch(e){if(u(e))return{data:null,error:e};throw e}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;return i?{data:null,error:i}:await se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token})})}catch(e){if(u(e))return{data:null,error:e};throw e}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(null==e?void 0:e.factors)||[],r=s.filter(e=>"totp"===e.factor_type&&"verified"===e.status),i=s.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:s,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:n}=K(r.access_token);let o=null;n.aal&&(o=n.aal);let a=o;return(null!==(s=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==s?s:[]).length>0&&(a="aal2"),{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:n.amr||[]},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(t=>t.kid===e);if(s)return s;const r=Date.now();if(s=this.jwks.keys.find(t=>t.kid===e),s&&this.jwks_cached_at+6e5>r)return s;const{data:i,error:n}=await se(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(n)throw n;return i.keys&&0!==i.keys.length?(this.jwks=i,this.jwks_cached_at=r,s=i.keys.find(t=>t.kid===e),s||null):null}async getClaims(e,t={}){try{let s=e;if(!s){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};s=e.session.access_token}const{header:r,payload:i,signature:n,raw:{header:o,payload:a}}=K(s);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(i.exp);const l=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(r.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(s);if(e)throw e;return{data:{claims:i,header:r,signature:n},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),h=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,n,function(e){const t=[];return function(e,t){for(let s=0;s<e.length;s+=1){let r=e.charCodeAt(s);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(s+1)-56320&65535|t),s+=1}I(r,t)}}(e,e=>t.push(e)),new Uint8Array(t)}(`${o}.${a}`)))throw new O("Invalid JWT signature");return{data:{claims:i,header:r,signature:n},error:null}}catch(e){if(u(e))return{data:null,error:e};throw e}}}ke.nextInstanceID=0;const Se=he,Te=ke},795:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SupabaseAuthClient=void 0;const r=s(745);class i extends r.AuthClient{constructor(e){super(e)}}t.SupabaseAuthClient=i},818:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class s extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=s},819:function(e,t){var s=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))(function(i,n){function o(e){try{l(r.next(e))}catch(e){n(e)}}function a(e){try{l(r.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})};function r(e){return e.endsWith("/")?e:e+"/"}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowser=void 0,t.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},t.ensureTrailingSlash=r,t.applySettingDefaults=function(e,t){var r,i;const{db:n,auth:o,realtime:a,global:l}=e,{db:c,auth:h,realtime:u,global:d}=t,f={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},h),o),realtime:Object.assign(Object.assign({},u),a),storage:{},global:Object.assign(Object.assign(Object.assign({},d),l),{headers:Object.assign(Object.assign({},null!==(r=null==d?void 0:d.headers)&&void 0!==r?r:{}),null!==(i=null==l?void 0:l.headers)&&void 0!==i?i:{})}),accessToken:()=>s(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f},t.validateSupabaseUrl=function(e){const t=null==e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(r(t))}catch(e){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}},t.isBrowser=()=>"undefined"!=typeof window},822:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="2.75.0"},825:function(e,t,s){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(s(261));class n extends i.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:r}={}){let i="";"plain"===r?i="pl":"phrase"===r?i="ph":"websearch"===r&&(i="w");const n=void 0===s?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${n}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}}t.default=n},830:(e,t,s)=>{s.r(t),s.d(t,{REALTIME_CHANNEL_STATES:()=>P,REALTIME_LISTEN_TYPES:()=>E,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:()=>T,REALTIME_PRESENCE_LISTEN_EVENTS:()=>S,REALTIME_SUBSCRIBE_STATES:()=>j,RealtimeChannel:()=>A,RealtimeClient:()=>x,RealtimePresence:()=>O,WebSocketFactory:()=>r});const r=class{static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if(void 0!==s.g&&void 0!==s.g.WebSocket)return{type:"native",constructor:s.g.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process&&process.versions&&process.versions.node){const e=parseInt(process.versions.node.split(".")[0]);return e>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${e} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${e} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}};var i,n,o,a,l,c;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(i||(i={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(n||(n={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(o||(o={})),function(e){e.websocket="websocket"}(a||(a={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(l||(l={}));class h{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const r=t.getUint8(1),i=t.getUint8(2);let n=this.HEADER_LENGTH+2;const o=s.decode(e.slice(n,n+r));n+=r;const a=s.decode(e.slice(n,n+i));return n+=i,{ref:null,topic:o,event:a,payload:JSON.parse(s.decode(e.slice(n,e.byteLength)))}}}class u{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(c||(c={}));const d=(e,t,s={})=>{var r;const i=null!==(r=s.skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce((s,r)=>(s[r]=f(r,e,t,i),s),{})},f=(e,t,s,r)=>{const i=t.find(t=>t.name===e),n=null==i?void 0:i.type,o=s[e];return n&&!r.includes(n)?p(n,o):g(o)},p=(e,t)=>{if("_"===e.charAt(0)){const s=e.slice(1,e.length);return m(t,s)}switch(e){case c.bool:return v(t);case c.float4:case c.float8:case c.int2:case c.int4:case c.int8:case c.numeric:case c.oid:return w(t);case c.json:case c.jsonb:return y(t);case c.timestamp:return b(t);case c.abstime:case c.date:case c.daterange:case c.int4range:case c.int8range:case c.money:case c.reltime:case c.text:case c.time:case c.timestamptz:case c.timetz:case c.tsrange:case c.tstzrange:default:return g(t)}},g=e=>e,v=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},w=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},y=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},m=(e,t)=>{if("string"!=typeof e)return e;const s=e.length-1,r=e[s];if("{"===e[0]&&"}"===r){let r;const i=e.slice(1,s);try{r=JSON.parse("["+i+"]")}catch(e){r=i?i.split(","):[]}return r.map(e=>p(t,e))}return e},b=e=>"string"==typeof e?e.replace(" ","T"):e,_=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class k{constructor(e,t,s={},r=1e4){this.channel=e,this.event=t,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t(null===(s=this.receivedResp)||void 0===s?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var S,T,E,j;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(S||(S={}));class O{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},e=>{const{onJoin:t,onLeave:s,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=O.syncState(this.state,e,t,s),this.pendingDiffs.forEach(e=>{this.state=O.syncDiff(this.state,e,t,s)}),this.pendingDiffs=[],r()}),this.channel._on(s.diff,{},e=>{const{onJoin:t,onLeave:s,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=O.syncDiff(this.state,e,t,s),r())}),this.onJoin((e,t,s)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:s})}),this.onLeave((e,t,s)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,r){const i=this.cloneDeep(e),n=this.transformState(t),o={},a={};return this.map(i,(e,t)=>{n[e]||(a[e]=t)}),this.map(n,(e,t)=>{const s=i[e];if(s){const r=t.map(e=>e.presence_ref),i=s.map(e=>e.presence_ref),n=t.filter(e=>i.indexOf(e.presence_ref)<0),l=s.filter(e=>r.indexOf(e.presence_ref)<0);n.length>0&&(o[e]=n),l.length>0&&(a[e]=l)}else o[e]=t}),this.syncDiff(i,{joins:o,leaves:a},s,r)}static syncDiff(e,t,s,r){const{joins:i,leaves:n}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(i,(t,r)=>{var i;const n=null!==(i=e[t])&&void 0!==i?i:[];if(e[t]=this.cloneDeep(r),n.length>0){const s=e[t].map(e=>e.presence_ref),r=n.filter(e=>s.indexOf(e.presence_ref)<0);e[t].unshift(...r)}s(t,n,r)}),this.map(n,(t,s)=>{let i=e[t];if(!i)return;const n=s.map(e=>e.presence_ref);i=i.filter(e=>n.indexOf(e.presence_ref)<0),e[t]=i,r(t,i,s),0===i.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const r=e[s];return t[s]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(T||(T={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(E||(E={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(j||(j={}));const P=n;class A{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=n.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new k(this,o.join,this.params,this.timeout),this.rejoinTimer=new u(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=n.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=n.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=n.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=n.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=n.errored,this.rejoinTimer.scheduleTimeout())}),this._on(o.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new O(this),this.broadcastEndpointURL=_(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,r;if(this.socket.isConnected()||this.socket.connect(),this.state==n.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params,l=null!==(r=null===(s=this.bindings.postgres_changes)||void 0===s?void 0:s.map(e=>e.filter))&&void 0!==r?r:[],c=!!this.bindings[E.PRESENCE]&&this.bindings[E.PRESENCE].length>0,h={},u={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:c}),postgres_changes:l,private:a};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(j.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(j.CLOSED)),this.updateJoinPayload(Object.assign({config:u},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var s;if(this.socket.setAuth(),void 0!==t){const r=this.bindings.postgres_changes,i=null!==(s=null==r?void 0:r.length)&&void 0!==s?s:0,o=[];for(let s=0;s<i;s++){const i=r[s],{filter:{event:a,schema:l,table:c,filter:h}}=i,u=t&&t[s];if(!u||u.event!==a||u.schema!==l||u.table!==c||u.filter!==h)return this.unsubscribe(),this.state=n.errored,void(null==e||e(j.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));o.push(Object.assign(Object.assign({},i),{id:u.id}))}return this.bindings.postgres_changes=o,void(e&&e(j.SUBSCRIBED))}null==e||e(j.SUBSCRIBED)}).receive("error",t=>{this.state=n.errored,null==e||e(j.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(j.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===n.joined&&e===E.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async send(e,t={}){var s,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(s=>{var r,i,n;const o=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(n=null===(i=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===i?void 0:i.broadcast)||void 0===n?void 0:n.ack)||s("ok"),o.receive("ok",()=>s("ok")),o.receive("error",()=>s("error")),o.receive("timeout",()=>s("timed out"))});{const{event:i,payload:n}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:n,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(s=t.timeout)&&void 0!==s?s:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(e){return"AbortError"===e.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=n.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(o.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new k(this,o.leave,{},e),s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{null==s||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=n.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const r=new AbortController,i=setTimeout(()=>r.abort(),s),n=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),n}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new k(this,e,t,s);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var r,i;const n=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:h}=o;if(s&&[a,l,c,h].indexOf(n)>=0&&s!==this._joinRef())return;let u=this._onMessage(n,t,s);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(n)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,s,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(s=e.filter)||void 0===s?void 0:s.event)||void 0===r?void 0:r.toLocaleLowerCase())===n}).map(e=>e.callback(u,s)):null===(i=this.bindings[n])||void 0===i||i.filter(e=>{var s,r,i,o,a,l;if(["broadcast","presence","postgres_changes"].includes(n)){if("id"in e){const n=e.id,o=null===(s=e.filter)||void 0===s?void 0:s.event;return n&&(null===(r=t.ids)||void 0===r?void 0:r.includes(n))&&("*"===o||(null==o?void 0:o.toLocaleLowerCase())===(null===(i=t.data)||void 0===i?void 0:i.type.toLocaleLowerCase()))}{const s=null===(a=null===(o=null==e?void 0:e.filter)||void 0===o?void 0:o.event)||void 0===a?void 0:a.toLocaleLowerCase();return"*"===s||s===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===n}).map(e=>{if("object"==typeof u&&"ids"in u){const e=u.data,{schema:t,table:s,commit_timestamp:r,type:i,errors:n}=e,o={schema:t,table:s,commit_timestamp:r,eventType:i,new:{},old:{},errors:n};u=Object.assign(Object.assign({},o),this._getPayloadRecords(e))}e.callback(u,s)})}_isClosed(){return this.state===n.closed}_isJoined(){return this.state===n.joined}_isJoining(){return this.state===n.joining}_isLeaving(){return this.state===n.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:s};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===s&&A.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(o.close,{},e)}_onError(e){this._on(o.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=n.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=d(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=d(e.columns,e.old_record)),t}}const $=()=>{},C=[1e3,2e3,5e3,1e4];class x{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.transport=null,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=$,this.ref=0,this.reconnectTimer=null,this.logger=$,this.conn=null,this.sendBuffer=[],this.serializer=new h,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(s.bind(s,517)).then(({default:t})=>t(...e)).catch(e=>{throw new Error(`Failed to load @supabase/node-fetch: ${e.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...e)=>t(...e)},!(null===(r=null==t?void 0:t.params)||void 0===r?void 0:r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${a.websocket}`,this.httpEndpoint=_(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=r.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case i.connecting:return l.Connecting;case i.open:return l.Open;case i.closing:return l.Closing;default:return l.Closed}}isConnected(){return this.connectionState()===l.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(e=>e.topic===s);if(r)return r;{const s=new A(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:s,payload:r,ref:i}=e,n=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${s} (${i})`,r),this.isConnected()?n():this.sendBuffer.push(n)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},100);this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{"phoenix"===e.topic&&"phx_reply"===e.event&&this.heartbeatCallback("ok"===e.payload.status?"ok":"error"),e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:s,payload:r,ref:i}=e,n=i?`(${i})`:"",o=r.status||"";this.log("receive",`${o} ${t} ${s} ${n}`.trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(s,r,i)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(o.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const s=e.match(/\?/)?"&":"?";return`${e}${s}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;t=e||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const s={access_token:t,version:"realtime-js/2.15.1"};t&&e.updateJoinPayload(s),e.joinedOnce&&e._isJoined()&&e._push(o.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(t){this.log("error",`error in ${e} callback`,t)}})}catch(t){this.log("error",`error triggering ${e} callbacks`,t)}}_setupReconnectionTimer(){this.reconnectTimer=new u(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},10)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,r,i,n,o,a,l;if(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(s=null==e?void 0:e.timeout)&&void 0!==s?s:1e4,this.heartbeatIntervalMs=null!==(r=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==r?r:25e3,this.worker=null!==(i=null==e?void 0:e.worker)&&void 0!==i&&i,this.accessToken=null!==(n=null==e?void 0:e.accessToken)&&void 0!==n?n:null,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(o=null==e?void 0:e.reconnectAfterMs)&&void 0!==o?o:e=>C[e-1]||1e4,this.encode=null!==(a=null==e?void 0:e.encode)&&void 0!==a?a:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(l=null==e?void 0:e.decode)&&void 0!==l?l:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}},961:function(e,t,s){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(s(45)),n=r(s(825));class o{constructor(e,{headers:t={},schema:s,fetch:r}={}){this.url=e,this.headers=new Headers(t),this.schemaName=s,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new i.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new o(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:r=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let c;s||r?(a=s?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{l.searchParams.append(e,t)})):(a="POST",c=t);const h=new Headers(this.headers);return i&&h.set("Prefer",`count=${i}`),new n.default({method:a,url:l,headers:h,schema:this.schemaName,body:c,fetch:null!==(o=this.fetch)&&void 0!==o?o:fetch})}}t.default=o},962:(e,t,s)=>{s.r(t),s.d(t,{StorageApiError:()=>n,StorageClient:()=>j,StorageError:()=>r,StorageUnknownError:()=>o,isStorageError:()=>i});class r extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function i(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class n extends r{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class o extends r{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const a=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(s.bind(s,517)).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},l=e=>{if(Array.isArray(e))return e.map(e=>l(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,s])=>{const r=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[r]=l(s)}),t};var c=function(e,t,s,r){return new(s||(s=Promise))(function(i,n){function o(e){try{l(r.next(e))}catch(e){n(e)}}function a(e){try{l(r.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})};const h=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),u=(e,t,r)=>c(void 0,void 0,void 0,function*(){const i=yield(a=void 0,l=void 0,c=void 0,u=function*(){return"undefined"==typeof Response?(yield Promise.resolve().then(s.bind(s,517))).Response:Response},new(c||(c=Promise))(function(e,t){function s(e){try{i(u.next(e))}catch(e){t(e)}}function r(e){try{i(u.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):(i=t.value,i instanceof c?i:new c(function(e){e(i)})).then(s,r)}i((u=u.apply(a,l||[])).next())}));var a,l,c,u;e instanceof i&&!(null==r?void 0:r.noResolveJson)?e.json().then(s=>{const r=e.status||500,i=(null==s?void 0:s.statusCode)||r+"";t(new n(h(s),r,i))}).catch(e=>{t(new o(h(e),e))}):t(new o(h(e),e))});function d(e,t,s,r,i,n){return c(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(s,((e,t,s,r)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&r?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(r)?(i.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,(null==t?void 0:t.duplex)&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),s)):i})(t,r,i,n)).then(e=>{if(!e.ok)throw e;return(null==r?void 0:r.noResolveJson)?e:e.json()}).then(e=>o(e)).catch(e=>u(e,a,r))})})}function f(e,t,s,r){return c(this,void 0,void 0,function*(){return d(e,"GET",t,s,r)})}function p(e,t,s,r,i){return c(this,void 0,void 0,function*(){return d(e,"POST",t,r,i,s)})}function g(e,t,s,r,i){return c(this,void 0,void 0,function*(){return d(e,"PUT",t,r,i,s)})}function v(e,t,s,r,i){return c(this,void 0,void 0,function*(){return d(e,"DELETE",t,r,i,s)})}class w{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return e=this,t=void 0,r=function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}},new((s=void 0)||(s=Promise))(function(i,n){function o(e){try{l(r.next(e))}catch(e){n(e)}}function a(e){try{l(r.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())});var e,t,s,r}}class y{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}asStream(){return new w(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.execute().then(e,t)}execute(){return e=this,t=void 0,r=function*(){try{const e=yield this.downloadFn();return{data:yield e.blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}},new((s=void 0)||(s=Promise))(function(i,n){function o(e){try{l(r.next(e))}catch(e){n(e)}}function a(e){try{l(r.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())});var e,t,s,r}}var m=function(e,t,s,r){return new(s||(s=Promise))(function(i,n){function o(e){try{l(r.next(e))}catch(e){n(e)}}function a(e){try{l(r.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})};const b={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class k{constructor(e,t={},s,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=s,this.fetch=a(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,s,r){return m(this,void 0,void 0,function*(){try{let i;const n=Object.assign(Object.assign({},_),r);let o=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(n.upsert)});const a=n.metadata;"undefined"!=typeof Blob&&s instanceof Blob?(i=new FormData,i.append("cacheControl",n.cacheControl),a&&i.append("metadata",this.encodeMetadata(a)),i.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(i=s,i.append("cacheControl",n.cacheControl),a&&i.append("metadata",this.encodeMetadata(a))):(i=s,o["cache-control"]=`max-age=${n.cacheControl}`,o["content-type"]=n.contentType,a&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(a)))),(null==r?void 0:r.headers)&&(o=Object.assign(Object.assign({},o),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),h=yield("PUT"==e?g:p)(this.fetch,`${this.url}/object/${c}`,i,Object.assign({headers:o},(null==n?void 0:n.duplex)?{duplex:n.duplex}:{}));return{data:{path:l,id:h.Id,fullPath:h.Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}})}upload(e,t,s){return m(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,r){return m(this,void 0,void 0,function*(){const n=this._removeEmptyFolders(e),o=this._getFinalPath(n),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:_.upsert},r),i=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});return"undefined"!=typeof Blob&&s instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(e=s,e.append("cacheControl",t.cacheControl)):(e=s,i["cache-control"]=`max-age=${t.cacheControl}`,i["content-type"]=t.contentType),{data:{path:n,fullPath:(yield g(this.fetch,a.toString(),e,{headers:i})).Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}})}createSignedUploadUrl(e,t){return m(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const i=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(i["x-upsert"]="true");const n=yield p(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:i}),o=new URL(this.url+n.url),a=o.searchParams.get("token");if(!a)throw new r("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}})}update(e,t,s){return m(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return m(this,void 0,void 0,function*(){try{return{data:yield p(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}})}copy(e,t,s){return m(this,void 0,void 0,function*(){try{return{data:{path:(yield p(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}})}createSignedUrl(e,t,s){return m(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield p(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},(null==s?void 0:s.transform)?{transform:s.transform}:{}),{headers:this.headers});const n=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${n}`)},{data:i,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}})}createSignedUrls(e,t,s){return m(this,void 0,void 0,function*(){try{const r=yield p(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${i}`):null})),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}})}download(e,t){const s=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),i=r?`?${r}`:"",n=this._getFinalPath(e);return new y(()=>f(this.fetch,`${this.url}/${s}/${n}${i}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return m(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield f(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:l(e),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}})}exists(e){return m(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,s){return c(this,void 0,void 0,function*(){return d(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),undefined)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e)&&e instanceof o){const t=e.originalError;if([400,404].includes(null==t?void 0:t.status))return{data:!1,error:e}}throw e}})}getPublicUrl(e,t){const s=this._getFinalPath(e),r=[],i=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==i&&r.push(i);const n=void 0!==(null==t?void 0:t.transform)?"render/image":"object",o=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==o&&r.push(o);let a=r.join("&");return""!==a&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${n}/public/${s}${a}`)}}}remove(e){return m(this,void 0,void 0,function*(){try{return{data:yield v(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}})}list(e,t,s){return m(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},b),t),{prefix:e||""});return{data:yield p(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}})}listV2(e,t){return m(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield p(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const S={"X-Client-Info":"storage-js/2.75.0"};var T=function(e,t,s,r){return new(s||(s=Promise))(function(i,n){function o(e){try{l(r.next(e))}catch(e){n(e)}}function a(e){try{l(r.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})};class E{constructor(e,t={},s,r){this.shouldThrowOnError=!1;const i=new URL(e);(null==r?void 0:r.useNewHostname)&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},S),t),this.fetch=a(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return T(this,void 0,void 0,function*(){try{return{data:yield f(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}})}getBucket(e){return T(this,void 0,void 0,function*(){try{return{data:yield f(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}})}createBucket(e){return T(this,arguments,void 0,function*(e,t={public:!1}){try{return{data:yield p(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}})}updateBucket(e,t){return T(this,void 0,void 0,function*(){try{return{data:yield g(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}})}emptyBucket(e){return T(this,void 0,void 0,function*(){try{return{data:yield p(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}})}deleteBucket(e){return T(this,void 0,void 0,function*(){try{return{data:yield v(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}})}}class j extends E{constructor(e,t={},s,r){super(e,t,s,r)}from(e){return new k(this.url,this.headers,e,this.fetch)}}}},t={};function s(r){var i=t[r];if(void 0!==i)return i.exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,s),n.exports}return s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s(646)})());src\frontend\node_modules\@typescript-eslint\scope-manager\dist\lib\dom.js:    AutoFillContactField: base_config_1.TYPE,
src\frontend\node_modules\@typescript-eslint\scope-manager\dist\lib\dom.js:    AutoFillContactKind: base_config_1.TYPE,
